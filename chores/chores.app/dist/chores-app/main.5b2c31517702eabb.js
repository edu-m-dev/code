"use strict";(self.webpackChunkchores_app=self.webpackChunkchores_app||[]).push([[792],{499(){function ia(t,e,n,r,o,i,s){try{var a=t[i](s),c=a.value}catch(u){return void n(u)}a.done?e(c):Promise.resolve(c).then(r,o)}function y(t){return function(){var e=this,n=arguments;return new Promise(function(r,o){var i=t.apply(e,n);function s(c){ia(i,r,o,s,a,"next",c)}function a(c){ia(i,r,o,s,a,"throw",c)}s(void 0)})}}let lt=null,mo=!1,Hp=1;const tt=Symbol("SIGNAL");function B(t){const e=lt;return lt=t,e}const yi={version:0,lastCleanEpoch:0,dirty:!1,producers:void 0,producersTail:void 0,consumers:void 0,consumersTail:void 0,recomputing:!1,consumerAllowSignalWrites:!1,consumerIsAlwaysLive:!1,kind:"unknown",producerMustRecompute:()=>!1,producerRecomputeValue:()=>{},consumerMarkedDirty:()=>{},consumerOnSignalRead:()=>{}};function sa(t){if(mo)throw new Error("");if(null===lt)return;lt.consumerOnSignalRead(t);const e=lt.producersTail;if(void 0!==e&&e.producer===t)return;let n;const r=lt.recomputing;if(r&&(n=void 0!==e?e.nextProducer:lt.producers,void 0!==n&&n.producer===t))return lt.producersTail=n,void(n.lastReadVersion=t.version);const o=t.consumersTail;if(void 0!==o&&o.consumer===lt&&(!r||function Px(t,e){const n=e.producersTail;if(void 0!==n){let r=e.producers;do{if(r===t)return!0;if(r===n)break;r=r.nextProducer}while(void 0!==r)}return!1}(o,lt)))return;const i=vi(lt),s={producer:t,consumer:lt,nextProducer:n,prevConsumer:o,lastReadVersion:t.version,nextConsumer:void 0};lt.producersTail=s,void 0!==e?e.nextProducer=s:lt.producers=s,i&&cI(t,s)}function aa(t){if((!vi(t)||t.dirty)&&(t.dirty||t.lastCleanEpoch!==Hp)){if(!t.producerMustRecompute(t)&&!Pu(t))return void Ou(t);t.producerRecomputeValue(t),Ou(t)}}function sI(t){if(void 0===t.consumers)return;const e=mo;mo=!0;try{for(let n=t.consumers;void 0!==n;n=n.nextConsumer){const r=n.consumer;r.dirty||Mx(r)}}finally{mo=e}}function aI(){return!1!==lt?.consumerAllowSignalWrites}function Mx(t){t.dirty=!0,sI(t),t.consumerMarkedDirty?.(t)}function Ou(t){t.dirty=!1,t.lastCleanEpoch=Hp}function _i(t){return t&&function Nx(t){t.producersTail=void 0,t.recomputing=!0}(t),B(t)}function ca(t,e){B(e),t&&function Ox(t){t.recomputing=!1;const e=t.producersTail;let n=void 0!==e?e.nextProducer:t.producers;if(void 0!==n){if(vi(t))do{n=jp(n)}while(void 0!==n);void 0!==e?e.nextProducer=void 0:t.producers=void 0}}(t)}function Pu(t){for(let e=t.producers;void 0!==e;e=e.nextProducer){const n=e.producer,r=e.lastReadVersion;if(r!==n.version||(aa(n),r!==n.version))return!0}return!1}function ua(t){if(vi(t)){let e=t.producers;for(;void 0!==e;)e=jp(e)}t.producers=void 0,t.producersTail=void 0,t.consumers=void 0,t.consumersTail=void 0}function cI(t,e){const n=t.consumersTail,r=vi(t);if(void 0!==n?(e.nextConsumer=n.nextConsumer,n.nextConsumer=e):(e.nextConsumer=void 0,t.consumers=e),e.prevConsumer=n,t.consumersTail=e,!r)for(let o=t.producers;void 0!==o;o=o.nextProducer)cI(o.producer,o)}function jp(t){const e=t.producer,n=t.nextProducer,r=t.nextConsumer,o=t.prevConsumer;if(t.nextConsumer=void 0,t.prevConsumer=void 0,void 0!==r?r.prevConsumer=o:e.consumersTail=o,void 0!==o)o.nextConsumer=r;else if(e.consumers=r,!vi(e)){let i=e.producers;for(;void 0!==i;)i=jp(i)}return n}function vi(t){return t.consumerIsAlwaysLive||void 0!==t.consumers}function Gp(t,e){return Object.is(t,e)}const yo=Symbol("UNSET"),Ci=Symbol("COMPUTING"),Mr=Symbol("ERRORED"),Fx={...yi,value:yo,dirty:!0,error:null,equal:Gp,kind:"computed",producerMustRecompute:t=>t.value===yo||t.value===Ci,producerRecomputeValue(t){if(t.value===Ci)throw new Error("");const e=t.value;t.value=Ci;const n=_i(t);let r,o=!1;try{r=t.computation(),B(null),o=e!==yo&&e!==Mr&&r!==Mr&&t.equal(e,r)}catch(i){r=Mr,t.error=i}finally{ca(t,n)}o?t.value=e:(t.value=r,t.version++)}};let uI=function Lx(){throw new Error};function lI(t){uI(t)}function Hx(t,e){const n=Object.create(zp);n.value=t,void 0!==e&&(n.equal=e);const r=()=>function Bx(t){return sa(t),t.value}(n);return r[tt]=n,[r,s=>Fu(n,s),s=>function dI(t,e){aI()||lI(t),Fu(t,e(t.value))}(n,s)]}function Fu(t,e){aI()||lI(t),t.equal(t.value,e)||(t.value=e,function Vx(t){t.version++,function Rx(){Hp++}(),sI(t)}(t))}const zp={...yi,equal:Gp,value:void 0,kind:"signal"},$x={...yi,consumerIsAlwaysLive:!0,consumerAllowSignalWrites:!0,dirty:!0,kind:"effect"};function be(t){return"function"==typeof t}function qp(t){const n=t(r=>{Error.call(r),r.stack=(new Error).stack});return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}const Kp=qp(t=>function(n){t(this),this.message=n?`${n.length} errors occurred during unsubscription:\n${n.map((r,o)=>`${o+1}) ${r.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=n});function Wp(t,e){if(t){const n=t.indexOf(e);0<=n&&t.splice(n,1)}}class Kt{constructor(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}unsubscribe(){let e;if(!this.closed){this.closed=!0;const{_parentage:n}=this;if(n)if(this._parentage=null,Array.isArray(n))for(const i of n)i.remove(this);else n.remove(this);const{initialTeardown:r}=this;if(be(r))try{r()}catch(i){e=i instanceof Kp?i.errors:[i]}const{_finalizers:o}=this;if(o){this._finalizers=null;for(const i of o)try{pI(i)}catch(s){e=e??[],s instanceof Kp?e=[...e,...s.errors]:e.push(s)}}if(e)throw new Kp(e)}}add(e){var n;if(e&&e!==this)if(this.closed)pI(e);else{if(e instanceof Kt){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=null!==(n=this._finalizers)&&void 0!==n?n:[]).push(e)}}_hasParent(e){const{_parentage:n}=this;return n===e||Array.isArray(n)&&n.includes(e)}_addParent(e){const{_parentage:n}=this;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e}_removeParent(e){const{_parentage:n}=this;n===e?this._parentage=null:Array.isArray(n)&&Wp(n,e)}remove(e){const{_finalizers:n}=this;n&&Wp(n,e),e instanceof Kt&&e._removeParent(this)}}Kt.EMPTY=(()=>{const t=new Kt;return t.closed=!0,t})();const fI=Kt.EMPTY;function hI(t){return t instanceof Kt||t&&"closed"in t&&be(t.remove)&&be(t.add)&&be(t.unsubscribe)}function pI(t){be(t)?t():t.unsubscribe()}const _o={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},Lu={setTimeout(t,e,...n){const{delegate:r}=Lu;return r?.setTimeout?r.setTimeout(t,e,...n):setTimeout(t,e,...n)},clearTimeout(t){const{delegate:e}=Lu;return(e?.clearTimeout||clearTimeout)(t)},delegate:void 0};function gI(t){Lu.setTimeout(()=>{const{onUnhandledError:e}=_o;if(!e)throw t;e(t)})}function Yp(){}const zx=Qp("C",void 0,void 0);function Qp(t,e,n){return{kind:t,value:e,error:n}}let vo=null;function Uu(t){if(_o.useDeprecatedSynchronousErrorHandling){const e=!vo;if(e&&(vo={errorThrown:!1,error:null}),t(),e){const{errorThrown:n,error:r}=vo;if(vo=null,n)throw r}}else t()}class Jp extends Kt{constructor(e){super(),this.isStopped=!1,e?(this.destination=e,hI(e)&&e.add(this)):this.destination=Zx}static create(e,n,r){return new Xp(e,n,r)}next(e){this.isStopped?eg(function Kx(t){return Qp("N",t,void 0)}(e),this):this._next(e)}error(e){this.isStopped?eg(function qx(t){return Qp("E",void 0,t)}(e),this):(this.isStopped=!0,this._error(e))}complete(){this.isStopped?eg(zx,this):(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe(),this.destination=null)}_next(e){this.destination.next(e)}_error(e){try{this.destination.error(e)}finally{this.unsubscribe()}}_complete(){try{this.destination.complete()}finally{this.unsubscribe()}}}const Yx=Function.prototype.bind;function Zp(t,e){return Yx.call(t,e)}class Qx{constructor(e){this.partialObserver=e}next(e){const{partialObserver:n}=this;if(n.next)try{n.next(e)}catch(r){Hu(r)}}error(e){const{partialObserver:n}=this;if(n.error)try{n.error(e)}catch(r){Hu(r)}else Hu(e)}complete(){const{partialObserver:e}=this;if(e.complete)try{e.complete()}catch(n){Hu(n)}}}class Xp extends Jp{constructor(e,n,r){let o;if(super(),be(e)||!e)o={next:e??void 0,error:n??void 0,complete:r??void 0};else{let i;this&&_o.useDeprecatedNextContext?(i=Object.create(e),i.unsubscribe=()=>this.unsubscribe(),o={next:e.next&&Zp(e.next,i),error:e.error&&Zp(e.error,i),complete:e.complete&&Zp(e.complete,i)}):o=e}this.destination=new Qx(o)}}function Hu(t){_o.useDeprecatedSynchronousErrorHandling?function Wx(t){_o.useDeprecatedSynchronousErrorHandling&&vo&&(vo.errorThrown=!0,vo.error=t)}(t):gI(t)}function eg(t,e){const{onStoppedNotification:n}=_o;n&&Lu.setTimeout(()=>n(t,e))}const Zx={closed:!0,next:Yp,error:function Jx(t){throw t},complete:Yp},tg="function"==typeof Symbol&&Symbol.observable||"@@observable";function Ei(t){return t}function mI(t){return 0===t.length?Ei:1===t.length?t[0]:function(n){return t.reduce((r,o)=>o(r),n)}}let Ge=(()=>{class t{constructor(n){n&&(this._subscribe=n)}lift(n){const r=new t;return r.source=this,r.operator=n,r}subscribe(n,r,o){const i=function tF(t){return t&&t instanceof Jp||function eF(t){return t&&be(t.next)&&be(t.error)&&be(t.complete)}(t)&&hI(t)}(n)?n:new Xp(n,r,o);return Uu(()=>{const{operator:s,source:a}=this;i.add(s?s.call(i,a):a?this._subscribe(i):this._trySubscribe(i))}),i}_trySubscribe(n){try{return this._subscribe(n)}catch(r){n.error(r)}}forEach(n,r){return new(r=yI(r))((o,i)=>{const s=new Xp({next:a=>{try{n(a)}catch(c){i(c),s.unsubscribe()}},error:i,complete:o});this.subscribe(s)})}_subscribe(n){var r;return null===(r=this.source)||void 0===r?void 0:r.subscribe(n)}[tg](){return this}pipe(...n){return mI(n)(this)}toPromise(n){return new(n=yI(n))((r,o)=>{let i;this.subscribe(s=>i=s,s=>o(s),()=>r(i))})}}return t.create=e=>new t(e),t})();function yI(t){var e;return null!==(e=t??_o.Promise)&&void 0!==e?e:Promise}const nF=qp(t=>function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"});let ng,rn=(()=>{class t extends Ge{constructor(){super(),this.closed=!1,this.currentObservers=null,this.observers=[],this.isStopped=!1,this.hasError=!1,this.thrownError=null}lift(n){const r=new _I(this,this);return r.operator=n,r}_throwIfClosed(){if(this.closed)throw new nF}next(n){Uu(()=>{if(this._throwIfClosed(),!this.isStopped){this.currentObservers||(this.currentObservers=Array.from(this.observers));for(const r of this.currentObservers)r.next(n)}})}error(n){Uu(()=>{if(this._throwIfClosed(),!this.isStopped){this.hasError=this.isStopped=!0,this.thrownError=n;const{observers:r}=this;for(;r.length;)r.shift().error(n)}})}complete(){Uu(()=>{if(this._throwIfClosed(),!this.isStopped){this.isStopped=!0;const{observers:n}=this;for(;n.length;)n.shift().complete()}})}unsubscribe(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null}get observed(){var n;return(null===(n=this.observers)||void 0===n?void 0:n.length)>0}_trySubscribe(n){return this._throwIfClosed(),super._trySubscribe(n)}_subscribe(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)}_innerSubscribe(n){const{hasError:r,isStopped:o,observers:i}=this;return r||o?fI:(this.currentObservers=null,i.push(n),new Kt(()=>{this.currentObservers=null,Wp(i,n)}))}_checkFinalizedStatuses(n){const{hasError:r,thrownError:o,isStopped:i}=this;r?n.error(o):i&&n.complete()}asObservable(){const n=new Ge;return n.source=this,n}}return t.create=(e,n)=>new _I(e,n),t})();class _I extends rn{constructor(e,n){super(),this.destination=e,this.source=n}next(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.next)||void 0===r||r.call(n,e)}error(e){var n,r;null===(r=null===(n=this.destination)||void 0===n?void 0:n.error)||void 0===r||r.call(n,e)}complete(){var e,n;null===(n=null===(e=this.destination)||void 0===e?void 0:e.complete)||void 0===n||n.call(e)}_subscribe(e){var n,r;return null!==(r=null===(n=this.source)||void 0===n?void 0:n.subscribe(e))&&void 0!==r?r:fI}}class on extends rn{constructor(e){super(),this._value=e}get value(){return this.getValue()}_subscribe(e){const n=super._subscribe(e);return!n.closed&&e.next(this._value),n}getValue(){const{hasError:e,thrownError:n,_value:r}=this;if(e)throw n;return this._throwIfClosed(),r}next(e){super.next(this._value=e)}}function rg(){return ng}function Nr(t){const e=ng;return ng=t,e}const rF=Symbol("NotFound");function og(t){return t===rF||"\u0275NotFound"===t?.name}Error;const EI="https://angular.dev/best-practices/security#preventing-cross-site-scripting-xss";class I extends Error{code;constructor(e,n){super(xt(e,n)),this.code=e}}function xt(t,e){return`${function iF(t){return`NG0${Math.abs(t)}`}(t)}${e?": "+e:""}`}const Ue=globalThis;function j(t){for(let e in t)if(t[e]===j)return e;throw Error("")}function sF(t,e){for(const n in e)e.hasOwnProperty(n)&&!t.hasOwnProperty(n)&&(t[n]=e[n])}function sn(t){if("string"==typeof t)return t;if(Array.isArray(t))return`[${t.map(sn).join(", ")}]`;if(null==t)return""+t;const e=t.overriddenName||t.name;if(e)return`${e}`;const n=t.toString();if(null==n)return""+n;const r=n.indexOf("\n");return r>=0?n.slice(0,r):n}function ig(t,e){return t?e?`${t} ${e}`:t:e||""}const aF=j({__forward_ref__:j});function Ce(t){return t.__forward_ref__=Ce,t.toString=function(){return sn(this())},t}function X(t){return Vu(t)?t():t}function Vu(t){return"function"==typeof t&&t.hasOwnProperty(aF)&&t.__forward_ref__===Ce}function M(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function sr(t){return{providers:t.providers||[],imports:t.imports||[]}}function ju(t){return function pF(t,e){return t.hasOwnProperty(e)&&t[e]||null}(t,Gu)}function $u(t){return t&&t.hasOwnProperty(sg)?t[sg]:null}const Gu=j({\u0275prov:j}),sg=j({\u0275inj:j});class S{_desc;ngMetadataName="InjectionToken";\u0275prov;constructor(e,n){this._desc=e,this.\u0275prov=void 0,"number"==typeof n?this.__NG_ELEMENT_ID__=n:void 0!==n&&(this.\u0275prov=M({token:this,providedIn:n.providedIn||"root",factory:n.factory}))}get multi(){return this}toString(){return`InjectionToken ${this._desc}`}}function cg(t){return t&&!!t.\u0275providers}const II=j({\u0275cmp:j}),CF=j({\u0275dir:j}),EF=j({\u0275pipe:j}),TI=j({\u0275mod:j}),Io=j({\u0275fac:j}),la=j({__NG_ELEMENT_ID__:j}),wI=j({__NG_ENV_ID__:j});function Hn(t){return qu(t),t[TI]||null}function ae(t){return qu(t),t[II]||null}function wt(t){return qu(t),t[CF]||null}function vn(t){return qu(t),t[EF]||null}function qu(t,e){if(null==t)throw new I(-919,!1)}function Q(t){return"string"==typeof t?t:null==t?"":String(t)}const lg=j({ngErrorCode:j}),DI=j({ngErrorMessage:j}),da=j({ngTokenPath:j});function dg(t,e){return SI("",-200,e)}function fg(t,e){throw new I(-201,!1)}function SI(t,e,n){const r=new I(e,t);return r[lg]=e,r[DI]=t,n&&(r[da]=n),r}let hg;function AI(){return hg}function Ft(t){const e=hg;return hg=t,e}function bI(t,e,n){const r=ju(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:8&n?null:void 0!==e?e:void fg()}const To={};class AF{injector;constructor(e){this.injector=e}retrieve(e,n){const r=fa(n)||0;try{return this.injector.get(e,8&r?null:To,r)}catch(o){if(og(o))return o;throw o}}}function bF(t,e=0){const n=rg();if(void 0===n)throw new I(-203,!1);if(null===n)return bI(t,void 0,e);{const r=function kF(t){return{optional:!!(8&t),host:!!(1&t),self:!!(2&t),skipSelf:!!(4&t)}}(e),o=n.retrieve(t,r);if(og(o)){if(r.optional)return null;throw o}return o}}function F(t,e=0){return(AI()||bF)(X(t),e)}function E(t,e){return F(t,fa(e))}function fa(t){return typeof t>"u"||"number"==typeof t?t:0|(t.optional&&8)|(t.host&&1)|(t.self&&2)|(t.skipSelf&&4)}function gg(t){const e=[];for(let n=0;n<t.length;n++){const r=X(t[n]);if(Array.isArray(r)){if(0===r.length)throw new I(900,!1);let o,i=0;for(let s=0;s<r.length;s++){const a=r[s],c=RF(a);"number"==typeof c?-1===c?o=a.token:i|=c:o=a}e.push(F(o,i))}else e.push(F(r))}return e}function RF(t){return t.__NG_DI_FLAG__}function wo(t,e){return t.hasOwnProperty(Io)?t[Io]:null}function Di(t,e){t.forEach(n=>Array.isArray(n)?Di(n,e):e(n))}function RI(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function Ku(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}function Yu(t,e,n){let r=pa(t,e);return r>=0?t[1|r]=n:(r=~r,function NI(t,e,n,r){let o=t.length;if(o==e)t.push(n,r);else if(1===o)t.push(r,t[0]),t[0]=n;else{for(o--,t.push(t[o-1],t[o]);o>e;)t[o]=t[o-2],o--;t[e]=n,t[e+1]=r}}(t,r,e,n)),r}function mg(t,e){const n=pa(t,e);if(n>=0)return t[1|n]}function pa(t,e){return function NF(t,e,n){let r=0,o=t.length>>n;for(;o!==r;){const i=r+(o-r>>1),s=t[i<<n];if(e===s)return i<<n;s>e?o=i:r=i+1}return~(o<<n)}(t,e,1)}const Bn={},De=[],Do=new S(""),OI=new S("",-1),yg=new S("");class Qu{get(e,n=To){if(n===To){const o=SI("",-201);throw o.name="\u0275NotFound",o}return n}}function ga(t){return{\u0275providers:t}}function PI(...t){return{\u0275providers:_g(0,t),\u0275fromNgModule:!0}}function _g(t,...e){const n=[],r=new Set;let o;const i=s=>{n.push(s)};return Di(e,s=>{const a=s;Ju(a,i,[],r)&&(o||=[],o.push(a))}),void 0!==o&&xI(o,i),n}function xI(t,e){for(let n=0;n<t.length;n++){const{ngModule:r,providers:o}=t[n];vg(o,i=>{e(i,r)})}}function Ju(t,e,n,r){if(!(t=X(t)))return!1;let o=null,i=$u(t);const s=!i&&ae(t);if(i||s){if(s&&!s.standalone)return!1;o=t}else{const c=t.ngModule;if(i=$u(c),!i)return!1;o=c}const a=r.has(o);if(s){if(a)return!1;if(r.add(o),s.dependencies){const c="function"==typeof s.dependencies?s.dependencies():s.dependencies;for(const u of c)Ju(u,e,n,r)}}else{if(!i)return!1;{if(null!=i.imports&&!a){let u;r.add(o),Di(i.imports,l=>{Ju(l,e,n,r)&&(u||=[],u.push(l))}),void 0!==u&&xI(u,e)}if(!a){const u=wo(o)||(()=>new o);e({provide:o,useFactory:u,deps:De},o),e({provide:yg,useValue:o,multi:!0},o),e({provide:Do,useValue:()=>F(o),multi:!0},o)}const c=i.providers;if(null!=c&&!a){const u=t;vg(c,l=>{e(l,u)})}}}return o!==t&&void 0!==t.providers}function vg(t,e){for(let n of t)cg(n)&&(n=n.\u0275providers),Array.isArray(n)?vg(n,e):e(n)}const PF=j({provide:String,useValue:j});function Cg(t){return null!==t&&"object"==typeof t&&PF in t}function ar(t){return"function"==typeof t}const Eg=new S(""),Zu={},HI={};let Ig;function Tg(){return void 0===Ig&&(Ig=new Qu),Ig}class ot{}class So extends ot{parent;source;scopes;records=new Map;_ngOnDestroyHooks=new Set;_onDestroyHooks=[];get destroyed(){return this._destroyed}_destroyed=!1;injectorDefTypes;constructor(e,n,r,o){super(),this.parent=n,this.source=r,this.scopes=o,Dg(e,s=>this.processProvider(s)),this.records.set(OI,Si(void 0,this)),o.has("environment")&&this.records.set(ot,Si(void 0,this));const i=this.records.get(Eg);null!=i&&"string"==typeof i.value&&this.scopes.add(i.value),this.injectorDefTypes=new Set(this.get(yg,De,{self:!0}))}retrieve(e,n){const r=fa(n)||0;try{return this.get(e,To,r)}catch(o){if(og(o))return o;throw o}}destroy(){ma(this),this._destroyed=!0;const e=B(null);try{for(const r of this._ngOnDestroyHooks)r.ngOnDestroy();const n=this._onDestroyHooks;this._onDestroyHooks=[];for(const r of n)r()}finally{this.records.clear(),this._ngOnDestroyHooks.clear(),this.injectorDefTypes.clear(),B(e)}}onDestroy(e){return ma(this),this._onDestroyHooks.push(e),()=>this.removeOnDestroy(e)}runInContext(e){ma(this);const n=Nr(this),r=Ft(void 0);try{return e()}finally{Nr(n),Ft(r)}}get(e,n=To,r){if(ma(this),e.hasOwnProperty(wI))return e[wI](this);const o=fa(r),s=Nr(this),a=Ft(void 0);try{if(!(4&o)){let u=this.records.get(e);if(void 0===u){const l=function HF(t){return"function"==typeof t||"object"==typeof t&&"InjectionToken"===t.ngMetadataName}(e)&&ju(e);u=l&&this.injectableDefInScope(l)?Si(wg(e),Zu):null,this.records.set(e,u)}if(null!=u)return this.hydrate(e,u,o)}return(2&o?Tg():this.parent).get(e,n=8&o&&n===To?null:n)}catch(c){const u=function DF(t){return t[lg]}(c);throw-200===u||-201===u?new I(u,null):c}finally{Ft(a),Nr(s)}}resolveInjectorInitializers(){const e=B(null),n=Nr(this),r=Ft(void 0);try{const i=this.get(Do,De,{self:!0});for(const s of i)s()}finally{Nr(n),Ft(r),B(e)}}toString(){const e=[],n=this.records;for(const r of n.keys())e.push(sn(r));return`R3Injector[${e.join(", ")}]`}processProvider(e){let n=ar(e=X(e))?e:X(e&&e.provide);const r=function FF(t){return Cg(t)?Si(void 0,t.useValue):Si(BI(t),Zu)}(e);if(!ar(e)&&!0===e.multi){let o=this.records.get(n);o||(o=Si(void 0,Zu,!0),o.factory=()=>gg(o.multi),this.records.set(n,o)),n=e,o.multi.push(e)}this.records.set(n,r)}hydrate(e,n,r){const o=B(null);try{if(n.value===HI)throw dg(sn(e));return n.value===Zu&&(n.value=HI,n.value=n.factory(void 0,r)),"object"==typeof n.value&&n.value&&function UF(t){return null!==t&&"object"==typeof t&&"function"==typeof t.ngOnDestroy}(n.value)&&this._ngOnDestroyHooks.add(n.value),n.value}finally{B(o)}}injectableDefInScope(e){if(!e.providedIn)return!1;const n=X(e.providedIn);return"string"==typeof n?"any"===n||this.scopes.has(n):this.injectorDefTypes.has(n)}removeOnDestroy(e){const n=this._onDestroyHooks.indexOf(e);-1!==n&&this._onDestroyHooks.splice(n,1)}}function wg(t){const e=ju(t),n=null!==e?e.factory:wo(t);if(null!==n)return n;if(t instanceof S)throw new I(204,!1);if(t instanceof Function)return function xF(t){if(t.length>0)throw new I(204,!1);const n=function gF(t){return(t?.[Gu]??null)||null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new I(204,!1)}function BI(t,e,n){let r;if(ar(t)){const o=X(t);return wo(o)||wg(o)}if(Cg(t))r=()=>X(t.useValue);else if(function LI(t){return!(!t||!t.useFactory)}(t))r=()=>t.useFactory(...gg(t.deps||[]));else if(function FI(t){return!(!t||!t.useExisting)}(t))r=(o,i)=>F(X(t.useExisting),void 0!==i&&8&i?8:void 0);else{const o=X(t&&(t.useClass||t.provide));if(!function LF(t){return!!t.deps}(t))return wo(o)||wg(o);r=()=>new o(...gg(t.deps))}return r}function ma(t){if(t.destroyed)throw new I(205,!1)}function Si(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function Dg(t,e){for(const n of t)Array.isArray(n)?Dg(n,e):n&&cg(n)?Dg(n.\u0275providers,e):e(n)}function Dt(t,e){let n;t instanceof So?(ma(t),n=t):n=new AF(t);const o=Nr(n),i=Ft(void 0);try{return e()}finally{Nr(o),Ft(i)}}function Sg(){return void 0!==AI()||null!=rg()}const V=11,U=27;function Pe(t){return Array.isArray(t)&&"object"==typeof t[1]}function St(t){return Array.isArray(t)&&!0===t[1]}function jI(t){return!!(4&t.flags)}function Vn(t){return t.componentOffset>-1}function Mi(t){return!(1&~t.flags)}function En(t){return!!t.template}function Lr(t){return!!(512&t[2])}function lr(t){return!(256&~t[2])}function st(t){for(;Array.isArray(t);)t=t[0];return t}function Ni(t,e){return st(e[t])}function ke(t,e){return st(e[t.index])}function Oi(t,e){return t.data[e]}function At(t,e){const n=e[t];return Pe(n)?n:n[0]}function Rg(t){return!(128&~t[2])}function yt(t,e){return null==e?null:t[e]}function WI(t){t[17]=0}function YI(t){1024&t[2]||(t[2]|=1024,Rg(t)&&Pi(t))}function nl(t){return!!(9216&t[2]||t[24]?.dirty)}function Mg(t){t[10].changeDetectionScheduler?.notify(8),64&t[2]&&(t[2]|=1024),nl(t)&&Pi(t)}function Pi(t){t[10].changeDetectionScheduler?.notify(0);let e=dr(t);for(;null!==e&&!(8192&e[2])&&(e[2]|=8192,Rg(e));)e=dr(e)}function rl(t,e){if(lr(t))throw new I(911,!1);null===t[21]&&(t[21]=[]),t[21].push(e)}function dr(t){const e=t[3];return St(e)?e[3]:e}const K={lFrame:pT(null),bindingsEnabled:!0,skipHydrationRootTNode:null};let Pg=!1;function xg(){return K.bindingsEnabled}function w(){return K.lFrame.lView}function G(){return K.lFrame.tView}function ol(t){return K.lFrame.contextLView=t,t[8]}function il(t){return K.lFrame.contextLView=null,t}function Y(){let t=oT();for(;null!==t&&64===t.type;)t=t.parent;return t}function oT(){return K.lFrame.currentTNode}function fr(t,e){const n=K.lFrame;n.currentTNode=t,n.isParent=e}function iT(){return K.lFrame.isParent}function uT(){return Pg}function sl(t){const e=Pg;return Pg=t,e}function _t(){return K.lFrame.bindingIndex++}function JF(t,e){const n=K.lFrame;n.bindingIndex=n.bindingRootIndex=t,Fg(e)}function Fg(t){K.lFrame.currentDirectiveIndex=t}function al(t){K.lFrame.currentQueryIndex=t}function XF(t){const e=t[1];return 2===e.type?e.declTNode:1===e.type?t[5]:null}function fT(t,e,n){if(4&n){let o=e,i=t;for(;!(o=o.parent,null!==o||1&n||(o=XF(i),null===o||(i=i[14],10&o.type))););if(null===o)return!1;e=o,t=i}const r=K.lFrame=hT();return r.currentTNode=e,r.lView=t,!0}function Hg(t){const e=hT(),n=t[1];K.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function hT(){const t=K.lFrame,e=null===t?null:t.child;return null===e?pT(t):e}function pT(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function gT(){const t=K.lFrame;return K.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const mT=gT;function Bg(){const t=gT();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function dt(){return K.lFrame.selectedIndex}function Mo(t){K.lFrame.selectedIndex=t}function In(){const t=K.lFrame;return Oi(t.tView,t.selectedIndex)}let yT=!0;function cl(){return yT}function va(t){yT=t}function _T(t,e=null,n=null,r){const o=vT(t,e,n,r);return o.resolveInjectorInitializers(),o}function vT(t,e=null,n=null,r,o=new Set){const i=[n||De,PI(t)];return r=r||("object"==typeof t?void 0:sn(t)),new So(i,e||Tg(),r||null,o)}class Lt{static THROW_IF_NOT_FOUND=To;static NULL=new Qu;static create(e,n){if(Array.isArray(e))return _T({name:""},n,e,"");{const r=e.name??"";return _T({name:r},e.parent,e.providers,r)}}static \u0275prov=M({token:Lt,providedIn:"any",factory:()=>F(OI)});static __NG_ELEMENT_ID__=-1}const kt=new S("");let Tn=(()=>class t{static __NG_ELEMENT_ID__=sL;static __NG_ENV_ID__=n=>n})();class CT extends Tn{_lView;constructor(e){super(),this._lView=e}get destroyed(){return lr(this._lView)}onDestroy(e){const n=this._lView;return rl(n,e),()=>function Ng(t,e){if(null===t[21])return;const n=t[21].indexOf(e);-1!==n&&t[21].splice(n,1)}(n,e)}}function sL(){return new CT(w())}const aL=!1,cL=new S("");let Ur=(()=>{class t{taskId=0;pendingTasks=new Set;destroyed=!1;pendingTask=new on(!1);debugTaskTracker=E(cL,{optional:!0});get hasPendingTasks(){return!this.destroyed&&this.pendingTask.value}get hasPendingTasksObservable(){return this.destroyed?new Ge(n=>{n.next(!1),n.complete()}):this.pendingTask}add(){!this.hasPendingTasks&&!this.destroyed&&this.pendingTask.next(!0);const n=this.taskId++;return this.pendingTasks.add(n),this.debugTaskTracker?.add(n),n}has(n){return this.pendingTasks.has(n)}remove(n){this.pendingTasks.delete(n),this.debugTaskTracker?.remove(n),0===this.pendingTasks.size&&this.hasPendingTasks&&this.pendingTask.next(!1)}ngOnDestroy(){this.pendingTasks.clear(),this.hasPendingTasks&&this.pendingTask.next(!1),this.destroyed=!0,this.pendingTask.unsubscribe()}static \u0275prov=M({token:t,providedIn:"root",factory:()=>new t})}return t})();const qe=class uL extends rn{__isAsync;destroyRef=void 0;pendingTasks=void 0;constructor(e=!1){super(),this.__isAsync=e,Sg()&&(this.destroyRef=E(Tn,{optional:!0})??void 0,this.pendingTasks=E(Ur,{optional:!0})??void 0)}emit(e){const n=B(null);try{super.next(e)}finally{B(n)}}subscribe(e,n,r){let o=e,i=n||(()=>null),s=r;if(e&&"object"==typeof e){const c=e;o=c.next?.bind(c),i=c.error?.bind(c),s=c.complete?.bind(c)}this.__isAsync&&(i=this.wrapInTimeout(i),o&&(o=this.wrapInTimeout(o)),s&&(s=this.wrapInTimeout(s)));const a=super.subscribe({next:o,error:i,complete:s});return e instanceof Kt&&e.add(a),a}wrapInTimeout(e){return n=>{const r=this.pendingTasks?.add();setTimeout(()=>{try{e(n)}finally{void 0!==r&&this.pendingTasks?.remove(r)}})}}};function ul(...t){}function ET(t){let e,n;function r(){t=ul;try{void 0!==n&&"function"==typeof cancelAnimationFrame&&cancelAnimationFrame(n),void 0!==e&&clearTimeout(e)}catch{}}return e=setTimeout(()=>{t(),r()}),"function"==typeof requestAnimationFrame&&(n=requestAnimationFrame(()=>{t(),r()})),()=>r()}function lL(t){return queueMicrotask(()=>t()),()=>{t=ul}}const Vg="isAngularZone",ll=Vg+"_ID";let dL=0;class Ie{hasPendingMacrotasks=!1;hasPendingMicrotasks=!1;isStable=!0;onUnstable=new qe(!1);onMicrotaskEmpty=new qe(!1);onStable=new qe(!1);onError=new qe(!1);constructor(e){const{enableLongStackTrace:n=!1,shouldCoalesceEventChangeDetection:r=!1,shouldCoalesceRunChangeDetection:o=!1,scheduleInRootZone:i=aL}=e;if(typeof Zone>"u")throw new I(908,!1);Zone.assertZonePatched();const s=this;s._nesting=0,s._outer=s._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(s._inner=s._inner.fork(new Zone.TaskTrackingZoneSpec)),n&&Zone.longStackTraceZoneSpec&&(s._inner=s._inner.fork(Zone.longStackTraceZoneSpec)),s.shouldCoalesceEventChangeDetection=!o&&r,s.shouldCoalesceRunChangeDetection=o,s.callbackScheduled=!1,s.scheduleInRootZone=i,function pL(t){const e=()=>{!function hL(t){function e(){ET(()=>{t.callbackScheduled=!1,$g(t),t.isCheckStableRunning=!0,jg(t),t.isCheckStableRunning=!1})}t.isCheckStableRunning||t.callbackScheduled||(t.callbackScheduled=!0,t.scheduleInRootZone?Zone.root.run(()=>{e()}):t._outer.run(()=>{e()}),$g(t))}(t)},n=dL++;t._inner=t._inner.fork({name:"angular",properties:{[Vg]:!0,[ll]:n,[ll+n]:!0},onInvokeTask:(r,o,i,s,a,c)=>{if(function mL(t){return wT(t,"__ignore_ng_zone__")}(c))return r.invokeTask(i,s,a,c);try{return IT(t),r.invokeTask(i,s,a,c)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===s.type||t.shouldCoalesceRunChangeDetection)&&e(),TT(t)}},onInvoke:(r,o,i,s,a,c,u)=>{try{return IT(t),r.invoke(i,s,a,c,u)}finally{t.shouldCoalesceRunChangeDetection&&!t.callbackScheduled&&!function yL(t){return wT(t,"__scheduler_tick__")}(c)&&e(),TT(t)}},onHasTask:(r,o,i,s)=>{r.hasTask(i,s),o===i&&("microTask"==s.change?(t._hasPendingMicrotasks=s.microTask,$g(t),jg(t)):"macroTask"==s.change&&(t.hasPendingMacrotasks=s.macroTask))},onHandleError:(r,o,i,s)=>(r.handleError(i,s),t.runOutsideAngular(()=>t.onError.emit(s)),!1)})}(s)}static isInAngularZone(){return typeof Zone<"u"&&!0===Zone.current.get(Vg)}static assertInAngularZone(){if(!Ie.isInAngularZone())throw new I(909,!1)}static assertNotInAngularZone(){if(Ie.isInAngularZone())throw new I(909,!1)}run(e,n,r){return this._inner.run(e,n,r)}runTask(e,n,r,o){const i=this._inner,s=i.scheduleEventTask("NgZoneEvent: "+o,e,fL,ul,ul);try{return i.runTask(s,n,r)}finally{i.cancelTask(s)}}runGuarded(e,n,r){return this._inner.runGuarded(e,n,r)}runOutsideAngular(e){return this._outer.run(e)}}const fL={};function jg(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function $g(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&!0===t.callbackScheduled)}function IT(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function TT(t){t._nesting--,jg(t)}class gL{hasPendingMicrotasks=!1;hasPendingMacrotasks=!1;isStable=!0;onUnstable=new qe;onMicrotaskEmpty=new qe;onStable=new qe;onError=new qe;run(e,n,r){return e.apply(n,r)}runGuarded(e,n,r){return e.apply(n,r)}runOutsideAngular(e){return e()}runTask(e,n,r,o){return e.apply(n,r)}}function wT(t,e){return!(!Array.isArray(t)||1!==t.length)&&!0===t[0]?.data?.[e]}class Ca{_console=console;handleError(e){this._console.error("ERROR",e)}}const $n=new S("",{factory:()=>{const t=E(Ie),e=E(ot);let n;return r=>{t.runOutsideAngular(()=>{e.destroyed&&!n?setTimeout(()=>{throw r}):(n??=e.get(Ca),n.handleError(r))})}}}),DT={provide:Do,useValue:()=>{E(Ca,{optional:!0})},multi:!0};function wn(t,e){const[n,r,o]=Hx(t,e?.equal),i=n;return i.set=r,i.update=o,i.asReadonly=Gg.bind(i),i}function Gg(){const t=this[tt];if(void 0===t.readonlyFn){const e=()=>this();e[tt]=t,t.readonlyFn=e}return t.readonlyFn}let zg=(()=>class t{view;node;constructor(n,r){this.view=n,this.node=r}static __NG_ELEMENT_ID__=vL})();function vL(){return new zg(w(),Y())}class Fi{}const qg=new S("",{factory:()=>!0}),CL=new S("");let dl=(()=>{class t{internalPendingTasks=E(Ur);scheduler=E(Fi);errorHandler=E($n);add(){const n=this.internalPendingTasks.add();return()=>{this.internalPendingTasks.has(n)&&(this.scheduler.notify(11),this.internalPendingTasks.remove(n))}}run(n){const r=this.add();n().catch(this.errorHandler).finally(r)}static \u0275prov=M({token:t,providedIn:"root",factory:()=>new t})}return t})(),ST=(()=>{class t{static \u0275prov=M({token:t,providedIn:"root",factory:()=>new EL})}return t})();class EL{dirtyEffectCount=0;queues=new Map;add(e){this.enqueue(e),this.schedule(e)}schedule(e){e.dirty&&this.dirtyEffectCount++}remove(e){const r=this.queues.get(e.zone);r.has(e)&&(r.delete(e),e.dirty&&this.dirtyEffectCount--)}enqueue(e){const n=e.zone;this.queues.has(n)||this.queues.set(n,new Set);const r=this.queues.get(n);r.has(e)||r.add(e)}flush(){for(;this.dirtyEffectCount>0;){let e=!1;for(const[n,r]of this.queues)e||=null===n?this.flushQueue(r):n.run(()=>this.flushQueue(r));e||(this.dirtyEffectCount=0)}}flushQueue(e){let n=!1;for(const r of e)r.dirty&&(this.dirtyEffectCount--,n=!0,r.run());return n}}function fe(t){return function jx(t){const e=B(null);try{return t()}finally{B(e)}}(t)}let kT=null;function Hr(){return kT}class bL{}let fl=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=M({token:t,factory:()=>E(RL),providedIn:"platform"})}return t})();const kL=new S("");let RL=(()=>{class t extends fl{_location;_history;_doc=E(kt);constructor(){super(),this._location=window.location,this._history=window.history}getBaseHrefFromDOM(){return Hr().getBaseHref(this._doc)}onPopState(n){const r=Hr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("popstate",n,!1),()=>r.removeEventListener("popstate",n)}onHashChange(n){const r=Hr().getGlobalEventTarget(this._doc,"window");return r.addEventListener("hashchange",n,!1),()=>r.removeEventListener("hashchange",n)}get href(){return this._location.href}get protocol(){return this._location.protocol}get hostname(){return this._location.hostname}get port(){return this._location.port}get pathname(){return this._location.pathname}get search(){return this._location.search}get hash(){return this._location.hash}set pathname(n){this._location.pathname=n}pushState(n,r,o){this._history.pushState(n,r,o)}replaceState(n,r,o){this._history.replaceState(n,r,o)}forward(){this._history.forward()}back(){this._history.back()}historyGo(n=0){this._history.go(n)}getState(){return this._history.state}static \u0275fac=function(r){return new(r||t)};static \u0275prov=M({token:t,factory:()=>new t,providedIn:"platform"})}return t})();function RT(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const r=n.indexOf("="),[o,i]=-1==r?[n,""]:[n.slice(0,r),n.slice(r+1)];if(o.trim()===e)return decodeURIComponent(i)}return null}class MT{}let OT=(()=>{class t{static \u0275prov=M({token:t,providedIn:"root",factory:()=>new NL(E(kt),window)})}return t})();class NL{document;window;offset=()=>[0,0];constructor(e,n){this.document=e,this.window=n}setOffset(e){this.offset=Array.isArray(e)?()=>e:e}getScrollPosition(){return[this.window.scrollX,this.window.scrollY]}scrollToPosition(e,n){this.window.scrollTo({...n,left:e[0],top:e[1]})}scrollToAnchor(e,n){const r=function OL(t,e){const n=t.getElementById(e)||t.getElementsByName(e)[0];if(n)return n;if("function"==typeof t.createTreeWalker&&t.body&&"function"==typeof t.body.attachShadow){const r=t.createTreeWalker(t.body,NodeFilter.SHOW_ELEMENT);let o=r.currentNode;for(;o;){const i=o.shadowRoot;if(i){const s=i.getElementById(e)||i.querySelector(`[name="${e}"]`);if(s)return s}o=r.nextNode()}}return null}(this.document,e);r&&(this.scrollToElement(r,n),r.focus())}setHistoryScrollRestoration(e){try{this.window.history.scrollRestoration=e}catch{console.warn(xt(2400,!1))}}scrollToElement(e,n){const r=e.getBoundingClientRect(),o=r.left+this.window.pageXOffset,i=r.top+this.window.pageYOffset,s=this.offset();this.window.scrollTo({...n,left:o-s[0],top:i-s[1]})}}function Rt(t){return e=>{if(function a1(t){return be(t?.lift)}(e))return e.lift(function(n){try{return t(n,this)}catch(r){this.error(r)}});throw new TypeError("Unable to lift unknown Observable type")}}function vt(t,e,n,r,o){return new c1(t,e,n,r,o)}class c1 extends Jp{constructor(e,n,r,o,i,s){super(e),this.onFinalize=i,this.shouldUnsubscribe=s,this._next=n?function(a){try{n(a)}catch(c){e.error(c)}}:super._next,this._error=o?function(a){try{o(a)}catch(c){e.error(c)}finally{this.unsubscribe()}}:super._error,this._complete=r?function(){try{r()}catch(a){e.error(a)}finally{this.unsubscribe()}}:super._complete}unsubscribe(){var e;if(!this.shouldUnsubscribe||this.shouldUnsubscribe()){const{closed:n}=this;super.unsubscribe(),!n&&(null===(e=this.onFinalize)||void 0===e||e.call(this))}}}function Be(t,e){return Rt((n,r)=>{let o=0;n.subscribe(vt(r,i=>{r.next(t.call(e,i,o++))}))})}function pr(t){return{toString:t}.toString()}function qT(t,e,n,r){null!==e?e.applyValueToInputSignal(e,r):t[n]=r}class E1{previousValue;currentValue;firstChange;constructor(e,n,r){this.previousValue=e,this.currentValue=n,this.firstChange=r}isFirstChange(){return this.firstChange}}const Dn=(()=>{const t=()=>KT;return t.ngInherit=!0,t})();function KT(t){return t.type.prototype.ngOnChanges&&(t.setInput=T1),I1}function I1(){const t=YT(this),e=t?.current;if(e){const n=t.previous;if(n===Bn)t.previous=e;else for(let r in e)n[r]=e[r];t.current=null,this.ngOnChanges(e)}}function T1(t,e,n,r,o){const i=this.declaredInputs[r],s=YT(t)||function w1(t,e){return t[WT]=e}(t,{previous:Bn,current:null}),a=s.current||(s.current={}),c=s.previous,u=c[i];a[i]=new E1(u&&u.currentValue,n,c===Bn),qT(t,e,o,n)}const WT="__ngSimpleChanges__";function YT(t){return t[WT]||null}const No=[],ue=function(t,e=null,n){for(let r=0;r<No.length;r++)(0,No[r])(t,e,n)};var R=function(t){return t[t.TemplateCreateStart=0]="TemplateCreateStart",t[t.TemplateCreateEnd=1]="TemplateCreateEnd",t[t.TemplateUpdateStart=2]="TemplateUpdateStart",t[t.TemplateUpdateEnd=3]="TemplateUpdateEnd",t[t.LifecycleHookStart=4]="LifecycleHookStart",t[t.LifecycleHookEnd=5]="LifecycleHookEnd",t[t.OutputStart=6]="OutputStart",t[t.OutputEnd=7]="OutputEnd",t[t.BootstrapApplicationStart=8]="BootstrapApplicationStart",t[t.BootstrapApplicationEnd=9]="BootstrapApplicationEnd",t[t.BootstrapComponentStart=10]="BootstrapComponentStart",t[t.BootstrapComponentEnd=11]="BootstrapComponentEnd",t[t.ChangeDetectionStart=12]="ChangeDetectionStart",t[t.ChangeDetectionEnd=13]="ChangeDetectionEnd",t[t.ChangeDetectionSyncStart=14]="ChangeDetectionSyncStart",t[t.ChangeDetectionSyncEnd=15]="ChangeDetectionSyncEnd",t[t.AfterRenderHooksStart=16]="AfterRenderHooksStart",t[t.AfterRenderHooksEnd=17]="AfterRenderHooksEnd",t[t.ComponentStart=18]="ComponentStart",t[t.ComponentEnd=19]="ComponentEnd",t[t.DeferBlockStateStart=20]="DeferBlockStateStart",t[t.DeferBlockStateEnd=21]="DeferBlockStateEnd",t[t.DynamicComponentStart=22]="DynamicComponentStart",t[t.DynamicComponentEnd=23]="DynamicComponentEnd",t[t.HostBindingsUpdateStart=24]="HostBindingsUpdateStart",t[t.HostBindingsUpdateEnd=25]="HostBindingsUpdateEnd",t}(R||{});function QT(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const i=t.data[n].type.prototype,{ngAfterContentInit:s,ngAfterContentChecked:a,ngAfterViewInit:c,ngAfterViewChecked:u,ngOnDestroy:l}=i;s&&(t.contentHooks??=[]).push(-n,s),a&&((t.contentHooks??=[]).push(n,a),(t.contentCheckHooks??=[]).push(n,a)),c&&(t.viewHooks??=[]).push(-n,c),u&&((t.viewHooks??=[]).push(n,u),(t.viewCheckHooks??=[]).push(n,u)),null!=l&&(t.destroyHooks??=[]).push(n,l)}}function _l(t,e,n){JT(t,e,3,n)}function vl(t,e,n,r){(3&t[2])===n&&JT(t,e,n,r)}function Xg(t,e){let n=t[2];(3&n)===e&&(n&=16383,n+=1,t[2]=n)}function JT(t,e,n,r){const i=r??-1,s=e.length-1;let a=0;for(let c=void 0!==r?65535&t[17]:0;c<s;c++)if("number"==typeof e[c+1]){if(a=e[c],null!=r&&a>=r)break}else e[c]<0&&(t[17]+=65536),(a<i||-1==i)&&(k1(t,n,e,c),t[17]=(4294901760&t[17])+c+2),c++}function ZT(t,e){ue(R.LifecycleHookStart,t,e);const n=B(null);try{e.call(t)}finally{B(n),ue(R.LifecycleHookEnd,t,e)}}function k1(t,e,n,r){const o=n[r]<0,i=n[r+1],a=t[o?-n[r]:n[r]];o?t[2]>>14<t[17]>>16&&(3&t[2])===e&&(t[2]+=16384,ZT(a,i)):ZT(a,i)}class Da{factory;name;injectImpl;resolving=!1;canSeeViewProviders;multi;componentProviders;index;providerFactory;constructor(e,n,r,o){this.factory=e,this.name=o,this.canSeeViewProviders=n,this.injectImpl=r}}function tm(t){return 3===t||4===t||6===t}function ew(t){return 64===t.charCodeAt(0)}function ji(t,e){if(null!==e&&0!==e.length)if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const o=e[r];"number"==typeof o?n=o:0===n||tw(t,n,o,0,-1===n||2===n?e[++r]:null)}}return t}function tw(t,e,n,r,o){let i=0,s=t.length;if(-1===e)s=-1;else for(;i<t.length;){const a=t[i++];if("number"==typeof a){if(a===e){s=-1;break}if(a>e){s=i-1;break}}}for(;i<t.length;){const a=t[i];if("number"==typeof a)break;if(a===n)return void(null!==o&&(t[i+1]=o));i++,null!==o&&i++}-1!==s&&(t.splice(s,0,e),i=s+1),t.splice(i++,0,n),null!==o&&t.splice(i++,0,o)}function nm(t){return-1!==t}function Sa(t){return 32767&t}function Aa(t,e){let n=function O1(t){return t>>16}(t),r=e;for(;n>0;)r=r[14],n--;return r}let rm=!0;function Cl(t){const e=rm;return rm=t,e}let P1=0;const Gn={};function El(t,e){const n=ow(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,om(r.data,t),om(e,null),om(r.blueprint,null));const o=Il(t,e),i=t.injectorIndex;if(nm(o)){const s=Sa(o),a=Aa(o,e),c=a[1].data;for(let u=0;u<8;u++)e[i+u]=a[s+u]|c[s+u]}return e[i+8]=o,i}function om(t,e){t.push(0,0,0,0,0,0,0,0,e)}function ow(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function Il(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,o=e;for(;null!==o;){if(r=dw(o),null===r)return-1;if(n++,o=o[14],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return-1}function im(t,e,n){!function x1(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(la)&&(r=n[la]),null==r&&(r=n[la]=P1++);const o=255&r;e.data[t+(o>>5)]|=1<<o}(t,e,n)}function iw(t,e,n){if(8&n||void 0!==t)return t;fg()}function sw(t,e,n,r){if(8&n&&void 0===r&&(r=null),!(3&n)){const o=t[9],i=Ft(void 0);try{return o?o.get(e,r,8&n):bI(e,r,8&n)}finally{Ft(i)}}return iw(r,0,n)}function aw(t,e,n,r=0,o){if(null!==t){if(2048&e[2]&&!(2&r)){const s=function B1(t,e,n,r,o){let i=t,s=e;for(;null!==i&&null!==s&&2048&s[2]&&!Lr(s);){const a=cw(i,s,n,2|r,Gn);if(a!==Gn)return a;let c=i.parent;if(!c){const u=s[20];if(u){const l=u.get(n,Gn,r);if(l!==Gn)return l}c=dw(s),s=s[14]}i=c}return o}(t,e,n,r,Gn);if(s!==Gn)return s}const i=cw(t,e,n,r,Gn);if(i!==Gn)return i}return sw(e,n,r,o)}function cw(t,e,n,r,o){const i=function U1(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(la)?t[la]:void 0;return"number"==typeof e?e>=0?255&e:H1:e}(n);if("function"==typeof i){if(!fT(e,t,r))return 1&r?iw(o,0,r):sw(e,n,r,o);try{let s;if(s=i(r),null!=s||8&r)return s;fg()}finally{mT()}}else if("number"==typeof i){let s=null,a=ow(t,e),c=-1,u=1&r?e[15][5]:null;for((-1===a||4&r)&&(c=-1===a?Il(t,e):e[a+8],-1!==c&&lw(r,!1)?(s=e[1],a=Sa(c),e=Aa(c,e)):a=-1);-1!==a;){const l=e[1];if(uw(i,a,l.data)){const d=L1(a,e,n,s,r,u);if(d!==Gn)return d}c=e[a+8],-1!==c&&lw(r,e[1].data[a+8]===u)&&uw(i,a,e)?(s=l,a=Sa(c),e=Aa(c,e)):a=-1}}return o}function L1(t,e,n,r,o,i){const s=e[1],a=s.data[t+8],l=function Tl(t,e,n,r,o){const i=t.providerIndexes,s=e.data,a=1048575&i,c=t.directiveStart,l=i>>20,f=o?a+l:t.directiveEnd;for(let h=r?a:a+l;h<f;h++){const p=s[h];if(h<c&&n===p||h>=c&&p.type===n)return h}if(o){const h=s[c];if(h&&En(h)&&h.type===n)return c}return null}(a,s,n,null==r?Vn(a)&&rm:r!=s&&!!(3&a.type),1&o&&i===a);return null!==l?ba(e,s,l,a,o):Gn}function ba(t,e,n,r,o){let i=t[n];const s=e.data;if(i instanceof Da){const a=i;if(a.resolving)throw dg();const c=Cl(a.canSeeViewProviders);a.resolving=!0;const d=a.injectImpl?Ft(a.injectImpl):null;fT(t,r,0);try{i=t[n]=a.factory(void 0,o,s,t,r),e.firstCreatePass&&n>=r.directiveStart&&function b1(t,e,n){const{ngOnChanges:r,ngOnInit:o,ngDoCheck:i}=e.type.prototype;if(r){const s=KT(e);(n.preOrderHooks??=[]).push(t,s),(n.preOrderCheckHooks??=[]).push(t,s)}o&&(n.preOrderHooks??=[]).push(0-t,o),i&&((n.preOrderHooks??=[]).push(t,i),(n.preOrderCheckHooks??=[]).push(t,i))}(n,s[n],e)}finally{null!==d&&Ft(d),Cl(c),a.resolving=!1,mT()}}return i}function uw(t,e,n){return!!(n[e+(t>>5)]&1<<t)}function lw(t,e){return!(2&t||1&t&&e)}class Ve{_tNode;_lView;constructor(e,n){this._tNode=e,this._lView=n}get(e,n,r){return aw(this._tNode,this._lView,e,fa(r),n)}}function H1(){return new Ve(Y(),w())}function Qe(t){return pr(()=>{const e=t.prototype.constructor,n=e[Io]||sm(e),r=Object.prototype;let o=Object.getPrototypeOf(t.prototype).constructor;for(;o&&o!==r;){const i=o[Io]||sm(o);if(i&&i!==n)return i;o=Object.getPrototypeOf(o)}return i=>new i})}function sm(t){return Vu(t)?()=>{const e=sm(X(t));return e&&e()}:wo(t)}function dw(t){const e=t[1],n=e.type;return 2===n?e.declTNode:1===n?t[5]:null}function ka(t){return function F1(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const r=n.length;let o=0;for(;o<r;){const i=n[o];if(tm(i))break;if(0===i)o+=2;else if("number"==typeof i)for(o++;o<r&&"string"==typeof n[o];)o++;else{if(i===e)return n[o+1];o+=2}}}return null}(Y(),t)}function W1(){return $i(Y(),w())}function $i(t,e){return new Qt(ke(t,e))}let Qt=(()=>class t{nativeElement;constructor(n){this.nativeElement=n}static __NG_ELEMENT_ID__=W1})();function Ra(t){return!(128&~t.flags)}Symbol;var Dl=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}(Dl||{});const Sl=new Map;let X1=0;function um(t){Sl.delete(t[19])}const dm="__ngContext__";function Ht(t,e){Pe(e)?(t[dm]=e[19],function tU(t){Sl.set(t[19],t)}(e)):t[dm]=e}function Aw(t){return kw(t[12])}function bw(t){return kw(t[4])}function kw(t){for(;null!==t&&!St(t);)t=t[4];return t}let fm;const Gi=new S("",{factory:()=>IU}),IU="ng",Fw=new S(""),Lw=new S("",{providedIn:"platform",factory:()=>"unknown"}),Uw=new S("",{factory:()=>E(kt).body?.querySelector("[ngCspNonce]")?.getAttribute("ngCspNonce")||null}),kU=new S("",{factory:()=>!1}),OU=new S("");function Nl(t){return!(32&~t.flags)}function fD(t,e){const n=t.contentQueries;if(null!==n){const r=B(null);try{for(let o=0;o<n.length;o+=2){const s=n[o+1];if(-1!==s){const a=t.data[s];al(n[o]),a.contentQueries(2,e[s],s)}}}finally{B(r)}}}function Am(t,e,n){al(0);const r=B(null);try{e(t,n)}finally{B(r)}}function bm(t,e,n){if(jI(e)){const r=B(null);try{const i=e.directiveEnd;for(let s=e.directiveStart;s<i;s++){const a=t.data[s];a.contentQueries&&a.contentQueries(1,n[s],s)}}finally{B(r)}}}var ln=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t[t.ExperimentalIsolatedShadowDom=4]="ExperimentalIsolatedShadowDom",t}(ln||{});let Bl;function vD(t){return function Mm(){if(void 0===Bl&&(Bl=null,Ue.trustedTypes))try{Bl=Ue.trustedTypes.createPolicy("angular#unsafe-bypass",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch{}return Bl}()?.createScriptURL(t)||t}class CD{changingThisBreaksApplicationSecurity;constructor(e){this.changingThisBreaksApplicationSecurity=e}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see ${EI})`}}function $r(t){return t instanceof CD?t.changingThisBreaksApplicationSecurity:t}function Fa(t,e){const n=function pH(t){return t instanceof CD&&t.getTypeName()||null}(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see ${EI})`)}return n===e}const _H=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:\/?#]*(?:[\/?#]|$))/i;function jl(t,e,n){return t.createElement(e,n)}function Po(t,e,n,r,o){t.insertBefore(e,n,r,o)}function MD(t,e,n){t.appendChild(e,n)}function ND(t,e,n,r,o){null!==r?Po(t,e,n,r,o):MD(t,e,n)}function PD(t,e,n){const{mergedAttrs:r,classes:o,styles:i}=n;null!==r&&function N1(t,e,n){let r=0;for(;r<n.length;){const o=n[r];if("number"==typeof o){if(0!==o)break;r++;const i=n[r++],s=n[r++],a=n[r++];t.setAttribute(e,s,a,i)}else{const i=o,s=n[++r];ew(i)?t.setProperty(e,i,s):t.setAttribute(e,i,s),r++}}}(t,e,r),null!==o&&function NH(t,e,n){""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n)}(t,e,o),null!==i&&function MH(t,e,n){t.setAttribute(e,"style",n)}(t,e,i)}var Ki=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}(Ki||{});function xD(t){const e=Ha();return e?e.sanitize(Ki.URL,t)||"":Fa(t,"URL")?$r(t):function Nm(t){return(t=String(t)).match(_H)?t:"unsafe:"+t}(Q(t))}function FD(t){const e=Ha();if(e)return vD(e.sanitize(Ki.RESOURCE_URL,t)||"");if(Fa(t,"ResourceURL"))return vD($r(t));throw new I(904,!1)}const HH=new Set(["embed","frame","iframe","media","script"]),BH=new Set(["base","link","script"]);function LD(t,e,n){return function VH(t,e){return"src"===e&&HH.has(t)||"href"===e&&BH.has(t)||"xlink:href"===e&&"script"===t?FD:xD}(e,n)(t)}function Ha(){const t=w();return t&&t[10].sanitizer}function zn(t){return t instanceof Function?t():t}function ZH(t,e,n){let r=t.length;for(;;){const o=t.indexOf(e,n);if(-1===o)return o;if(0===o||t.charCodeAt(o-1)<=32){const i=e.length;if(o+i===r||t.charCodeAt(o+i)<=32)return o}n=o+1}}const jD="ng-template";function XH(t,e,n,r){let o=0;if(r){for(;o<e.length&&"string"==typeof e[o];o+=2)if("class"===e[o]&&-1!==ZH(e[o+1].toLowerCase(),n,0))return!0}else if(Um(t))return!1;if(o=e.indexOf(1,o),o>-1){let i;for(;++o<e.length&&"string"==typeof(i=e[o]);)if(i.toLowerCase()===n)return!0}return!1}function Um(t){return 4===t.type&&t.value!==jD}function eB(t,e,n){return e===(4!==t.type||n?t.value:jD)}function tB(t,e,n){let r=4;const o=t.attrs,i=null!==o?function oB(t){for(let e=0;e<t.length;e++)if(tm(t[e]))return e;return t.length}(o):0;let s=!1;for(let a=0;a<e.length;a++){const c=e[a];if("number"!=typeof c){if(!s)if(4&r){if(r=2|1&r,""!==c&&!eB(t,c,n)||""===c&&1===e.length){if(Sn(r))return!1;s=!0}}else if(8&r){if(null===o||!XH(t,o,c,n)){if(Sn(r))return!1;s=!0}}else{const u=e[++a],l=nB(c,o,Um(t),n);if(-1===l){if(Sn(r))return!1;s=!0;continue}if(""!==u){let d;if(d=l>i?"":o[l+1].toLowerCase(),2&r&&u!==d){if(Sn(r))return!1;s=!0}}}}else{if(!s&&!Sn(r)&&!Sn(c))return!1;if(s&&Sn(c))continue;s=!1,r=c|1&r}}return Sn(r)||s}function Sn(t){return!(1&t)}function nB(t,e,n,r){if(null===e)return-1;let o=0;if(r||!n){let i=!1;for(;o<e.length;){const s=e[o];if(s===t)return o;if(3===s||6===s)i=!0;else{if(1===s||2===s){let a=e[++o];for(;"string"==typeof a;)a=e[++o];continue}if(4===s)break;if(0===s){o+=4;continue}}o+=i?1:2}return-1}return function iB(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function $D(t,e,n=!1){for(let r=0;r<e.length;r++)if(tB(t,e[r],n))return!0;return!1}function GD(t,e){return t?":not("+e.trim()+")":e}function aB(t){let e=t[0],n=1,r=2,o="",i=!1;for(;n<t.length;){let s=t[n];if("string"==typeof s)if(2&r){const a=t[++n];o+="["+s+(a.length>0?'="'+a+'"':"")+"]"}else 8&r?o+="."+s:4&r&&(o+=" "+s);else""!==o&&!Sn(s)&&(e+=GD(i,o),o=""),r=s,i=i||!Sn(r);n++}return""!==o&&(e+=GD(i,o)),e}const he={};function Hm(t,e,n,r,o,i,s,a,c,u,l){const d=U+r,f=d+o,h=function lB(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:he);return n}(d,f),p="function"==typeof u?u():u;return h[1]={type:t,blueprint:h,template:n,queries:null,viewQuery:a,declTNode:e,data:h.slice().fill(null,d),bindingStartIndex:d,expandoStartIndex:f,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof i?i():i,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:c,consts:p,incompleteFirstPass:!1,ssrId:l}}function Gl(t,e,n,r,o,i,s,a,c,u,l){const d=e.blueprint.slice();return d[0]=o,d[2]=1228|r,(null!==u||t&&2048&t[2])&&(d[2]|=2048),WI(d),d[3]=d[14]=t,d[8]=n,d[10]=s||t&&t[10],d[V]=a||t&&t[V],d[9]=c||t&&t[9]||null,d[5]=i,d[19]=function eU(){return X1++}(),d[6]=l,d[20]=u,d[15]=2==e.type?t[15]:d,d}function Bm(t){let e=16;return t.signals?e=4096:t.onPush&&(e=64),e}function Ba(t,e,n,r){if(0===n)return-1;const o=e.length;for(let i=0;i<n;i++)e.push(r),t.blueprint.push(r),t.data.push(null);return o}function Vm(t,e){return t[12]?t[13][4]=e:t[12]=e,t[13]=e,e}function Mt(t=1){qD(G(),w(),dt()+t,!1)}function qD(t,e,n,r){if(!r)if(3&~e[2]){const i=t.preOrderHooks;null!==i&&vl(e,i,0,n)}else{const i=t.preOrderCheckHooks;null!==i&&_l(e,i,n)}Mo(n)}var zl=function(t){return t[t.None=0]="None",t[t.SignalBased=1]="SignalBased",t[t.HasDecoratorInputTransform=2]="HasDecoratorInputTransform",t}(zl||{});function xo(t,e,n,r){const o=B(null);try{const[i,s,a]=t.inputs[n];let c=null;0!==(s&zl.SignalBased)&&(c=e[i][tt]),null!==c&&void 0!==c.transformFn?r=c.transformFn(r):null!==a&&(r=a.call(e,r)),null!==t.setInput?t.setInput(e,c,r,n,i):qT(e,c,i,r)}finally{B(o)}}var Gr=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}(Gr||{});function $m(t,e){return undefined(t,e)}const Fo=new Set;var Gm=function(t){return t[t.CHANGE_DETECTION=0]="CHANGE_DETECTION",t[t.AFTER_NEXT_RENDER=1]="AFTER_NEXT_RENDER",t}(Gm||{});const Qi=new S(""),QD=new Set;function ft(t){QD.has(t)||(QD.add(t),performance?.mark?.("mark_feature_usage",{detail:{feature:t}}))}let JD=(()=>{class t{impl=null;execute(){this.impl?.execute()}static \u0275prov=M({token:t,providedIn:"root",factory:()=>new t})}return t})();const ZD=[0,1,2,3];let yB=(()=>{class t{ngZone=E(Ie);scheduler=E(Fi);errorHandler=E(Ca,{optional:!0});sequences=new Set;deferredRegistrations=new Set;executing=!1;constructor(){E(Qi,{optional:!0})}execute(){const n=this.sequences.size>0;n&&ue(R.AfterRenderHooksStart),this.executing=!0;for(const r of ZD)for(const o of this.sequences)if(!o.erroredOrDestroyed&&o.hooks[r])try{o.pipelinedValue=this.ngZone.runOutsideAngular(()=>this.maybeTrace(()=>(0,o.hooks[r])(o.pipelinedValue),o.snapshot))}catch(i){o.erroredOrDestroyed=!0,this.errorHandler?.handleError(i)}this.executing=!1;for(const r of this.sequences)r.afterRun(),r.once&&(this.sequences.delete(r),r.destroy());for(const r of this.deferredRegistrations)this.sequences.add(r);this.deferredRegistrations.size>0&&this.scheduler.notify(7),this.deferredRegistrations.clear(),n&&ue(R.AfterRenderHooksEnd)}register(n){const{view:r}=n;void 0!==r?((r[25]??=[]).push(n),Pi(r),r[2]|=8192):this.executing?this.deferredRegistrations.add(n):this.addSequence(n)}addSequence(n){this.sequences.add(n),this.scheduler.notify(7)}unregister(n){this.executing&&this.sequences.has(n)?(n.erroredOrDestroyed=!0,n.pipelinedValue=void 0,n.once=!0):(this.sequences.delete(n),this.deferredRegistrations.delete(n))}maybeTrace(n,r){return r?r.run(Gm.AFTER_NEXT_RENDER,n):n()}static \u0275prov=M({token:t,providedIn:"root",factory:()=>new t})}return t})();class XD{impl;hooks;view;once;snapshot;erroredOrDestroyed=!1;pipelinedValue=void 0;unregisterOnDestroy;constructor(e,n,r,o,i,s=null){this.impl=e,this.hooks=n,this.view=r,this.once=o,this.snapshot=s,this.unregisterOnDestroy=i?.onDestroy(()=>this.destroy())}afterRun(){this.erroredOrDestroyed=!1,this.pipelinedValue=void 0,this.snapshot?.dispose(),this.snapshot=null}destroy(){this.impl.unregister(this),this.unregisterOnDestroy?.();const e=this.view?.[25];e&&(this.view[25]=e.filter(n=>n!==this))}}function Kl(t,e){const n=e?.injector??E(Lt);return ft("NgAfterNextRender"),function eS(t,e,n,r){const o=e.get(JD);o.impl??=e.get(yB);const i=e.get(Qi,null,{optional:!0}),s=!0!==n?.manualCleanup?e.get(Tn):null,a=e.get(zg,null,{optional:!0}),c=new XD(o.impl,function vB(t){return t instanceof Function?[void 0,void 0,t,void 0]:[t.earlyRead,t.write,t.mixedReadWrite,t.read]}(t),a?.view,r,s,i?.snapshot(null));return o.impl.register(c),c}(t,n,e,!0)}const Wl=new S("",{factory:()=>({queue:new Set,isScheduled:!1,scheduler:null,injector:E(ot)})});function tS(t,e,n){const r=t.get(Wl);if(Array.isArray(e))for(const o of e)r.queue.add(o),n?.detachedLeaveAnimationFns?.push(o);else r.queue.add(e),n?.detachedLeaveAnimationFns?.push(e);r.scheduler&&r.scheduler(t)}function nS(t,e,n,r){const o=t?.[26]?.enter;null!==e&&o&&o.has(n.index)&&function zm(t,e){for(const[n,r]of e)tS(t,r.animateFns)}(r,o)}function Ji(t,e,n,r,o,i,s,a){if(null!=o){let c,u=!1;St(o)?c=o:Pe(o)&&(u=!0,o=o[0]);const l=st(o);0===t&&null!==r?(nS(a,r,i,n),null==s?MD(e,r,l):Po(e,r,l,s||null,!0)):1===t&&null!==r?(nS(a,r,i,n),Po(e,r,l,s||null,!0)):2===t?iS(a,i,n,d=>{!function Ua(t,e,n,r){t.removeChild(null,e,n,r)}(e,l,u,d)}):3===t&&iS(a,i,n,()=>{e.destroyNode(l)}),null!=c&&function bB(t,e,n,r,o,i,s){const a=r[7];a!==st(r)&&Ji(e,t,n,i,a,o,s);for(let u=10;u<r.length;u++){const l=r[u];Jl(l[1],l,t,e,i,a)}}(e,t,n,c,i,r,s)}}function oS(t,e){e[10].changeDetectionScheduler?.notify(9),Jl(t,e,e[V],2,null,null)}function qm(t,e){const n=t[9],r=n.indexOf(e);n.splice(r,1)}function Va(t,e){if(lr(e))return;const n=e[V];n.destroyNode&&Jl(t,e,n,3,null,null),function TB(t){let e=t[12];if(!e)return Km(t[1],t);for(;e;){let n=null;if(Pe(e))n=e[12];else{const r=e[10];r&&(n=r)}if(!n){for(;e&&!e[4]&&e!==t;)Pe(e)&&Km(e[1],e),e=e[3];null===e&&(e=t),Pe(e)&&Km(e[1],e),n=e&&e[4]}e=n}}(e)}function Km(t,e){if(lr(e))return;const n=B(null);try{e[2]&=-129,e[2]|=256,e[24]&&ua(e[24]),function SB(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const o=e[n[r]];if(!(o instanceof Da)){const i=n[r+1];if(Array.isArray(i))for(let s=0;s<i.length;s+=2){const a=o[i[s]],c=i[s+1];ue(R.LifecycleHookStart,a,c);try{c.call(a)}finally{ue(R.LifecycleHookEnd,a,c)}}else{ue(R.LifecycleHookStart,o,i);try{i.call(o)}finally{ue(R.LifecycleHookEnd,o,i)}}}}}(t,e),function DB(t,e){const n=t.cleanup,r=e[7];if(null!==n)for(let s=0;s<n.length-1;s+=2)if("string"==typeof n[s]){const a=n[s+3];a>=0?r[a]():r[-a].unsubscribe(),s+=2}else n[s].call(r[n[s+1]]);null!==r&&(e[7]=null);const o=e[21];if(null!==o){e[21]=null;for(let s=0;s<o.length;s++)(0,o[s])()}const i=e[23];if(null!==i){e[23]=null;for(const s of i)s.destroy()}}(t,e),1===e[1].type&&e[V].destroy();const r=e[16];if(null!==r&&St(e[3])){r!==e[3]&&qm(r,e);const o=e[18];null!==o&&o.detachView(t)}um(e)}finally{B(n)}}function iS(t,e,n,r){const o=t?.[26];if(null==o||null==o.leave||!o.leave.has(e.index))return r(!1);t&&Fo.add(t[19]),tS(n,()=>{if(o.leave&&o.leave.has(e.index)){const s=o.leave.get(e.index),a=[];if(s){for(let c=0;c<s.animateFns.length;c++){const u=s.animateFns[c],{promise:l}=u();a.push(l)}o.detachedLeaveAnimationFns=void 0}o.running=Promise.allSettled(a),function wB(t,e){const n=t[26]?.running;n?n.then(()=>{t[26].running=void 0,Fo.delete(t[19]),e(!0)}):e(!1)}(t,r)}else t&&Fo.delete(t[19]),r(!1)},o)}function Wm(t,e,n){return function sS(t,e,n){let r=e;for(;null!==r&&168&r.type;)r=(e=r).parent;if(null===r)return n[0];if(Vn(r)){const{encapsulation:o}=t.data[r.directiveStart+r.componentOffset];if(o===ln.None||o===ln.Emulated)return null}return ke(r,n)}(t,e.parent,n)}let uS=function cS(t,e,n){return 40&t.type?ke(t,n):null};function Qm(t,e,n,r){const o=Wm(t,r,e),i=e[V],a=function aS(t,e,n){return uS(t,e,n)}(r.parent||e[5],r,e);if(null!=o)if(Array.isArray(n))for(let c=0;c<n.length;c++)ND(i,o,n[c],a,!1);else ND(i,o,n,a,!1)}function Lo(t,e){if(null!==e){const n=e.type;if(3&n)return ke(e,t);if(4&n)return Ql(-1,t[e.index]);if(8&n){const r=e.child;if(null!==r)return Lo(t,r);{const o=t[e.index];return St(o)?Ql(-1,o):st(o)}}if(128&n)return Lo(t,e.next);if(32&n)return $m(e,t)()||st(t[e.index]);{const r=dS(t,e);return null!==r?Array.isArray(r)?r[0]:Lo(dr(t[15]),r):Lo(t,e.next)}}return null}function dS(t,e){return null!==e?t[15][5].projection[e.projection]:null}function Ql(t,e){const n=10+t+1;if(n<e.length){const r=e[n],o=r[1].firstChild;if(null!==o)return Lo(r,o)}return e[7]}function Jm(t,e,n,r,o,i,s){for(;null!=n;){const a=r[9];if(128===n.type){n=n.next;continue}const c=r[n.index],u=n.type;if(s&&0===e&&(c&&Ht(st(c),r),n.flags|=2),!Nl(n))if(8&u)Jm(t,e,n.child,r,o,i,!1),Ji(e,t,a,o,c,n,i,r);else if(32&u){const l=$m(n,r);let d;for(;d=l();)Ji(e,t,a,o,d,n,i,r);Ji(e,t,a,o,c,n,i,r)}else 16&u?fS(t,e,r,n,o,i):Ji(e,t,a,o,c,n,i,r);n=s?n.projectionNext:n.next}}function Jl(t,e,n,r,o,i){Jm(n,r,t.firstChild,e,o,i,!1)}function fS(t,e,n,r,o,i){const s=n[15],c=s[5].projection[r.projection];if(Array.isArray(c))for(let u=0;u<c.length;u++)Ji(e,t,n[9],o,c[u],r,i,n);else{let u=c;const l=s[3];Ra(r)&&(u.flags|=128),Jm(t,e,u,l,o,i,!0)}}function hS(t,e,n,r,o){const i=dt(),s=2&r;try{Mo(-1),s&&e.length>U&&qD(t,e,U,!1),ue(s?R.TemplateUpdateStart:R.TemplateCreateStart,o,n),n(r,o)}finally{Mo(i),ue(s?R.TemplateUpdateEnd:R.TemplateCreateEnd,o,n)}}function Zl(t,e,n){(function PB(t,e,n){const r=n.directiveStart,o=n.directiveEnd;Vn(n)&&function dB(t,e,n){const r=ke(e,t),o=function zD(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=Hm(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts,t.id):e}(n),i=t[10].rendererFactory,s=Vm(t,Gl(t,o,null,Bm(n),r,e,null,i.createRenderer(r,n),null,null,null));t[e.index]=s}(e,n,t.data[r+n.componentOffset]),t.firstCreatePass||El(n,e);const i=n.initialInputs;for(let s=r;s<o;s++){const a=t.data[s],c=ba(e,t,s,n);Ht(c,e),null!==i&&UB(0,s-r,c,a,0,i),En(a)&&(At(n.index,e)[8]=ba(e,t,s,n))}})(t,e,n),!(64&~n.flags)&&function xB(t,e,n){const r=n.directiveStart,o=n.directiveEnd,i=n.index,s=function ZF(){return K.lFrame.currentDirectiveIndex}();try{Mo(i);for(let a=r;a<o;a++){const c=t.data[a],u=e[a];Fg(a),(null!==c.hostBindings||0!==c.hostVars||null!==c.hostAttrs)&&FB(c,u)}}finally{Mo(-1),Fg(s)}}(t,e,n)}function Zi(t,e,n=ke){const r=e.localNames;if(null!==r){let o=e.index+1;for(let i=0;i<r.length;i+=2){const s=r[i+1],a=-1===s?n(e,t):t[s];t[o++]=a}}}let pS=()=>null;function Xl(t,e,n,r,o,i){rd(t,e[1],e,n,r)?Vn(t)&&function gS(t,e){const n=At(e,t);16&n[2]||(n[2]|=64)}(e,t.index):(3&t.type&&(n=function OB(t){return"class"===t?"className":"for"===t?"htmlFor":"formaction"===t?"formAction":"innerHtml"===t?"innerHTML":"readonly"===t?"readOnly":"tabindex"===t?"tabIndex":t}(n)),function Zm(t,e,n,r,o,i){if(3&t.type){const s=ke(t,e);r=null!=i?i(r,t.value||"",n):r,o.setProperty(s,n,r)}}(t,e,n,r,o,i))}function FB(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function Xm(t,e){const n=t.directiveRegistry;let r=null;if(n)for(let o=0;o<n.length;o++){const i=n[o];$D(e,i.selectors,!1)&&(r??=[],En(i)?r.unshift(i):r.push(i))}return r}function UB(t,e,n,r,o,i){const s=i[e];if(null!==s)for(let a=0;a<s.length;a+=2)xo(r,n,s[a],s[a+1])}function nd(t){let e=t;return iT()?function sT(){K.lFrame.isParent=!1}():(e=e.parent,fr(e,!1)),e}function rd(t,e,n,r,o){const i=t.inputs?.[r],s=t.hostDirectiveInputs?.[r];let a=!1;if(s)for(let c=0;c<s.length;c+=2){const u=s[c];xo(e.data[u],n[u],s[c+1],o),a=!0}if(i)for(const c of i)xo(e.data[c],n[c],r,o),a=!0;return a}function BB(t,e){const n=At(e,t),r=n[1];!function VB(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n);const o=n[0];null!==o&&null===n[6]&&(n[6]=null),ue(R.ComponentStart);try{od(r,n,n[8])}finally{ue(R.ComponentEnd,n[8])}}function od(t,e,n){Hg(e);try{const r=t.viewQuery;null!==r&&Am(1,r,n);const o=t.template;null!==o&&hS(t,e,o,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),e[18]?.finishViewCreation(t),t.staticContentQueries&&fD(t,e),t.staticViewQueries&&Am(2,t.viewQuery,n);const i=t.components;null!==i&&function jB(t,e){for(let n=0;n<e.length;n++)BB(t,e[n])}(e,i)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0,t.firstCreatePass=!1),r}finally{e[2]&=-5,Bg()}}function Uo(t,e){return!e||null===e.firstChild||Ra(t)}function ja(t,e,n,r,o=!1){for(;null!==n;){if(128===n.type){n=o?n.projectionNext:n.next;continue}const i=e[n.index];null!==i&&r.push(st(i)),St(i)&&$B(i,r);const s=n.type;if(8&s)ja(t,e,n.child,r);else if(32&s){const a=$m(n,e);let c;for(;c=a();)r.push(c)}else if(16&s){const a=dS(e,n);if(Array.isArray(a))r.push(...a);else{const c=dr(e[15]);ja(c[1],c,a,r,!0)}}n=o?n.projectionNext:n.next}return r}function $B(t,e){for(let n=10;n<t.length;n++){const r=t[n],o=r[1].firstChild;null!==o&&ja(r[1],r,o,e)}t[7]!==t[0]&&e.push(t[7])}function _S(t){if(null!==t[25]){for(const e of t[25])e.impl.addSequence(e);t[25].length=0}}let vS=[];const KB={...yi,consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{Pi(t.lView)},consumerOnSignalRead(){this.lView[24]=this}},YB={...yi,consumerIsAlwaysLive:!0,kind:"template",consumerMarkedDirty:t=>{let e=dr(t.lView);for(;e&&!CS(e[1]);)e=dr(e);e&&YI(e)},consumerOnSignalRead(){this.lView[24]=this}};function CS(t){return 2!==t.type}function ES(t){if(null===t[23])return;let e=!0;for(;e;){let n=!1;for(const r of t[23])r.dirty&&(n=!0,null===r.zone||Zone.current===r.zone?r.run():r.zone.run(()=>r.run()));e=n&&!!(8192&t[2])}}function id(t,e=0){const r=t[10].rendererFactory;r.begin?.();try{!function JB(t,e){const n=uT();try{sl(!0),ty(t,e);let r=0;for(;nl(t);){if(100===r)throw new I(103,!1);r++,ty(t,1)}}finally{sl(n)}}(t,e)}finally{r.end?.()}}function IS(t,e,n,r){if(lr(e))return;const o=e[2];Hg(e);let a=!0,c=null,u=null;CS(t)?(u=function GB(t){return t[24]??function zB(t){const e=vS.pop()??Object.create(KB);return e.lView=t,e}(t)}(e),c=_i(u)):null===function Vp(){return lt}()?(a=!1,u=function WB(t){const e=t[24]??Object.create(YB);return e.lView=t,e}(e),c=_i(u)):e[24]&&(ua(e[24]),e[24]=null);try{WI(e),function lT(t){return K.lFrame.bindingIndex=t}(t.bindingStartIndex),null!==n&&hS(t,e,n,2,r);const l=!(3&~o);if(l){const h=t.preOrderCheckHooks;null!==h&&_l(e,h,null)}else{const h=t.preOrderHooks;null!==h&&vl(e,h,0,null),Xg(e,0)}if(function ZB(t){for(let e=Aw(t);null!==e;e=bw(e)){if(!(2&e[2]))continue;const n=e[9];for(let r=0;r<n.length;r++)YI(n[r])}}(e),ES(e),TS(e,0),null!==t.contentQueries&&fD(t,e),l){const h=t.contentCheckHooks;null!==h&&_l(e,h)}else{const h=t.contentHooks;null!==h&&vl(e,h,1),Xg(e,1)}!function eV(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let r=0;r<n.length;r++){const o=n[r];if(o<0)Mo(~o);else{const i=o,s=n[++r],a=n[++r];JF(s,i);const c=e[i];ue(R.HostBindingsUpdateStart,c);try{a(2,c)}finally{ue(R.HostBindingsUpdateEnd,c)}}}}finally{Mo(-1)}}(t,e);const d=t.components;null!==d&&DS(e,d,0);const f=t.viewQuery;if(null!==f&&Am(2,f,r),l){const h=t.viewCheckHooks;null!==h&&_l(e,h)}else{const h=t.viewHooks;null!==h&&vl(e,h,2),Xg(e,2)}if(!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),e[22]){for(const h of e[22])h();e[22]=null}_S(e),e[2]&=-73}catch(l){throw Pi(e),l}finally{null!==u&&(ca(u,c),a&&function qB(t){t.lView[24]!==t&&(t.lView=null,vS.push(t))}(u)),Bg()}}function TS(t,e){for(let n=Aw(t);null!==n;n=bw(n))for(let r=10;r<n.length;r++)wS(n[r],e)}function XB(t,e,n){ue(R.ComponentStart);const r=At(e,t);try{wS(r,n)}finally{ue(R.ComponentEnd,r[8])}}function wS(t,e){Rg(t)&&ty(t,e)}function ty(t,e){const r=t[1],o=t[2],i=t[24];let s=!!(0===e&&16&o);if(s||=!!(64&o&&0===e),s||=!!(1024&o),s||=!(!i?.dirty||!Pu(i)),s||=!1,i&&(i.dirty=!1),t[2]&=-9217,s)IS(r,t,r.template,t[8]);else if(8192&o){const a=B(null);try{ES(t),TS(t,1);const c=r.components;null!==c&&DS(t,c,1),_S(t)}finally{B(a)}}}function DS(t,e,n){for(let r=0;r<e.length;r++)XB(t,e[r],n)}function es(t,e){const n=uT()?64:1088;for(t[10].changeDetectionScheduler?.notify(e);t;){t[2]|=n;const r=dr(t);if(Lr(t)&&!r)return t;t=r}return null}function SS(t,e,n,r){return[t,!0,0,e,null,r,null,n,null,null]}function $a(t,e){if(t.length<=10)return;const n=10+e,r=t[n];if(r){const o=r[16];null!==o&&o!==t&&qm(o,r),e>0&&(t[n-1][4]=r[4]);const i=Ku(t,10+e);!function rS(t,e){oS(t,e),e[0]=null,e[5]=null}(r[1],r);const s=i[18];null!==s&&s.detachView(i[1]),r[3]=null,r[4]=null,r[2]&=-129}return r}function bS(t,e){const n=t[9],r=e[3];(Pe(r)||e[15]!==r[3][15])&&(t[2]|=2),null===n?t[9]=[e]:n.push(e)}class Ga{_lView;_cdRefInjectingView;_appRef=null;_attachedToViewContainer=!1;exhaustive;get rootNodes(){const e=this._lView,n=e[1];return ja(n,e,n.firstChild,[])}constructor(e,n){this._lView=e,this._cdRefInjectingView=n}get context(){return this._lView[8]}set context(e){this._lView[8]=e}get destroyed(){return lr(this._lView)}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const e=this._lView[3];if(St(e)){const n=e[8],r=n?n.indexOf(this):-1;r>-1&&($a(e,r),Ku(n,r))}this._attachedToViewContainer=!1}Va(this._lView[1],this._lView)}onDestroy(e){rl(this._lView,e)}markForCheck(){es(this._cdRefInjectingView||this._lView,4)}detach(){this._lView[2]&=-129}reattach(){Mg(this._lView),this._lView[2]|=128}detectChanges(){this._lView[2]|=1024,id(this._lView)}checkNoChanges(){}attachToViewContainerRef(){if(this._appRef)throw new I(902,!1);this._attachedToViewContainer=!0}detachFromAppRef(){this._appRef=null;const e=Lr(this._lView),n=this._lView[16];null!==n&&!e&&qm(n,this._lView),oS(this._lView[1],this._lView)}attachToAppRef(e){if(this._attachedToViewContainer)throw new I(902,!1);this._appRef=e;const n=Lr(this._lView),r=this._lView[16];null!==r&&!n&&bS(r,this._lView),Mg(this._lView)}}let mr=(()=>class t{_declarationLView;_declarationTContainer;elementRef;static __NG_ELEMENT_ID__=nV;constructor(n,r,o){this._declarationLView=n,this._declarationTContainer=r,this.elementRef=o}get ssrId(){return this._declarationTContainer.tView?.ssrId||null}createEmbeddedView(n,r){return this.createEmbeddedViewImpl(n,r)}createEmbeddedViewImpl(n,r,o){const i=function Xi(t,e,n,r){const o=B(null);try{const i=e.tView,c=Gl(t,i,n,4096&t[2]?4096:16,null,e,null,null,r?.injector??null,r?.embeddedViewInjector??null,r?.dehydratedView??null);c[16]=t[e.index];const l=t[18];return null!==l&&(c[18]=l.createEmbeddedView(i)),od(i,c,n),c}finally{B(o)}}(this._declarationLView,this._declarationTContainer,n,{embeddedViewInjector:r,dehydratedView:o});return new Ga(i)}})();function nV(){return function sd(t,e){return 4&t.type?new mr(e,t,$i(t,e)):null}(Y(),w())}function Ho(t,e,n,r,o){let i=t.data[e];if(null===i)i=function sy(t,e,n,r,o){const i=oT(),s=iT(),c=t.data[e]=function dV(t,e,n,r,o,i){let s=e?e.injectorIndex:-1,a=0;return function tT(){return null!==K.skipHydrationRootTNode}()&&(a|=128),{type:n,index:r,insertBeforeIndex:null,injectorIndex:s,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,componentOffset:-1,fieldIndex:-1,customControlIndex:-1,propertyBindings:null,flags:a,providerIndexes:0,value:o,attrs:i,mergedAttrs:null,localNames:null,initialInputs:null,inputs:null,hostDirectiveInputs:null,outputs:null,hostDirectiveOutputs:null,directiveToIndex:null,tView:null,next:null,prev:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?i:i&&i.parent,n,e,r,o);return function lV(t,e,n,r){null===t.firstChild&&(t.firstChild=e),null!==n&&(r?null==n.child&&null!==e.parent&&(n.child=e):null===n.next&&(n.next=e,e.prev=n))}(t,c,i,s),c}(t,e,n,r,o),function QF(){return K.lFrame.inI18n}()&&(i.flags|=32);else if(64&i.type){i.type=n,i.value=r,i.attrs=o;const s=function _a(){const t=K.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();i.injectorIndex=null===s?-1:s.injectorIndex}return fr(i,!0),i}let KV=class{},XS=class{};class WV{resolveComponentFactory(e){throw new I(917,!1)}}let pd=class{static NULL=new WV};class hy{}let yr=(()=>class t{destroyNode=null;static __NG_ELEMENT_ID__=()=>function YV(){const t=w(),n=At(Y().index,t);return(Pe(n)?n:t)[V]}()})(),QV=(()=>{class t{static \u0275prov=M({token:t,providedIn:"root",factory:()=>null})}return t})();const gy={};class rs{injector;parentInjector;constructor(e,n){this.injector=e,this.parentInjector=n}get(e,n,r){const o=this.injector.get(e,gy,r);return o!==gy||n===gy?o:this.parentInjector.get(e,n,r)}}function md(t,e,n){let r=n?t.styles:null,o=n?t.classes:null,i=0;if(null!==e)for(let s=0;s<e.length;s++){const a=e[s];"number"==typeof a?i=a:1==i?o=ig(o,a):2==i&&(r=ig(r,a+": "+e[++s]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=o:t.classesWithoutHost=o}function A(t,e=0){const n=w();return null===n?F(t,e):aw(Y(),n,X(t),e)}function nA(t,e,n,r,o){const i=null===r?null:{"":-1},s=o(t,n);if(null!==s){let a=s,c=null,u=null;for(const l of s)if(null!==l.resolveHostDirectives){[a,c,u]=l.resolveHostDirectives(s);break}!function nj(t,e,n,r,o,i,s){const a=r.length;let c=null;for(let f=0;f<a;f++){const h=r[f];null===c&&En(h)&&(c=h,tj(t,n,f)),im(El(n,e),t,h.type)}(function cj(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e})(n,t.data.length,a),c?.viewProvidersResolver&&c.viewProvidersResolver(c);for(let f=0;f<a;f++){const h=r[f];h.providersResolver&&h.providersResolver(h)}let u=!1,l=!1,d=Ba(t,e,a,null);a>0&&(n.directiveToIndex=new Map);for(let f=0;f<a;f++){const h=r[f];if(n.mergedAttrs=ji(n.mergedAttrs,h.hostAttrs),oj(t,n,e,d,h),aj(d,h,o),null!==s&&s.has(h)){const[m,_]=s.get(h);n.directiveToIndex.set(h.type,[d,m+n.directiveStart,_+n.directiveStart])}else(null===i||!i.has(h))&&n.directiveToIndex.set(h.type,d);null!==h.contentQueries&&(n.flags|=4),(null!==h.hostBindings||null!==h.hostAttrs||0!==h.hostVars)&&(n.flags|=64);const p=h.type.prototype;!u&&(p.ngOnChanges||p.ngOnInit||p.ngDoCheck)&&((t.preOrderHooks??=[]).push(n.index),u=!0),!l&&(p.ngOnChanges||p.ngDoCheck)&&((t.preOrderCheckHooks??=[]).push(n.index),l=!0),d++}!function rj(t,e,n){for(let r=e.directiveStart;r<e.directiveEnd;r++){const o=t.data[r];if(null!==n&&n.has(o)){const i=n.get(o);oA(0,e,i,r),oA(1,e,i,r),sA(e,r,!0)}else rA(0,e,o,r),rA(1,e,o,r),sA(e,r,!1)}}(t,n,i)}(t,e,n,a,i,c,u)}null!==i&&null!==r&&function ej(t,e,n){const r=t.localNames=[];for(let o=0;o<e.length;o+=2){const i=n[e[o+1]];if(null==i)throw new I(-301,!1);r.push(e[o],i)}}(n,r,i)}function tj(t,e,n){e.componentOffset=n,(t.components??=[]).push(e.index)}function rA(t,e,n,r){const o=0===t?n.inputs:n.outputs;for(const i in o)if(o.hasOwnProperty(i)){let s;s=0===t?e.inputs??={}:e.outputs??={},s[i]??=[],s[i].push(r),iA(e,i)}}function oA(t,e,n,r){const o=0===t?n.inputs:n.outputs;for(const i in o)if(o.hasOwnProperty(i)){const s=o[i];let a;a=0===t?e.hostDirectiveInputs??={}:e.hostDirectiveOutputs??={},a[s]??=[],a[s].push(r,i),iA(e,s)}}function iA(t,e){"class"===e?t.flags|=8:"style"===e&&(t.flags|=16)}function sA(t,e,n){const{attrs:r,inputs:o,hostDirectiveInputs:i}=t;if(null===r||!n&&null===o||n&&null===i||Um(t))return t.initialInputs??=[],void t.initialInputs.push(null);let s=null,a=0;for(;a<r.length;){const c=r[a];if(0!==c)if(5!==c){if("number"==typeof c)break;if(!n&&o.hasOwnProperty(c)){const u=o[c];for(const l of u)if(l===e){s??=[],s.push(c,r[a+1]);break}}else if(n&&i.hasOwnProperty(c)){const u=i[c];for(let l=0;l<u.length;l+=2)if(u[l]===e){s??=[],s.push(u[l+1],r[a+1]);break}}a+=2}else a+=2;else a+=4}t.initialInputs??=[],t.initialInputs.push(s)}function oj(t,e,n,r,o){t.data[r]=o;const i=o.factory||(o.factory=wo(o.type)),s=new Da(i,En(o),A,null);t.blueprint[r]=s,n[r]=s,function ij(t,e,n,r,o){const i=o.hostBindings;if(i){let s=t.hostBindingOpCodes;null===s&&(s=t.hostBindingOpCodes=[]);const a=~e.index;(function sj(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(s)!=a&&s.push(a),s.push(n,r,i)}}(t,e,r,Ba(t,n,o.hostVars,he),o)}function aj(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;En(e)&&(n[""]=t)}}function my(t,e,n,r,o,i,s,a){const c=e[1],u=c.consts,d=Ho(c,t,n,r,yt(u,s));return i&&nA(c,e,d,yt(u,a),o),d.mergedAttrs=ji(d.mergedAttrs,d.attrs),null!==d.attrs&&md(d,d.attrs,!1),null!==d.mergedAttrs&&md(d,d.mergedAttrs,!0),null!==c.queries&&c.queries.elementStart(c,d),d}function yy(t,e){QT(t,e),jI(e)&&t.queries.elementEnd(e)}function yd(t){return!!function _y(t){return null!==t&&("function"==typeof t||"object"==typeof t)}(t)&&(Array.isArray(t)||!(t instanceof Map)&&Symbol.iterator in t)}function Se(t,e,n){return n!==he&&(!Object.is(t[e],n)&&(t[e]=n,!0))}function _r(t,e,n){return function r(o){es(Vn(t)?At(t.index,e):e,5);const s=e[8];let a=uA(e,s,n,o),c=r.__ngNextListenerFn__;for(;c;)a=uA(e,s,c,o)&&a,c=c.__ngNextListenerFn__;return a}}function uA(t,e,n,r){const o=B(null);try{return ue(R.OutputStart,e,n),!1!==n(r)}catch(i){return function ey(t,e){const n=t[9];if(!n)return;let r;try{r=n.get($n,null)}catch{r=null}r?.(e)}(t,i),!1}finally{ue(R.OutputEnd,e,n),B(o)}}function lA(t,e,n,r,o,i,s){const a=e.firstCreatePass?function ZI(t){return t.cleanup??=[]}(e):null,c=function JI(t){return t[7]??=[]}(n),u=c.length;c.push(o,i),a&&a.push(r,t,u,(u+1)*(s?-1:1))}function os(t,e,n,r,o,i){const a=e[1],d=e[n][a.data[n].outputs[r]].subscribe(i);lA(t.index,a,e,o,i,d,!0)}const vr=Symbol("BINDING");class hA extends pd{ngModule;constructor(e){super(),this.ngModule=e}resolveComponentFactory(e){const n=ae(e);return new Cd(n,this.ngModule)}}class Cd extends XS{componentDef;ngModule;selector;componentType;ngContentSelectors;isBoundToModule;cachedInputs=null;cachedOutputs=null;get inputs(){return this.cachedInputs??=function Ej(t){return Object.keys(t).map(e=>{const[n,r,o]=t[e],i={propName:n,templateName:e,isSignal:0!==(r&zl.SignalBased)};return o&&(i.transform=o),i})}(this.componentDef.inputs),this.cachedInputs}get outputs(){return this.cachedOutputs??=function Ij(t){return Object.keys(t).map(e=>({propName:t[e],templateName:e}))}(this.componentDef.outputs),this.cachedOutputs}constructor(e,n){super(),this.componentDef=e,this.ngModule=n,this.componentType=e.type,this.selector=function cB(t){return t.map(aB).join(",")}(e.selectors),this.ngContentSelectors=e.ngContentSelectors??[],this.isBoundToModule=!!n}create(e,n,r,o,i,s){ue(R.DynamicComponentStart);const a=B(null);try{const c=this.componentDef,u=function Aj(t,e,n,r){const o=t?["ng-version","21.1.2"]:function uB(t){const e=[],n=[];let r=1,o=2;for(;r<t.length;){let i=t[r];if("string"==typeof i)2===o?""!==i&&e.push(i,t[++r]):8===o&&n.push(i);else{if(!Sn(o))break;o=i}r++}return n.length&&e.push(1,...n),e}(e.selectors[0]);let i=null,s=null,a=0;if(n)for(const l of n)a+=l[vr].requiredVars,l.create&&(l.targetIdx=0,(i??=[]).push(l)),l.update&&(l.targetIdx=0,(s??=[]).push(l));if(r)for(let l=0;l<r.length;l++){const d=r[l];if("function"!=typeof d)for(const f of d.bindings){a+=f[vr].requiredVars;const h=l+1;f.create&&(f.targetIdx=h,(i??=[]).push(f)),f.update&&(f.targetIdx=h,(s??=[]).push(f))}}const c=[e];if(r)for(const l of r){const f=wt("function"==typeof l?l:l.type);c.push(f)}return Hm(0,null,function bj(t,e){return t||e?n=>{if(1&n&&t)for(const r of t)r.create();if(2&n&&e)for(const r of e)r.update()}:null}(i,s),1,a,c,null,null,null,[o],null)}(r,c,s,i),l=function Tj(t,e,n){let r=e instanceof ot?e:e?.injector;return r&&null!==t.getStandaloneInjector&&(r=t.getStandaloneInjector(r)||r),r?new rs(n,r):n}(c,o||this.ngModule,e),d=function wj(t){const e=t.get(hy,null);if(null===e)throw new I(407,!1);return{rendererFactory:e,sanitizer:t.get(QV,null),changeDetectionScheduler:t.get(Fi,null),ngReflect:!1}}(l),f=d.rendererFactory.createRenderer(null,c),h=r?function RB(t,e,n,r){const i=r.get(kU,!1)||n===ln.ShadowDom||n===ln.ExperimentalIsolatedShadowDom,s=t.selectRootElement(e,i);return function MB(t){pS(t)}(s),s}(f,r,c.encapsulation,l):function Dj(t,e){const n=function Sj(t){return(t.selectors[0][0]||"div").toLowerCase()}(t);return jl(e,n,"svg"===n?"svg":"math"===n?"math":null)}(c,f),p=s?.some(pA)||i?.some(C=>"function"!=typeof C&&C.bindings.some(pA)),m=Gl(null,u,null,512|Bm(c),null,null,d,f,l,null,null);m[U]=h,Hg(m);let _=null;try{const C=my(U,m,2,"#host",()=>u.directiveRegistry,!0,0);PD(f,h,C),Ht(h,m),Zl(u,m,C),bm(u,C,m),yy(u,C),void 0!==n&&function Rj(t,e,n){const r=t.projection=[];for(let o=0;o<e.length;o++){const i=n[o];r.push(null!=i&&i.length?Array.from(i):null)}}(C,this.ngContentSelectors,n),_=At(C.index,m),m[8]=_[8],od(u,m,null)}catch(C){throw null!==_&&um(_),um(m),C}finally{ue(R.DynamicComponentEnd),Bg()}return new kj(this.componentType,m,!!p)}finally{B(a)}}}function pA(t){const e=t[vr].kind;return"input"===e||"twoWay"===e}class kj extends KV{_rootLView;_hasInputBindings;instance;hostView;changeDetectorRef;componentType;location;previousInputValues=null;_tNode;constructor(e,n,r){super(),this._rootLView=n,this._hasInputBindings=r,this._tNode=Oi(n[1],U),this.location=$i(this._tNode,n),this.instance=At(this._tNode.index,n)[8],this.hostView=this.changeDetectorRef=new Ga(n,void 0),this.componentType=e}setInput(e,n){const r=this._tNode;if(this.previousInputValues??=new Map,this.previousInputValues.has(e)&&Object.is(this.previousInputValues.get(e),n))return;const o=this._rootLView;rd(r,o[1],o,e,n),this.previousInputValues.set(e,n),es(At(r.index,o),1)}get injector(){return new Ve(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(e){this.hostView.onDestroy(e)}}let An=(()=>class t{static __NG_ELEMENT_ID__=Mj})();function Mj(){return function yA(t,e){let n;const r=e[t.index];return St(r)?n=r:(n=SS(r,e,null,t),e[t.index]=n,Vm(e,n)),_A(n,e,t,r),new gA(n,t,e)}(Y(),w())}const Nj=An,gA=class extends Nj{_lContainer;_hostTNode;_hostLView;constructor(e,n,r){super(),this._lContainer=e,this._hostTNode=n,this._hostLView=r}get element(){return $i(this._hostTNode,this._hostLView)}get injector(){return new Ve(this._hostTNode,this._hostLView)}get parentInjector(){const e=Il(this._hostTNode,this._hostLView);if(nm(e)){const n=Aa(e,this._hostLView),r=Sa(e);return new Ve(n[1].data[r+8],n)}return new Ve(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(e){const n=mA(this._lContainer);return null!==n&&n[e]||null}get length(){return this._lContainer.length-10}createEmbeddedView(e,n,r){let o,i;"number"==typeof r?o=r:null!=r&&(o=r.index,i=r.injector);const a=e.createEmbeddedViewImpl(n||{},i,null);return this.insertImpl(a,o,Uo(this._hostTNode,null)),a}createComponent(e,n,r,o,i,s,a){const c=e&&!function wa(t){return"function"==typeof t}(e);let u;if(c)u=n;else{const _=n||{};u=_.index,r=_.injector,o=_.projectableNodes,i=_.environmentInjector||_.ngModuleRef,s=_.directives,a=_.bindings}const l=c?e:new Cd(ae(e)),d=r||this.parentInjector;if(!i&&null==l.ngModule){const C=(c?d:this.parentInjector).get(ot,null);C&&(i=C)}ae(l.componentType??{});const m=l.create(d,o,null,i,s,a);return this.insertImpl(m.hostView,u,Uo(this._hostTNode,null)),m}insert(e,n){return this.insertImpl(e,n,!0)}insertImpl(e,n,r){const o=e._lView;if(function zF(t){return St(t[3])}(o)){const a=this.indexOf(e);if(-1!==a)this.detach(a);else{const c=o[3],u=new gA(c,c[5],c[3]);u.detach(u.indexOf(e))}}const i=this._adjustIndex(n),s=this._lContainer;return function ts(t,e,n,r=!0){const o=e[1];if(function tV(t,e,n,r){const o=10+r,i=n.length;r>0&&(n[o-1][4]=e),r<i-10?(e[4]=n[o],RI(n,10+r,e)):(n.push(e),e[4]=null),e[3]=n;const s=e[16];null!==s&&n!==s&&bS(s,e);const a=e[18];null!==a&&a.insertView(t),Mg(e),e[2]|=128}(o,e,t,n),r){const s=Ql(n,t),a=e[V],c=a.parentNode(t[7]);null!==c&&function IB(t,e,n,r,o,i){r[0]=o,r[5]=e,Jl(t,r,n,1,o,i)}(o,t[5],a,e,c,s)}const i=e[6];null!==i&&null!==i.firstChild&&(i.firstChild=null)}(s,o,i,r),e.attachToViewContainerRef(),RI(vy(s),i,e),e}move(e,n){return this.insert(e,n)}indexOf(e){const n=mA(this._lContainer);return null!==n?n.indexOf(e):-1}remove(e){const n=this._adjustIndex(e,-1),r=$a(this._lContainer,n);r&&(Ku(vy(this._lContainer),n),Va(r[1],r))}detach(e){const n=this._adjustIndex(e,-1),r=$a(this._lContainer,n);return r&&null!=Ku(vy(this._lContainer),n)?new Ga(r):null}_adjustIndex(e,n=0){return e??this.length+n}};function mA(t){return t[8]}function vy(t){return t[8]||(t[8]=[])}let _A=function CA(t,e,n,r){if(t[7])return;let o;o=8&n.type?st(r):function Oj(t,e){const n=t[V],r=n.createComment(""),o=ke(e,t),i=n.parentNode(o);return Po(n,i,r,n.nextSibling(o),!1),r}(e,n),t[7]=o};let Go=class{},OA=class{};class Ny extends Go{ngModuleType;_parent;_bootstrapComponents=[];_r3Injector;instance;destroyCbs=[];componentFactoryResolver=new hA(this);constructor(e,n,r,o=!0){super(),this.ngModuleType=e,this._parent=n;const i=Hn(e);this._bootstrapComponents=zn(i.bootstrap),this._r3Injector=vT(e,n,[{provide:Go,useValue:this},{provide:pd,useValue:this.componentFactoryResolver},...r],sn(e),new Set(["environment"])),o&&this.resolveInjectorInitializers()}resolveInjectorInitializers(){this._r3Injector.resolveInjectorInitializers(),this.instance=this._r3Injector.get(this.ngModuleType)}get injector(){return this._r3Injector}destroy(){const e=this._r3Injector;!e.destroyed&&e.destroy(),this.destroyCbs.forEach(n=>n()),this.destroyCbs=null}onDestroy(e){this.destroyCbs.push(e)}}class PA extends OA{moduleType;constructor(e){super(),this.moduleType=e}create(e){return new Ny(this.moduleType,e,[])}}class xA extends Go{injector;componentFactoryResolver=new hA(this);instance=null;constructor(e){super();const n=new So([...e.providers,{provide:Go,useValue:this},{provide:pd,useValue:this.componentFactoryResolver}],e.parent||Tg(),e.debugName,new Set(["environment"]));this.injector=n,e.runEnvironmentInitializers&&n.resolveInjectorInitializers()}destroy(){this.injector.destroy()}onDestroy(e){this.injector.onDestroy(e)}}function Ed(t,e,n=null){return new xA({providers:t,parent:e,debugName:n,runEnvironmentInitializers:!0}).injector}let Yj=(()=>{class t{_injector;cachedInjectors=new Map;constructor(n){this._injector=n}getOrCreateStandaloneInjector(n){if(!n.standalone)return null;if(!this.cachedInjectors.has(n)){const r=_g(0,n.type),o=r.length>0?Ed([r],this._injector,""):null;this.cachedInjectors.set(n,o)}return this.cachedInjectors.get(n)}ngOnDestroy(){try{for(const n of this.cachedInjectors.values())null!==n&&n.destroy()}finally{this.cachedInjectors.clear()}}static \u0275prov=M({token:t,providedIn:"environment",factory:()=>new t(F(ot))})}return t})();function is(t){return pr(()=>{const e=LA(t),n={...e,decls:t.decls,vars:t.vars,template:t.template,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,onPush:t.changeDetection===Dl.OnPush,directiveDefs:null,pipeDefs:null,dependencies:e.standalone&&t.dependencies||null,getStandaloneInjector:e.standalone?o=>o.get(Yj).getOrCreateStandaloneInjector(n):null,getExternalStyles:null,signals:t.signals??!1,data:t.data||{},encapsulation:t.encapsulation||ln.Emulated,styles:t.styles||De,_:null,schemas:t.schemas||null,tView:null,id:""};e.standalone&&ft("NgStandalone"),UA(n);const r=t.dependencies;return n.directiveDefs=Id(r,FA),n.pipeDefs=Id(r,vn),n.id=function Xj(t){let e=0;const r=[t.selectors,t.ngContentSelectors,t.hostVars,t.hostAttrs,"function"==typeof t.consts?"":t.consts,t.vars,t.decls,t.encapsulation,t.standalone,t.signals,t.exportAs,JSON.stringify(t.inputs),JSON.stringify(t.outputs),Object.getOwnPropertyNames(t.type.prototype),!!t.contentQueries,!!t.viewQuery];for(const i of r.join("|"))e=Math.imul(31,e)+i.charCodeAt(0)|0;return e+=2147483648,"c"+e}(n),n})}function FA(t){return ae(t)||wt(t)}function qr(t){return pr(()=>({type:t.type,bootstrap:t.bootstrap||De,declarations:t.declarations||De,imports:t.imports||De,exports:t.exports||De,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null}))}function Qj(t,e){if(null==t)return Bn;const n={};for(const r in t)if(t.hasOwnProperty(r)){const o=t[r];let i,s,a,c;Array.isArray(o)?(a=o[0],i=o[1],s=o[2]??i,c=o[3]||null):(i=o,s=o,a=zl.None,c=null),n[i]=[r,a,c],e[i]=s}return n}function Jj(t){if(null==t)return Bn;const e={};for(const n in t)t.hasOwnProperty(n)&&(e[t[n]]=n);return e}function z(t){return pr(()=>{const e=LA(t);return UA(e),e})}function LA(t){const e={};return{type:t.type,providersResolver:null,viewProvidersResolver:null,factory:null,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputConfig:t.inputs||Bn,exportAs:t.exportAs||null,standalone:t.standalone??!0,signals:!0===t.signals,selectors:t.selectors||De,viewQuery:t.viewQuery||null,features:t.features||null,setInput:null,resolveHostDirectives:null,hostDirectives:null,inputs:Qj(t.inputs,e),outputs:Jj(t.outputs),debugInfo:null}}function UA(t){t.features?.forEach(e=>e(t))}function Id(t,e){return t?()=>{const n="function"==typeof t?t():t,r=[];for(const o of n){const i=e(o);null!==i&&r.push(i)}return r}:null}function le(t){let e=function r$(t){return Object.getPrototypeOf(t.prototype).constructor}(t.type),n=!0;const r=[t];for(;e;){let o;if(En(t))o=e.\u0275cmp||e.\u0275dir;else{if(e.\u0275cmp)throw new I(903,!1);o=e.\u0275dir}if(o){if(n){r.push(o);const s=t;s.inputs=Py(t.inputs),s.declaredInputs=Py(t.declaredInputs),s.outputs=Py(t.outputs);const a=o.hostBindings;a&&c$(t,a);const c=o.viewQuery,u=o.contentQueries;if(c&&s$(t,c),u&&a$(t,u),o$(t,o),sF(t.outputs,o.outputs),En(o)&&o.data.animation){const l=t.data;l.animation=(l.animation||[]).concat(o.data.animation)}}const i=o.features;if(i)for(let s=0;s<i.length;s++){const a=i[s];a&&a.ngInherit&&a(t),a===le&&(n=!1)}}e=Object.getPrototypeOf(e)}!function i$(t){let e=0,n=null;for(let r=t.length-1;r>=0;r--){const o=t[r];o.hostVars=e+=o.hostVars,o.hostAttrs=ji(o.hostAttrs,n=ji(n,o.hostAttrs))}}(r)}function o$(t,e){for(const n in e.inputs){if(!e.inputs.hasOwnProperty(n)||t.inputs.hasOwnProperty(n))continue;const r=e.inputs[n];void 0!==r&&(t.inputs[n]=r,t.declaredInputs[n]=e.declaredInputs[n])}}function Py(t){return t===Bn?{}:t===De?[]:t}function s$(t,e){const n=t.viewQuery;t.viewQuery=n?(r,o)=>{e(r,o),n(r,o)}:e}function a$(t,e){const n=t.contentQueries;t.contentQueries=n?(r,o,i)=>{e(r,o,i),n(r,o,i)}:e}function c$(t,e){const n=t.hostBindings;t.hostBindings=n?(r,o)=>{e(r,o),n(r,o)}:e}function nc(t,e,n,r,o,i,s,a){const c=w(),u=G();return function u$(t,e,n,r,o,i,s,a,c,u,l){const d=n+U;let f;e.firstCreatePass?(f=Ho(e,d,4,s||null,a||null),xg()&&nA(e,t,f,yt(e.consts,u),Xm),QT(e,f)):f=e.data[d],function $A(t,e,n,r,o,i,s,a){if(n.firstCreatePass){t.mergedAttrs=ji(t.mergedAttrs,t.attrs);const l=t.tView=Hm(2,t,o,i,s,n.directiveRegistry,n.pipeRegistry,null,n.schemas,n.consts,null);null!==n.queries&&(n.queries.template(n,t),l.queries=n.queries.embeddedTView(t))}a&&(t.flags|=a),fr(t,!1);const c=zA(n,e,t,r);cl()&&Qm(n,e,c,t),Ht(c,e);const u=SS(c,e,c,t);e[r+U]=u,Vm(e,u)}(f,t,e,n,r,o,i,c),Mi(f)&&Zl(e,t,f),null!=u&&Zi(t,f,l)}(c,u,t,e,n,r,o,yt(u.consts,i),void 0,s,a),nc}let zA=function qA(t,e,n,r){return va(!0),e[V].createComment("")};let ib=(()=>{class t{log(n){console.log(n)}warn(n){console.warn(n)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=M({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();function cb(t){return function ab(t){return"function"==typeof t&&void 0!==t[tt]}(t)&&"function"==typeof t.set}const Tb=new S(""),wb=new S("");let jy,Vy=(()=>{class t{_ngZone;registry;_isZoneStable=!0;_callbacks=[];_taskTrackingZone=null;_destroyRef;constructor(n,r,o){this._ngZone=n,this.registry=r,Sg()&&(this._destroyRef=E(Tn,{optional:!0})??void 0),jy||(function y2(t){jy=t}(o),o.addToWindow(r)),this._watchAngularEvents(),n.run(()=>{this._taskTrackingZone=typeof Zone>"u"?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){const n=this._ngZone.onUnstable.subscribe({next:()=>{this._isZoneStable=!1}}),r=this._ngZone.runOutsideAngular(()=>this._ngZone.onStable.subscribe({next:()=>{Ie.assertNotInAngularZone(),queueMicrotask(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}}));this._destroyRef?.onDestroy(()=>{n.unsubscribe(),r.unsubscribe()})}isStable(){return this._isZoneStable&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())queueMicrotask(()=>{for(;0!==this._callbacks.length;){let n=this._callbacks.pop();clearTimeout(n.timeoutId),n.doneCb()}});else{let n=this.getPendingTasks();this._callbacks=this._callbacks.filter(r=>!r.updateCb||!r.updateCb(n)||(clearTimeout(r.timeoutId),!1))}}getPendingTasks(){return this._taskTrackingZone?this._taskTrackingZone.macroTasks.map(n=>({source:n.source,creationLocation:n.creationLocation,data:n.data})):[]}addCallback(n,r,o){let i=-1;r&&r>0&&(i=setTimeout(()=>{this._callbacks=this._callbacks.filter(s=>s.timeoutId!==i),n()},r)),this._callbacks.push({doneCb:n,timeoutId:i,updateCb:o})}whenStable(n,r,o){if(o&&!this._taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/plugins/task-tracking" loaded?');this.addCallback(n,r,o),this._runCallbacksIfReady()}registerApplication(n){this.registry.registerApplication(n,this)}unregisterApplication(n){this.registry.unregisterApplication(n)}findProviders(n,r,o){return[]}static \u0275fac=function(r){return new(r||t)(F(Ie),F(m2),F(wb))};static \u0275prov=M({token:t,factory:t.\u0275fac})}return t})(),m2=(()=>{class t{_applications=new Map;registerApplication(n,r){this._applications.set(n,r)}unregisterApplication(n){this._applications.delete(n)}unregisterAllApplications(){this._applications.clear()}getTestability(n){return this._applications.get(n)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(n,r=!0){return jy?.findTestabilityInTree(this,n,r)??null}static \u0275fac=function(r){return new(r||t)};static \u0275prov=M({token:t,factory:t.\u0275fac,providedIn:"platform"})}return t})();function ac(t){return!!t&&"function"==typeof t.then}function Db(t){return!!t&&"function"==typeof t.subscribe}const Sb=new S("");function Ab(t){return ga([{provide:Sb,multi:!0,useValue:t}])}let bb=(()=>{class t{resolve;reject;initialized=!1;done=!1;donePromise=new Promise((n,r)=>{this.resolve=n,this.reject=r});appInits=E(Sb,{optional:!0})??[];injector=E(Lt);constructor(){}runInitializers(){if(this.initialized)return;const n=[];for(const o of this.appInits){const i=Dt(this.injector,o);if(ac(i))n.push(i);else if(Db(i)){const s=new Promise((a,c)=>{i.subscribe({complete:a,error:c})});n.push(s)}}const r=()=>{this.done=!0,this.resolve()};Promise.all(n).then(()=>{r()}).catch(o=>{this.reject(o)}),0===n.length&&r(),this.initialized=!0}static \u0275fac=function(r){return new(r||t)};static \u0275prov=M({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const $y=new S("");let Cr=(()=>{class t{_runningTick=!1;_destroyed=!1;_destroyListeners=[];_views=[];internalErrorHandler=E($n);afterRenderManager=E(JD);zonelessEnabled=E(qg);rootEffectScheduler=E(ST);dirtyFlags=0;tracingSnapshot=null;allTestViews=new Set;autoDetectTestViews=new Set;includeAllTestViews=!1;afterTick=new rn;get allViews(){return[...(this.includeAllTestViews?this.allTestViews:this.autoDetectTestViews).keys(),...this._views]}get destroyed(){return this._destroyed}componentTypes=[];components=[];internalPendingTask=E(Ur);get isStable(){return this.internalPendingTask.hasPendingTasksObservable.pipe(Be(n=>!n))}constructor(){E(Qi,{optional:!0})}whenStable(){let n;return new Promise(r=>{n=this.isStable.subscribe({next:o=>{o&&r()}})}).finally(()=>{n.unsubscribe()})}_injector=E(ot);_rendererFactory=null;get injector(){return this._injector}bootstrap(n,r){return this.bootstrapImpl(n,r)}bootstrapImpl(n,r,o=Lt.NULL){return this._injector.get(Ie).run(()=>{ue(R.BootstrapComponentStart);const s=n instanceof XS;if(!this._injector.get(bb).done)throw new I(405,"");let c;c=s?n:this._injector.get(pd).resolveComponentFactory(n),this.componentTypes.push(c.componentType);const u=function v2(t){return t.isBoundToModule}(c)?void 0:this._injector.get(Go),d=c.create(o,[],r||c.selector,u),f=d.location.nativeElement,h=d.injector.get(Tb,null);return h?.registerApplication(f),d.onDestroy(()=>{this.detachView(d.hostView),Rd(this.components,d),h?.unregisterApplication(f)}),this._loadComponent(d),ue(R.BootstrapComponentEnd,d),d})}tick(){this.zonelessEnabled||(this.dirtyFlags|=1),this._tick()}_tick(){ue(R.ChangeDetectionStart),null!==this.tracingSnapshot?this.tracingSnapshot.run(Gm.CHANGE_DETECTION,this.tickImpl):this.tickImpl()}tickImpl=()=>{if(this._runningTick)throw ue(R.ChangeDetectionEnd),new I(101,!1);const n=B(null);try{this._runningTick=!0,this.synchronize()}finally{this._runningTick=!1,this.tracingSnapshot?.dispose(),this.tracingSnapshot=null,B(n),this.afterTick.next(),ue(R.ChangeDetectionEnd)}};synchronize(){null===this._rendererFactory&&!this._injector.destroyed&&(this._rendererFactory=this._injector.get(hy,null,{optional:!0}));let n=0;for(;0!==this.dirtyFlags&&n++<10;){ue(R.ChangeDetectionSyncStart);try{this.synchronizeOnce()}finally{ue(R.ChangeDetectionSyncEnd)}}}synchronizeOnce(){16&this.dirtyFlags&&(this.dirtyFlags&=-17,this.rootEffectScheduler.flush());let n=!1;if(7&this.dirtyFlags){const r=!!(1&this.dirtyFlags);this.dirtyFlags&=-8,this.dirtyFlags|=8;for(let{_lView:o}of this.allViews)(r||nl(o))&&(id(o,r&&!this.zonelessEnabled?0:1),n=!0);if(this.dirtyFlags&=-5,this.syncDirtyFlagsWithViews(),23&this.dirtyFlags)return}n||(this._rendererFactory?.begin?.(),this._rendererFactory?.end?.()),8&this.dirtyFlags&&(this.dirtyFlags&=-9,this.afterRenderManager.execute()),this.syncDirtyFlagsWithViews()}syncDirtyFlagsWithViews(){this.allViews.some(({_lView:n})=>nl(n))?this.dirtyFlags|=2:this.dirtyFlags&=-8}attachView(n){const r=n;this._views.push(r),r.attachToAppRef(this)}detachView(n){const r=n;Rd(this._views,r),r.detachFromAppRef()}_loadComponent(n){this.attachView(n.hostView);try{this.tick()}catch(o){this.internalErrorHandler(o)}this.components.push(n),this._injector.get($y,[]).forEach(o=>o(n))}ngOnDestroy(){if(!this._destroyed)try{this._destroyListeners.forEach(n=>n()),this._views.slice().forEach(n=>n.destroy())}finally{this._destroyed=!0,this._views=[],this._destroyListeners=[]}}onDestroy(n){return this._destroyListeners.push(n),()=>Rd(this._destroyListeners,n)}destroy(){if(this._destroyed)throw new I(406,!1);const n=this._injector;n.destroy&&!n.destroyed&&n.destroy()}get viewCount(){return this._views.length}static \u0275fac=function(r){return new(r||t)};static \u0275prov=M({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function Rd(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}function Kn(t,e,n,r){const o=w();return Se(o,_t(),e)&&(G(),function LB(t,e,n,r,o,i){const s=ke(t,e);!function ed(t,e,n,r,o,i,s){if(null==i)t.removeAttribute(e,o,n);else{const a=null==s?Q(i):s(i,r||"",o);t.setAttribute(e,o,a,n)}}(e[V],s,i,t.value,n,r,o)}(In(),o,t,e,n,r)),Kn}typeof document<"u"&&document;function Xo(t,e,n){const r=w();return Se(r,_t(),e)&&(G(),Xl(In(),r,t,e,r[V],n)),Xo}function c_(t,e,n,r,o){rd(e,t,n,o?"class":"style",r)}function de(t,e,n,r){const o=w(),i=o[1],s=t+U,a=i.firstCreatePass?my(s,o,2,e,Xm,xg(),n,r):i.data[s];if(function td(t,e,n,r,o){const i=U+n,s=e[1],a=o(s,e,t,r,n);e[i]=a,fr(t,!0);const c=2===t.type;return c?(PD(e[V],a,t),(0===function qF(){return K.lFrame.elementDepthCount}()||Mi(t))&&Ht(a,e),function KF(){K.lFrame.elementDepthCount++}()):Ht(a,e),cl()&&(!c||!Nl(t))&&Qm(s,e,a,t),t}(a,o,t,e,d_),Mi(a)){const c=o[1];Zl(c,o,a),bm(c,a,o)}return null!=r&&Zi(o,a),de}function ye(){const t=G(),n=nd(Y());return t.firstCreatePass&&yy(t,n),function nT(t){return K.skipHydrationRootTNode===t}(n)&&function rT(){K.skipHydrationRootTNode=null}(),function eT(){K.lFrame.elementDepthCount--}(),null!=n.classesWithoutHost&&function R1(t){return!!(8&t.flags)}(n)&&c_(t,n,w(),n.classesWithoutHost,!0),null!=n.stylesWithoutHost&&function M1(t){return!!(16&t.flags)}(n)&&c_(t,n,w(),n.stylesWithoutHost,!1),ye}function jd(t,e,n,r){return de(t,e,n,r),ye(),jd}Object.keys({disabled:"disabled",disabledReasons:"disabledReasons",dirty:"dirty",errors:"errors",hidden:"hidden",invalid:"invalid",max:"max",maxLength:"maxLength",min:"min",minLength:"minLength",name:"name",pattern:"pattern",pending:"pending",readonly:"readonly",required:"required",touched:"touched"});let d_=(t,e,n,r,o)=>(va(!0),jl(e[V],r,function iL(){return K.lFrame.currentNamespace}()));function Gd(){return w()}const zd="en-US";let uk=zd;function at(t,e,n){const r=w(),o=G(),i=Y();return y_(o,r,r[V],i,t,e,n),at}function y_(t,e,n,r,o,i,s){let a=!0,c=null;if((3&r.type||s)&&(c??=_r(r,e,i),function vd(t,e,n,r,o,i,s,a){const c=Mi(t);let u=!1,l=null;if(!r&&c&&(l=function hj(t,e,n,r){const o=t.cleanup;if(null!=o)for(let i=0;i<o.length-1;i+=2){const s=o[i];if(s===n&&o[i+1]===r){const a=e[7],c=o[i+2];return a&&a.length>c?a[c]:null}"string"==typeof s&&(i+=2)}return null}(e,n,i,t.index)),null!==l)(l.__ngLastListenerFn__||l).__ngNextListenerFn__=s,l.__ngLastListenerFn__=s,u=!0;else{const d=ke(t,n),f=r?r(d):d,h=o.listen(f,i,a);(function fj(t){return t.startsWith("animation")||t.startsWith("transition")})(i)||lA(r?m=>r(st(m[t.index])):t.index,e,n,i,a,h,!1)}return u}(r,t,e,s,n,o,i,c)&&(a=!1)),a){const u=r.outputs?.[o],l=r.hostDirectiveOutputs?.[o];if(l&&l.length)for(let d=0;d<l.length;d+=2){const f=l[d],h=l[d+1];c??=_r(r,e,i),os(r,e,f,h,o,c)}if(u&&u.length)for(const d of u)c??=_r(r,e,i),os(r,e,d,o,o,c)}}function gc(t=1){return function eL(t){return(K.lFrame.contextLView=function QI(t,e){for(;t>0;)e=e[14],t--;return e}(t,K.lFrame.contextLView))[8]}(t)}function Yd(t,e){return t<<17|e<<2}function ei(t){return t>>17&32767}function v_(t){return 2|t}function ms(t){return(131068&t)>>2}function C_(t,e){return-131069&t|e<<2}function E_(t){return 1|t}function Pk(t,e,n,r){const o=t[n+1],i=null===e;let s=r?ei(o):ms(o),a=!1;for(;0!==s&&(!1===a||i);){const u=t[s+1];cq(t[s],e)&&(a=!0,t[s+1]=r?E_(u):v_(u)),s=r?ei(u):ms(u)}a&&(t[n+1]=r?v_(o):E_(o))}function cq(t,e){return null===t||null==e||(Array.isArray(t)?t[1]:t)===e||!(!Array.isArray(t)||"string"!=typeof e)&&pa(t,e)>=0}function Qd(t,e){return function jk(t,e,n,r){const o=w(),i=G(),s=function hr(t){const e=K.lFrame,n=e.bindingIndex;return e.bindingIndex=e.bindingIndex+t,n}(2);i.firstUpdatePass&&function zk(t,e,n,r){const o=t.data;if(null===o[n+1]){const i=o[dt()],s=function Gk(t,e){return e>=t.expandoStartIndex}(t,n);(function Yk(t,e){return!!(t.flags&(e?8:16))})(i,r)&&null===e&&!s&&(e=!1),e=function vq(t,e,n,r){const o=function Lg(t){const e=K.lFrame.currentDirectiveIndex;return-1===e?null:t[e]}(t);let i=r?e.residualClasses:e.residualStyles;if(null===o)0===(r?e.classBindings:e.styleBindings)&&(n=mc(n=I_(null,t,e,n,r),e.attrs,r),i=null);else{const s=e.directiveStylingLast;if(-1===s||t[s]!==o)if(n=I_(o,t,e,n,r),null===i){let c=function Cq(t,e,n){const r=n?e.classBindings:e.styleBindings;if(0!==ms(r))return t[ei(r)]}(t,e,r);void 0!==c&&Array.isArray(c)&&(c=I_(null,t,e,c[1],r),c=mc(c,e.attrs,r),function Eq(t,e,n,r){t[ei(n?e.classBindings:e.styleBindings)]=r}(t,e,r,c))}else i=function Iq(t,e,n){let r;const o=e.directiveEnd;for(let i=1+e.directiveStylingLast;i<o;i++)r=mc(r,t[i].hostAttrs,n);return mc(r,e.attrs,n)}(t,e,r)}return void 0!==i&&(r?e.residualClasses=i:e.residualStyles=i),n}(o,i,e,r),function sq(t,e,n,r,o,i){let s=i?e.classBindings:e.styleBindings,a=ei(s),c=ms(s);t[r]=n;let l,u=!1;if(Array.isArray(n)?(l=n[1],(null===l||pa(n,l)>0)&&(u=!0)):l=n,o)if(0!==c){const f=ei(t[a+1]);t[r+1]=Yd(f,a),0!==f&&(t[f+1]=C_(t[f+1],r)),t[a+1]=function oq(t,e){return 131071&t|e<<17}(t[a+1],r)}else t[r+1]=Yd(a,0),0!==a&&(t[a+1]=C_(t[a+1],r)),a=r;else t[r+1]=Yd(c,0),0===a?a=r:t[c+1]=C_(t[c+1],r),c=r;u&&(t[r+1]=v_(t[r+1])),Pk(t,l,r,!0),Pk(t,l,r,!1),function aq(t,e,n,r,o){const i=o?t.residualClasses:t.residualStyles;null!=i&&"string"==typeof e&&pa(i,e)>=0&&(n[r+1]=E_(n[r+1]))}(e,l,t,r,i),s=Yd(a,c),i?e.classBindings=s:e.styleBindings=s}(o,i,e,n,s,r)}}(i,t,s,r),e!==he&&Se(o,s,e)&&function Kk(t,e,n,r,o,i,s,a){if(!(3&e.type))return;const c=t.data,u=c[a+1],l=function iq(t){return!(1&~t)}(u)?Wk(c,e,n,o,ms(u),s):void 0;Jd(l)||(Jd(i)||function rq(t){return!(2&~t)}(u)&&(i=Wk(c,null,n,o,a,s)),function kB(t,e,n,r,o){if(e)o?t.addClass(n,r):t.removeClass(n,r);else{let i=-1===r.indexOf("-")?void 0:Gr.DashCase;null==o?t.removeStyle(n,r,i):("string"==typeof o&&o.endsWith("!important")&&(o=o.slice(0,-10),i|=Gr.Important),t.setStyle(n,r,o,i))}}(r,s,Ni(dt(),n),o,i))}(i,i.data[dt()],o,o[V],t,o[s+1]=function Sq(t,e){return null==t||""===t||("string"==typeof e?t+=e:"object"==typeof t&&(t=sn($r(t)))),t}(e,n),r,s)}(t,e,null,!0),Qd}function I_(t,e,n,r,o){let i=null;const s=n.directiveEnd;let a=n.directiveStylingLast;for(-1===a?a=n.directiveStart:a++;a<s&&(i=e[a],r=mc(r,i.hostAttrs,o),i!==t);)a++;return null!==t&&(n.directiveStylingLast=a),r}function mc(t,e,n){const r=n?1:2;let o=-1;if(null!==e)for(let i=0;i<e.length;i++){const s=e[i];"number"==typeof s?o=s:o===r&&(Array.isArray(t)||(t=void 0===t?[]:["",t]),Yu(t,s,!!n||e[++i]))}return void 0===t?null:t}function Wk(t,e,n,r,o,i){const s=null===e;let a;for(;o>0;){const c=t[o],u=Array.isArray(c),l=u?c[1]:c,d=null===l;let f=n[o+1];f===he&&(f=d?De:void 0);let h=d?mg(f,r):l===r?f:void 0;if(u&&!Jd(h)&&(h=mg(c,r)),Jd(h)&&(a=h,s))return a;const p=t[o+1];o=s?ei(p):ms(p)}if(null!==e){let c=i?e.residualClasses:e.residualStyles;null!=c&&(a=mg(c,r))}return a}function Jd(t){return void 0!==t}function Je(t,e=""){const n=w(),r=G(),o=t+U,i=r.firstCreatePass?Ho(r,o,1,e,null):r.data[o],s=Qk(r,n,i,e);n[o]=s,cl()&&Qm(r,n,s,i),fr(i,!1)}let Qk=(t,e,n,r)=>(va(!0),function Fm(t,e){return t.createText(e)}(e[V],r));function _s(t){return vs("",t),_s}function vs(t,e,n){const r=w(),o=function Zk(t,e,n,r=""){return Se(t,_t(),n)?e+Q(n)+r:he}(r,t,e,n);return o!==he&&function Er(t,e,n){const r=Ni(e,t);!function RD(t,e,n){t.setValue(e,n)}(t[V],r,n)}(r,dt(),o),vs}function yc(t,e,n){cb(e)&&(e=e());const r=w();return Se(r,_t(),e)&&(G(),Xl(In(),r,t,e,r[V],n)),yc}function Zd(t,e){const n=cb(t);return n&&t.set(e),n}function _c(t,e){const n=w(),r=G(),o=Y();return y_(r,n,n[V],o,t,e),_c}function mR(t,e,n){const r=G();r.firstCreatePass&&yR(e,r.data,r.blueprint,En(t),n)}function yR(t,e,n,r,o){if(t=X(t),Array.isArray(t))for(let i=0;i<t.length;i++)yR(t[i],e,n,r,o);else{const i=G(),s=w(),a=Y();let c=ar(t)?t:X(t.provide);const u=BI(t),l=1048575&a.providerIndexes,d=a.directiveStart,f=a.providerIndexes>>20;if(ar(t)||!t.multi){const h=new Da(u,o,A,null),p=w_(c,e,o?l:l+f,d);-1===p?(im(El(a,s),i,c),T_(i,t,e.length),e.push(c),a.directiveStart++,a.directiveEnd++,o&&(a.providerIndexes+=1048576),n.push(h),s.push(h)):(n[p]=h,s[p]=h)}else{const h=w_(c,e,l+f,d),p=w_(c,e,l,l+f),_=p>=0&&n[p];if(o&&!_||!o&&!(h>=0&&n[h])){im(El(a,s),i,c);const C=function $q(t,e,n,r,o){const s=new Da(t,n,A,null);return s.multi=[],s.index=e,s.componentProviders=0,_R(s,o,r&&!n),s}(o?jq:Vq,n.length,o,r,u);!o&&_&&(n[p].providerFactory=C),T_(i,t,e.length,0),e.push(c),a.directiveStart++,a.directiveEnd++,o&&(a.providerIndexes+=1048576),n.push(C),s.push(C)}else T_(i,t,h>-1?h:p,_R(n[o?p:h],u,!o&&r));!o&&r&&_&&n[p].componentProviders++}}}function T_(t,e,n,r){const o=ar(e),i=function UI(t){return!!t.useClass}(e);if(o||i){const c=(i?X(e.useClass):e).prototype.ngOnDestroy;if(c){const u=t.destroyHooks||(t.destroyHooks=[]);if(!o&&e.multi){const l=u.indexOf(n);-1===l?u.push(n,[r,c]):u[l+1].push(r,c)}else u.push(n,c)}}}function _R(t,e,n){return n&&t.componentProviders++,t.multi.push(e)-1}function w_(t,e,n,r){for(let o=n;o<r;o++)if(e[o]===t)return o;return-1}function Vq(t,e,n,r,o){return D_(this.multi,[])}function jq(t,e,n,r,o){const i=this.multi;let s;if(this.providerFactory){const a=this.providerFactory.componentProviders,c=ba(r,r[1],this.providerFactory.index,o);s=c.slice(0,a),D_(i,s);for(let u=a;u<c.length;u++)s.push(c[u])}else s=[],D_(i,s);return s}function D_(t,e){for(let n=0;n<t.length;n++)e.push((0,t[n])());return e}function Me(t,e){return n=>{n.providersResolver=(r,o)=>mR(r,o?o(t):t,!1),e&&(n.viewProvidersResolver=(r,o)=>mR(r,o?o(e):e,!0))}}class UK{ngModuleFactory;componentFactories;constructor(e,n){this.ngModuleFactory=e,this.componentFactories=n}}let HK=(()=>{class t{compileModuleSync(n){return new PA(n)}compileModuleAsync(n){return Promise.resolve(this.compileModuleSync(n))}compileModuleAndAllComponentsSync(n){const r=this.compileModuleSync(n),i=zn(Hn(n).declarations).reduce((s,a)=>{const c=ae(a);return c&&s.push(new Cd(c)),s},[]);return new UK(r,i)}compileModuleAndAllComponentsAsync(n){return Promise.resolve(this.compileModuleAndAllComponentsSync(n))}clearCache(){}clearCacheFor(n){}getModuleId(n){}static \u0275fac=function(r){return new(r||t)};static \u0275prov=M({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),VK=(()=>{class t{applicationErrorHandler=E($n);appRef=E(Cr);taskService=E(Ur);ngZone=E(Ie);zonelessEnabled=E(qg);tracing=E(Qi,{optional:!0});zoneIsDefined=typeof Zone<"u"&&!!Zone.root.run;schedulerTickApplyArgs=[{data:{__scheduler_tick__:!0}}];subscriptions=new Kt;angularZoneId=this.zoneIsDefined?this.ngZone._inner?.get(ll):null;scheduleInRootZone=!this.zonelessEnabled&&this.zoneIsDefined&&(E(CL,{optional:!0})??!1);cancelScheduledCallback=null;useMicrotaskScheduler=!1;runningTick=!1;pendingRenderTaskId=null;constructor(){this.subscriptions.add(this.appRef.afterTick.subscribe(()=>{const n=this.taskService.add();this.runningTick||(this.cleanup(),this.zonelessEnabled&&!this.appRef.includeAllTestViews)?(this.switchToMicrotaskScheduler(),this.taskService.remove(n)):this.taskService.remove(n)})),this.subscriptions.add(this.ngZone.onUnstable.subscribe(()=>{this.runningTick||this.cleanup()}))}switchToMicrotaskScheduler(){this.ngZone.runOutsideAngular(()=>{const n=this.taskService.add();this.useMicrotaskScheduler=!0,queueMicrotask(()=>{this.useMicrotaskScheduler=!1,this.taskService.remove(n)})})}notify(n){if(!this.zonelessEnabled&&5===n)return;switch(n){case 0:case 6:case 13:this.appRef.dirtyFlags|=2;break;case 3:case 2:case 4:case 5:case 1:this.appRef.dirtyFlags|=4;break;case 12:this.appRef.dirtyFlags|=16;break;case 11:break;default:this.appRef.dirtyFlags|=8}if(this.appRef.tracingSnapshot=this.tracing?.snapshot(this.appRef.tracingSnapshot)??null,!this.shouldScheduleTick())return;const r=this.useMicrotaskScheduler?lL:ET;this.pendingRenderTaskId=this.taskService.add(),this.cancelScheduledCallback=this.scheduleInRootZone?Zone.root.run(()=>r(()=>this.tick())):this.ngZone.runOutsideAngular(()=>r(()=>this.tick()))}shouldScheduleTick(){return!(this.appRef.destroyed||null!==this.pendingRenderTaskId||this.runningTick||this.appRef._runningTick||!this.zonelessEnabled&&this.zoneIsDefined&&Zone.current.get(ll+this.angularZoneId))}tick(){if(this.runningTick||this.appRef.destroyed)return;if(0===this.appRef.dirtyFlags)return void this.cleanup();!this.zonelessEnabled&&7&this.appRef.dirtyFlags&&(this.appRef.dirtyFlags|=1);const n=this.taskService.add();try{this.ngZone.run(()=>{this.runningTick=!0,this.appRef._tick()},void 0,this.schedulerTickApplyArgs)}catch(r){this.applicationErrorHandler(r)}finally{this.taskService.remove(n),this.cleanup()}}ngOnDestroy(){this.subscriptions.unsubscribe(),this.cleanup()}cleanup(){if(this.runningTick=!1,this.cancelScheduledCallback?.(),this.cancelScheduledCallback=null,null!==this.pendingRenderTaskId){const n=this.pendingRenderTaskId;this.pendingRenderTaskId=null,this.taskService.remove(n)}}static \u0275fac=function(r){return new(r||t)};static \u0275prov=M({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const Qr=new S("",{factory:()=>E(Qr,{optional:!0,skipSelf:!0})||function jK(){return typeof $localize<"u"&&$localize.locale||zd}()}),sf=Symbol("InputSignalNode#UNSET"),KR={...zp,transformFn:void 0,applyValueToInputSignal(t,e){Fu(t,e)}};function WR(t,e){const n=Object.create(KR);function r(){if(sa(n),n.value===sf)throw new I(-950,null);return n.value}return n.value=t,n.transformFn=e?.transform,r[tt]=n,r}class JK{attributeName;constructor(e){this.attributeName=e}__NG_ELEMENT_ID__=()=>ka(this.attributeName);toString(){return`HostAttributeToken ${this.attributeName}`}}function YR(t,e){return WR(t,e)}const XK=(YR.required=function ZK(t){return WR(sf,t)},YR),af=new S(""),c3=new S("");function Ic(t){return!t.moduleRef}let Is=null;let Tc=(()=>class t{static __NG_ELEMENT_ID__=A3})();function A3(t){return function b3(t,e,n){if(Vn(t)&&!n){const r=At(t.index,e);return new Ga(r,r)}return 175&t.type?new Ga(e[15],e):null}(Y(),w(),!(16&~t))}class pM{constructor(){}supports(e){return yd(e)}create(e){return new R3(e)}}const k3=(t,e)=>e;class R3{length=0;collection;_linkedRecords=null;_unlinkedRecords=null;_previousItHead=null;_itHead=null;_itTail=null;_additionsHead=null;_additionsTail=null;_movesHead=null;_movesTail=null;_removalsHead=null;_removalsTail=null;_identityChangesHead=null;_identityChangesTail=null;_trackByFn;constructor(e){this._trackByFn=e||k3}forEachItem(e){let n;for(n=this._itHead;null!==n;n=n._next)e(n)}forEachOperation(e){let n=this._itHead,r=this._removalsHead,o=0,i=null;for(;n||r;){const s=!r||n&&n.currentIndex<mM(r,o,i)?n:r,a=mM(s,o,i),c=s.currentIndex;if(s===r)o--,r=r._nextRemoved;else if(n=n._next,null==s.previousIndex)o++;else{i||(i=[]);const u=a-o,l=c-o;if(u!=l){for(let f=0;f<u;f++){const h=f<i.length?i[f]:i[f]=0,p=h+f;l<=p&&p<u&&(i[f]=h+1)}i[s.previousIndex]=l-u}}a!==c&&e(s,a,c)}}forEachPreviousItem(e){let n;for(n=this._previousItHead;null!==n;n=n._nextPrevious)e(n)}forEachAddedItem(e){let n;for(n=this._additionsHead;null!==n;n=n._nextAdded)e(n)}forEachMovedItem(e){let n;for(n=this._movesHead;null!==n;n=n._nextMoved)e(n)}forEachRemovedItem(e){let n;for(n=this._removalsHead;null!==n;n=n._nextRemoved)e(n)}forEachIdentityChange(e){let n;for(n=this._identityChangesHead;null!==n;n=n._nextIdentityChange)e(n)}diff(e){if(null==e&&(e=[]),!yd(e))throw new I(900,!1);return this.check(e)?this:null}onDestroy(){}check(e){this._reset();let o,i,s,n=this._itHead,r=!1;if(Array.isArray(e)){this.length=e.length;for(let a=0;a<this.length;a++)i=e[a],s=this._trackByFn(a,i),null!==n&&Object.is(n.trackById,s)?(r&&(n=this._verifyReinsertion(n,i,s,a)),Object.is(n.item,i)||this._addIdentityChange(n,i)):(n=this._mismatch(n,i,s,a),r=!0),n=n._next}else o=0,function lj(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[Symbol.iterator]();let r;for(;!(r=n.next()).done;)e(r.value)}}(e,a=>{s=this._trackByFn(o,a),null!==n&&Object.is(n.trackById,s)?(r&&(n=this._verifyReinsertion(n,a,s,o)),Object.is(n.item,a)||this._addIdentityChange(n,a)):(n=this._mismatch(n,a,s,o),r=!0),n=n._next,o++}),this.length=o;return this._truncate(n),this.collection=e,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let e;for(e=this._previousItHead=this._itHead;null!==e;e=e._next)e._nextPrevious=e._next;for(e=this._additionsHead;null!==e;e=e._nextAdded)e.previousIndex=e.currentIndex;for(this._additionsHead=this._additionsTail=null,e=this._movesHead;null!==e;e=e._nextMoved)e.previousIndex=e.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(e,n,r,o){let i;return null===e?i=this._itTail:(i=e._prev,this._remove(e)),null!==(e=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._reinsertAfter(e,i,o)):null!==(e=null===this._linkedRecords?null:this._linkedRecords.get(r,o))?(Object.is(e.item,n)||this._addIdentityChange(e,n),this._moveAfter(e,i,o)):e=this._addAfter(new M3(n,r),i,o),e}_verifyReinsertion(e,n,r,o){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(r,null);return null!==i?e=this._reinsertAfter(i,e._prev,o):e.currentIndex!=o&&(e.currentIndex=o,this._addToMoves(e,o)),e}_truncate(e){for(;null!==e;){const n=e._next;this._addToRemovals(this._unlink(e)),e=n}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(e,n,r){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(e);const o=e._prevRemoved,i=e._nextRemoved;return null===o?this._removalsHead=i:o._nextRemoved=i,null===i?this._removalsTail=o:i._prevRemoved=o,this._insertAfter(e,n,r),this._addToMoves(e,r),e}_moveAfter(e,n,r){return this._unlink(e),this._insertAfter(e,n,r),this._addToMoves(e,r),e}_addAfter(e,n,r){return this._insertAfter(e,n,r),this._additionsTail=null===this._additionsTail?this._additionsHead=e:this._additionsTail._nextAdded=e,e}_insertAfter(e,n,r){const o=null===n?this._itHead:n._next;return e._next=o,e._prev=n,null===o?this._itTail=e:o._prev=e,null===n?this._itHead=e:n._next=e,null===this._linkedRecords&&(this._linkedRecords=new gM),this._linkedRecords.put(e),e.currentIndex=r,e}_remove(e){return this._addToRemovals(this._unlink(e))}_unlink(e){null!==this._linkedRecords&&this._linkedRecords.remove(e);const n=e._prev,r=e._next;return null===n?this._itHead=r:n._next=r,null===r?this._itTail=n:r._prev=n,e}_addToMoves(e,n){return e.previousIndex===n||(this._movesTail=null===this._movesTail?this._movesHead=e:this._movesTail._nextMoved=e),e}_addToRemovals(e){return null===this._unlinkedRecords&&(this._unlinkedRecords=new gM),this._unlinkedRecords.put(e),e.currentIndex=null,e._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=e,e._prevRemoved=null):(e._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=e),e}_addIdentityChange(e,n){return e.item=n,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=e:this._identityChangesTail._nextIdentityChange=e,e}}class M3{item;trackById;currentIndex=null;previousIndex=null;_nextPrevious=null;_prev=null;_next=null;_prevDup=null;_nextDup=null;_prevRemoved=null;_nextRemoved=null;_nextAdded=null;_nextMoved=null;_nextIdentityChange=null;constructor(e,n){this.item=e,this.trackById=n}}class N3{_head=null;_tail=null;add(e){null===this._head?(this._head=this._tail=e,e._nextDup=null,e._prevDup=null):(this._tail._nextDup=e,e._prevDup=this._tail,e._nextDup=null,this._tail=e)}get(e,n){let r;for(r=this._head;null!==r;r=r._nextDup)if((null===n||n<=r.currentIndex)&&Object.is(r.trackById,e))return r;return null}remove(e){const n=e._prevDup,r=e._nextDup;return null===n?this._head=r:n._nextDup=r,null===r?this._tail=n:r._prevDup=n,null===this._head}}class gM{map=new Map;put(e){const n=e.trackById;let r=this.map.get(n);r||(r=new N3,this.map.set(n,r)),r.add(e)}get(e,n){const o=this.map.get(e);return o?o.get(e,n):null}remove(e){const n=e.trackById;return this.map.get(n).remove(e)&&this.map.delete(n),e}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function mM(t,e,n){const r=t.previousIndex;if(null===r)return r;let o=0;return n&&r<n.length&&(o=n[r]),r+e+o}function _M(){return new x_([new pM])}let x_=(()=>{class t{factories;static \u0275prov=M({token:t,providedIn:"root",factory:_M});constructor(n){this.factories=n}static create(n,r){if(null!=r){const o=r.factories.slice();n=n.concat(o)}return new t(n)}static extend(n){return{provide:t,useFactory:()=>{const r=E(t,{optional:!0,skipSelf:!0});return t.create(n,r||_M())}}}find(n){const r=this.factories.find(o=>o.supports(n));if(null!=r)return r;throw new I(901,!1)}}return t})(),L3=(()=>{class t{constructor(n){}static \u0275fac=function(r){return new(r||t)(F(Cr))};static \u0275mod=qr({type:t});static \u0275inj=sr({})}return t})();function U3(t){const{rootComponent:e,appProviders:n,platformProviders:r,platformRef:o}=t;ue(R.BootstrapApplicationStart);try{const i=o?.injector??function h3(t=[]){if(Is)return Is;const e=function iM(t=[],e){return Lt.create({name:e,providers:[{provide:Eg,useValue:"platform"},{provide:af,useValue:new Set([()=>Is=null])},...t]})}(t);return Is=e,function _2(){!function Ux(t){uI=t}(()=>{throw new I(600,"")})}(),function sM(t){const e=t.get(Fw,null);Dt(t,()=>{e?.forEach(n=>n())})}(e),e}(r),s=[[{provide:Fi,useExisting:VK},{provide:Ie,useClass:gL},{provide:qg,useValue:!0}],DT,...n||[]];return function tM(t){const e=Ic(t)?t.r3Injector:t.moduleRef.injector,n=e.get(Ie);return n.run(()=>{Ic(t)?t.r3Injector.resolveInjectorInitializers():t.moduleRef.resolveInjectorInitializers();const r=e.get($n);let o;if(n.runOutsideAngular(()=>{o=n.onError.subscribe({next:r})}),Ic(t)){const i=()=>e.destroy(),s=t.platformInjector.get(af);s.add(i),e.onDestroy(()=>{o.unsubscribe(),s.delete(i)})}else{const i=()=>t.moduleRef.destroy(),s=t.platformInjector.get(af);s.add(i),t.moduleRef.onDestroy(()=>{Rd(t.allPlatformModules,t.moduleRef),o.unsubscribe(),s.delete(i)})}return function l3(t,e,n){try{const r=n();return ac(r)?r.catch(o=>{throw e.runOutsideAngular(()=>t(o)),o}):r}catch(r){throw e.runOutsideAngular(()=>t(r)),r}}(r,n,()=>{const i=e.get(Ur),s=i.add(),a=e.get(bb);return a.runInitializers(),a.donePromise.then(()=>{if(function pz(t){"string"==typeof t&&(uk=t.toLowerCase().replace(/_/g,"-"))}(e.get(Qr,zd)||zd),!e.get(c3,!0))return Ic(t)?e.get(Cr):(t.allPlatformModules.push(t.moduleRef),t.moduleRef);if(Ic(t)){const l=e.get(Cr);return void 0!==t.rootComponent&&l.bootstrap(t.rootComponent),l}return t.moduleRef}).finally(()=>{i.remove(s)})})})}({r3Injector:new xA({providers:s,parent:i,debugName:"",runEnvironmentInitializers:!1}).injector,platformInjector:i,rootComponent:e})}catch(i){return Promise.reject(i)}finally{ue(R.BootstrapApplicationEnd)}}function Ts(t){return"boolean"==typeof t?t:null!=t&&"false"!==t}function U_(t,e){return t?e?t.endsWith("/")?e.startsWith("/")?t+e.slice(1):t+e:e.startsWith("/")?t+e:`${t}/${e}`:t:e}function kM(t){const e=t.search(/#|\?|$/);return"/"===t[e-1]?t.slice(0,e-1)+t.slice(e):t}function Ir(t){return t&&"?"!==t[0]?`?${t}`:t}let ni=(()=>{class t{historyGo(n){throw new Error("")}static \u0275fac=function(r){return new(r||t)};static \u0275prov=M({token:t,factory:()=>E(MM),providedIn:"root"})}return t})();const RM=new S("");let MM=(()=>{class t extends ni{_platformLocation;_baseHref;_removeListenerFns=[];constructor(n,r){super(),this._platformLocation=n,this._baseHref=r??this._platformLocation.getBaseHrefFromDOM()??E(kt).location?.origin??""}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}prepareExternalUrl(n){return U_(this._baseHref,n)}path(n=!1){const r=this._platformLocation.pathname+Ir(this._platformLocation.search),o=this._platformLocation.hash;return o&&n?`${r}${o}`:r}pushState(n,r,o,i){const s=this.prepareExternalUrl(o+Ir(i));this._platformLocation.pushState(n,r,s)}replaceState(n,r,o,i){const s=this.prepareExternalUrl(o+Ir(i));this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(r){return new(r||t)(F(fl),F(RM,8))};static \u0275prov=M({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Dc=(()=>{class t{_subject=new rn;_basePath;_locationStrategy;_urlChangeListeners=[];_urlChangeSubscription=null;constructor(n){this._locationStrategy=n;const r=this._locationStrategy.getBaseHref();this._basePath=function r8(t){if(new RegExp("^(https?:)?//").test(t)){const[,n]=t.split(/\/\/[^\/]+/);return n}return t}(kM(NM(r))),this._locationStrategy.onPopState(o=>{this._subject.next({url:this.path(!0),pop:!0,state:o.state,type:o.type})})}ngOnDestroy(){this._urlChangeSubscription?.unsubscribe(),this._urlChangeListeners=[]}path(n=!1){return this.normalize(this._locationStrategy.path(n))}getState(){return this._locationStrategy.getState()}isCurrentPathEqualTo(n,r=""){return this.path()==this.normalize(n+Ir(r))}normalize(n){return t.stripTrailingSlash(function n8(t,e){if(!t||!e.startsWith(t))return e;const n=e.substring(t.length);return""===n||["/",";","?","#"].includes(n[0])?n:e}(this._basePath,NM(n)))}prepareExternalUrl(n){return n&&"/"!==n[0]&&(n="/"+n),this._locationStrategy.prepareExternalUrl(n)}go(n,r="",o=null){this._locationStrategy.pushState(o,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Ir(r)),o)}replaceState(n,r="",o=null){this._locationStrategy.replaceState(o,"",n,r),this._notifyUrlChangeListeners(this.prepareExternalUrl(n+Ir(r)),o)}forward(){this._locationStrategy.forward()}back(){this._locationStrategy.back()}historyGo(n=0){this._locationStrategy.historyGo?.(n)}onUrlChange(n){return this._urlChangeListeners.push(n),this._urlChangeSubscription??=this.subscribe(r=>{this._notifyUrlChangeListeners(r.url,r.state)}),()=>{const r=this._urlChangeListeners.indexOf(n);this._urlChangeListeners.splice(r,1),0===this._urlChangeListeners.length&&(this._urlChangeSubscription?.unsubscribe(),this._urlChangeSubscription=null)}}_notifyUrlChangeListeners(n="",r){this._urlChangeListeners.forEach(o=>o(n,r))}subscribe(n,r,o){return this._subject.subscribe({next:n,error:r??void 0,complete:o??void 0})}static normalizeQueryParams=Ir;static joinWithSlash=U_;static stripTrailingSlash=kM;static \u0275fac=function(r){return new(r||t)(F(ni))};static \u0275prov=M({token:t,factory:()=>function t8(){return new Dc(F(ni))}(),providedIn:"root"})}return t})();function NM(t){return t.replace(/\/index.html$/,"")}let o8=(()=>{class t extends ni{_platformLocation;_baseHref="";_removeListenerFns=[];constructor(n,r){super(),this._platformLocation=n,null!=r&&(this._baseHref=r)}ngOnDestroy(){for(;this._removeListenerFns.length;)this._removeListenerFns.pop()()}onPopState(n){this._removeListenerFns.push(this._platformLocation.onPopState(n),this._platformLocation.onHashChange(n))}getBaseHref(){return this._baseHref}path(n=!1){const r=this._platformLocation.hash??"#";return r.length>0?r.substring(1):r}prepareExternalUrl(n){const r=U_(this._baseHref,n);return r.length>0?"#"+r:r}pushState(n,r,o,i){const s=this.prepareExternalUrl(o+Ir(i))||this._platformLocation.pathname;this._platformLocation.pushState(n,r,s)}replaceState(n,r,o,i){const s=this.prepareExternalUrl(o+Ir(i))||this._platformLocation.pathname;this._platformLocation.replaceState(n,r,s)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}getState(){return this._platformLocation.getState()}historyGo(n=0){this._platformLocation.historyGo?.(n)}static \u0275fac=function(r){return new(r||t)(F(fl),F(RM,8))};static \u0275prov=M({token:t,factory:t.\u0275fac})}return t})();class z8{$implicit;ngForOf;index;count;constructor(e,n,r,o){this.$implicit=e,this.ngForOf=n,this.index=r,this.count=o}get first(){return 0===this.index}get last(){return this.index===this.count-1}get even(){return this.index%2==0}get odd(){return!this.even}}let jM=(()=>{class t{_viewContainer;_template;_differs;set ngForOf(n){this._ngForOf=n,this._ngForOfDirty=!0}set ngForTrackBy(n){this._trackByFn=n}get ngForTrackBy(){return this._trackByFn}_ngForOf=null;_ngForOfDirty=!0;_differ=null;_trackByFn;constructor(n,r,o){this._viewContainer=n,this._template=r,this._differs=o}set ngForTemplate(n){n&&(this._template=n)}ngDoCheck(){if(this._ngForOfDirty){this._ngForOfDirty=!1;const n=this._ngForOf;!this._differ&&n&&(this._differ=this._differs.find(n).create(this.ngForTrackBy))}if(this._differ){const n=this._differ.diff(this._ngForOf);n&&this._applyChanges(n)}}_applyChanges(n){const r=this._viewContainer;n.forEachOperation((o,i,s)=>{if(null==o.previousIndex)r.createEmbeddedView(this._template,new z8(o.item,this._ngForOf,-1,-1),null===s?void 0:s);else if(null==s)r.remove(null===i?void 0:i);else if(null!==i){const a=r.get(i);r.move(a,s),$M(a,o)}});for(let o=0,i=r.length;o<i;o++){const a=r.get(o).context;a.index=o,a.count=i,a.ngForOf=this._ngForOf}n.forEachIdentityChange(o=>{$M(r.get(o.currentIndex),o)})}static ngTemplateContextGuard(n,r){return!0}static \u0275fac=function(r){return new(r||t)(A(An),A(mr),A(x_))};static \u0275dir=z({type:t,selectors:[["","ngFor","","ngForOf",""]],inputs:{ngForOf:"ngForOf",ngForTrackBy:"ngForTrackBy",ngForTemplate:"ngForTemplate"}})}return t})();function $M(t,e){t.context.$implicit=e.item}let Y_=(()=>{class t{_viewContainer;_context=new q8;_thenTemplateRef=null;_elseTemplateRef=null;_thenViewRef=null;_elseViewRef=null;constructor(n,r){this._viewContainer=n,this._thenTemplateRef=r}set ngIf(n){this._context.$implicit=this._context.ngIf=n,this._updateView()}set ngIfThen(n){GM(n),this._thenTemplateRef=n,this._thenViewRef=null,this._updateView()}set ngIfElse(n){GM(n),this._elseTemplateRef=n,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngIfUseIfTypeGuard;static ngTemplateGuard_ngIf;static ngTemplateContextGuard(n,r){return!0}static \u0275fac=function(r){return new(r||t)(A(An),A(mr))};static \u0275dir=z({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}})}return t})();class q8{$implicit=null;ngIf=null}function GM(t,e){if(t&&!t.createEmbeddedView)throw new I(2020,!1)}let Ac=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=qr({type:t});static \u0275inj=sr({})}return t})();class KM{_doc;constructor(e){this._doc=e}manager}let ev=(()=>{class t extends KM{constructor(n){super(n)}supports(n){return!0}addEventListener(n,r,o,i){return n.addEventListener(r,o,i),()=>this.removeEventListener(n,r,o,i)}removeEventListener(n,r,o,i){return n.removeEventListener(r,o,i)}static \u0275fac=function(r){return new(r||t)(F(kt))};static \u0275prov=M({token:t,factory:t.\u0275fac})}return t})();const tv=new S("");let WM=(()=>{class t{_zone;_plugins;_eventNameToPlugin=new Map;constructor(n,r){this._zone=r,n.forEach(s=>{s.manager=this});const o=n.filter(s=>!(s instanceof ev));this._plugins=o.slice().reverse();const i=n.find(s=>s instanceof ev);i&&this._plugins.push(i)}addEventListener(n,r,o,i){return this._findPluginFor(r).addEventListener(n,r,o,i)}getZone(){return this._zone}_findPluginFor(n){let r=this._eventNameToPlugin.get(n);if(r)return r;if(r=this._plugins.find(i=>i.supports(n)),!r)throw new I(5101,!1);return this._eventNameToPlugin.set(n,r),r}static \u0275fac=function(r){return new(r||t)(F(tv),F(Ie))};static \u0275prov=M({token:t,factory:t.\u0275fac})}return t})();const nv="ng-app-id";function YM(t){for(const e of t)e.remove()}function QM(t,e){const n=e.createElement("style");return n.textContent=t,n}function rv(t,e){const n=e.createElement("link");return n.setAttribute("rel","stylesheet"),n.setAttribute("href",t),n}let JM=(()=>{class t{doc;appId;nonce;inline=new Map;external=new Map;hosts=new Set;constructor(n,r,o,i={}){this.doc=n,this.appId=r,this.nonce=o,function yW(t,e,n,r){const o=t.head?.querySelectorAll(`style[${nv}="${e}"],link[${nv}="${e}"]`);if(o)for(const i of o)i.removeAttribute(nv),i instanceof HTMLLinkElement?r.set(i.href.slice(i.href.lastIndexOf("/")+1),{usage:0,elements:[i]}):i.textContent&&n.set(i.textContent,{usage:0,elements:[i]})}(n,r,this.inline,this.external),this.hosts.add(n.head)}addStyles(n,r){for(const o of n)this.addUsage(o,this.inline,QM);r?.forEach(o=>this.addUsage(o,this.external,rv))}removeStyles(n,r){for(const o of n)this.removeUsage(o,this.inline);r?.forEach(o=>this.removeUsage(o,this.external))}addUsage(n,r,o){const i=r.get(n);i?i.usage++:r.set(n,{usage:1,elements:[...this.hosts].map(s=>this.addElement(s,o(n,this.doc)))})}removeUsage(n,r){const o=r.get(n);o&&(o.usage--,o.usage<=0&&(YM(o.elements),r.delete(n)))}ngOnDestroy(){for(const[,{elements:n}]of[...this.inline,...this.external])YM(n);this.hosts.clear()}addHost(n){this.hosts.add(n);for(const[r,{elements:o}]of this.inline)o.push(this.addElement(n,QM(r,this.doc)));for(const[r,{elements:o}]of this.external)o.push(this.addElement(n,rv(r,this.doc)))}removeHost(n){this.hosts.delete(n)}addElement(n,r){return this.nonce&&r.setAttribute("nonce",this.nonce),n.appendChild(r)}static \u0275fac=function(r){return new(r||t)(F(kt),F(Gi),F(Uw,8),F(Lw))};static \u0275prov=M({token:t,factory:t.\u0275fac})}return t})();const ov={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/",math:"http://www.w3.org/1998/Math/MathML"},iv=/%COMP%/g,TW=new S("",{factory:()=>!0});function XM(t,e){return e.map(n=>n.replace(iv,t))}let eN=(()=>{class t{eventManager;sharedStylesHost;appId;removeStylesOnCompDestroy;doc;ngZone;nonce;tracingService;rendererByCompId=new Map;defaultRenderer;constructor(n,r,o,i,s,a,c=null,u=null){this.eventManager=n,this.sharedStylesHost=r,this.appId=o,this.removeStylesOnCompDestroy=i,this.doc=s,this.ngZone=a,this.nonce=c,this.tracingService=u,this.defaultRenderer=new sv(n,s,a,this.tracingService)}createRenderer(n,r){if(!n||!r)return this.defaultRenderer;const o=this.getOrCreateRenderer(n,r);return o instanceof rN?o.applyToHost(n):o instanceof av&&o.applyStyles(),o}getOrCreateRenderer(n,r){const o=this.rendererByCompId;let i=o.get(r.id);if(!i){const s=this.doc,a=this.ngZone,c=this.eventManager,u=this.sharedStylesHost,l=this.removeStylesOnCompDestroy,d=this.tracingService;switch(r.encapsulation){case ln.Emulated:i=new rN(c,u,r,this.appId,l,s,a,d);break;case ln.ShadowDom:return new nN(c,n,r,s,a,this.nonce,d,u);case ln.ExperimentalIsolatedShadowDom:return new nN(c,n,r,s,a,this.nonce,d);default:i=new av(c,u,r,l,s,a,d)}o.set(r.id,i)}return i}ngOnDestroy(){this.rendererByCompId.clear()}componentReplaced(n){this.rendererByCompId.delete(n)}static \u0275fac=function(r){return new(r||t)(F(WM),F(JM),F(Gi),F(TW),F(kt),F(Ie),F(Uw),F(Qi,8))};static \u0275prov=M({token:t,factory:t.\u0275fac})}return t})();class sv{eventManager;doc;ngZone;tracingService;data=Object.create(null);throwOnSyntheticProps=!0;constructor(e,n,r,o){this.eventManager=e,this.doc=n,this.ngZone=r,this.tracingService=o}destroy(){}destroyNode=null;createElement(e,n){return n?this.doc.createElementNS(ov[n]||n,e):this.doc.createElement(e)}createComment(e){return this.doc.createComment(e)}createText(e){return this.doc.createTextNode(e)}appendChild(e,n){(tN(e)?e.content:e).appendChild(n)}insertBefore(e,n,r){e&&(tN(e)?e.content:e).insertBefore(n,r)}removeChild(e,n){n.remove()}selectRootElement(e,n){let r="string"==typeof e?this.doc.querySelector(e):e;if(!r)throw new I(-5104,!1);return n||(r.textContent=""),r}parentNode(e){return e.parentNode}nextSibling(e){return e.nextSibling}setAttribute(e,n,r,o){if(o){n=o+":"+n;const i=ov[o];i?e.setAttributeNS(i,n,r):e.setAttribute(n,r)}else e.setAttribute(n,r)}removeAttribute(e,n,r){if(r){const o=ov[r];o?e.removeAttributeNS(o,n):e.removeAttribute(`${r}:${n}`)}else e.removeAttribute(n)}addClass(e,n){e.classList.add(n)}removeClass(e,n){e.classList.remove(n)}setStyle(e,n,r,o){o&(Gr.DashCase|Gr.Important)?e.style.setProperty(n,r,o&Gr.Important?"important":""):e.style[n]=r}removeStyle(e,n,r){r&Gr.DashCase?e.style.removeProperty(n):e.style[n]=""}setProperty(e,n,r){null!=e&&(e[n]=r)}setValue(e,n){e.nodeValue=n}listen(e,n,r,o){if("string"==typeof e&&!(e=Hr().getGlobalEventTarget(this.doc,e)))throw new I(5102,!1);let i=this.decoratePreventDefault(r);return this.tracingService?.wrapEventListener&&(i=this.tracingService.wrapEventListener(e,n,i)),this.eventManager.addEventListener(e,n,i,o)}decoratePreventDefault(e){return n=>{if("__ngUnwrap__"===n)return e;!1===e(n)&&n.preventDefault()}}}function tN(t){return"TEMPLATE"===t.tagName&&void 0!==t.content}class nN extends sv{hostEl;sharedStylesHost;shadowRoot;constructor(e,n,r,o,i,s,a,c){super(e,o,i,a),this.hostEl=n,this.sharedStylesHost=c,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost&&this.sharedStylesHost.addHost(this.shadowRoot);let u=r.styles;u=XM(r.id,u);for(const d of u){const f=document.createElement("style");s&&f.setAttribute("nonce",s),f.textContent=d,this.shadowRoot.appendChild(f)}const l=r.getExternalStyles?.();if(l)for(const d of l){const f=rv(d,o);s&&f.setAttribute("nonce",s),this.shadowRoot.appendChild(f)}}nodeOrShadowRoot(e){return e===this.hostEl?this.shadowRoot:e}appendChild(e,n){return super.appendChild(this.nodeOrShadowRoot(e),n)}insertBefore(e,n,r){return super.insertBefore(this.nodeOrShadowRoot(e),n,r)}removeChild(e,n){return super.removeChild(null,n)}parentNode(e){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(e)))}destroy(){this.sharedStylesHost&&this.sharedStylesHost.removeHost(this.shadowRoot)}}class av extends sv{sharedStylesHost;removeStylesOnCompDestroy;styles;styleUrls;constructor(e,n,r,o,i,s,a,c){super(e,i,s,a),this.sharedStylesHost=n,this.removeStylesOnCompDestroy=o;let u=r.styles;this.styles=c?XM(c,u):u,this.styleUrls=r.getExternalStyles?.(c)}applyStyles(){this.sharedStylesHost.addStyles(this.styles,this.styleUrls)}destroy(){this.removeStylesOnCompDestroy&&0===Fo.size&&this.sharedStylesHost.removeStyles(this.styles,this.styleUrls)}}class rN extends av{contentAttr;hostAttr;constructor(e,n,r,o,i,s,a,c){const u=o+"-"+r.id;super(e,n,r,i,s,a,c,u),this.contentAttr=function wW(t){return"_ngcontent-%COMP%".replace(iv,t)}(u),this.hostAttr=function DW(t){return"_nghost-%COMP%".replace(iv,t)}(u)}applyToHost(e){this.applyStyles(),this.setAttribute(e,this.hostAttr,"")}createElement(e,n){const r=super.createElement(e,n);return super.setAttribute(r,this.contentAttr,""),r}}class cv extends bL{supportsDOMEvents=!0;static makeCurrent(){!function AL(t){kT??=t}(new cv)}onAndCancel(e,n,r,o){return e.addEventListener(n,r,o),()=>{e.removeEventListener(n,r,o)}}dispatchEvent(e,n){e.dispatchEvent(n)}remove(e){e.remove()}createElement(e,n){return(n=n||this.getDefaultDocument()).createElement(e)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(e){return e.nodeType===Node.ELEMENT_NODE}isShadowRoot(e){return e instanceof DocumentFragment}getGlobalEventTarget(e,n){return"window"===n?window:"document"===n?e:"body"===n?e.body:null}getBaseHref(e){const n=function AW(){return bc=bc||document.head.querySelector("base"),bc?bc.getAttribute("href"):null}();return null==n?null:function bW(t){return new URL(t,document.baseURI).pathname}(n)}resetBaseElement(){bc=null}getUserAgent(){return window.navigator.userAgent}getCookie(e){return RT(document.cookie,e)}}let bc=null,RW=(()=>{class t{build(){return new XMLHttpRequest}static \u0275fac=function(r){return new(r||t)};static \u0275prov=M({token:t,factory:t.\u0275fac})}return t})();const oN=["alt","control","meta","shift"],MW={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},NW={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let OW=(()=>{class t extends KM{constructor(n){super(n)}supports(n){return null!=t.parseEventName(n)}addEventListener(n,r,o,i){const s=t.parseEventName(r),a=t.eventCallback(s.fullKey,o,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>Hr().onAndCancel(n,s.domEventName,a,i))}static parseEventName(n){const r=n.toLowerCase().split("."),o=r.shift();if(0===r.length||"keydown"!==o&&"keyup"!==o)return null;const i=t._normalizeKey(r.pop());let s="",a=r.indexOf("code");if(a>-1&&(r.splice(a,1),s="code."),oN.forEach(u=>{const l=r.indexOf(u);l>-1&&(r.splice(l,1),s+=u+".")}),s+=i,0!=r.length||0===i.length)return null;const c={};return c.domEventName=o,c.fullKey=s,c}static matchEventFullKeyCode(n,r){let o=MW[n.key]||n.key,i="";return r.indexOf("code.")>-1&&(o=n.code,i="code."),!(null==o||!o)&&(o=o.toLowerCase()," "===o?o="space":"."===o&&(o="dot"),oN.forEach(s=>{s!==o&&(0,NW[s])(n)&&(i+=s+".")}),i+=o,i===r)}static eventCallback(n,r,o){return i=>{t.matchEventFullKeyCode(i,n)&&o.runGuarded(()=>r(i))}}static _normalizeKey(n){return"esc"===n?"escape":n}static \u0275fac=function(r){return new(r||t)(F(kt))};static \u0275prov=M({token:t,factory:t.\u0275fac})}return t})();function uv(){return(uv=y(function*(t,e,n){return U3({rootComponent:t,...iN(e,n)})})).apply(this,arguments)}function iN(t,e){return{platformRef:e?.platformRef,appProviders:[...aN,...t?.providers??[]],platformProviders:UW}}const UW=[{provide:Lw,useValue:"browser"},{provide:Fw,useValue:function xW(){cv.makeCurrent()},multi:!0},{provide:kt,useFactory:function LW(){return function EU(t){fm=t}(document),document}}],sN=[{provide:wb,useClass:class kW{addToWindow(e){Ue.getAngularTestability=(r,o=!0)=>{const i=e.findTestabilityInTree(r,o);if(null==i)throw new I(5103,!1);return i},Ue.getAllAngularTestabilities=()=>e.getAllTestabilities(),Ue.getAllAngularRootElements=()=>e.getAllRootElements(),Ue.frameworkStabilizers||(Ue.frameworkStabilizers=[]),Ue.frameworkStabilizers.push(r=>{const o=Ue.getAllAngularTestabilities();let i=o.length;const s=function(){i--,0==i&&r()};o.forEach(a=>{a.whenStable(s)})})}findTestabilityInTree(e,n,r){return null==n?null:e.getTestability(n)??(r?Hr().isShadowRoot(n)?this.findTestabilityInTree(e,n.host,!0):this.findTestabilityInTree(e,n.parentElement,!0):null)}}},{provide:Tb,useClass:Vy},{provide:Vy,useClass:Vy}],aN=[{provide:Eg,useValue:"root"},{provide:Ca,useFactory:function FW(){return new Ca}},{provide:tv,useClass:ev,multi:!0},{provide:tv,useClass:OW,multi:!0},eN,JM,WM,{provide:hy,useExisting:eN},{provide:MT,useClass:RW},[]];let HW=(()=>{class t{constructor(){}static \u0275fac=function(r){return new(r||t)};static \u0275mod=qr({type:t});static \u0275inj=sr({providers:[...aN,...sN],imports:[Ac,L3]})}return t})();function pn(t,e){return function xx(t,e){const n=Object.create(Fx);n.computation=t,void 0!==e&&(n.equal=e);const r=()=>{if(aa(n),sa(n),n.value===Mr)throw n.error;return n.value};return r[tt]=n,r}(t,e?.equal)}function hN(t){return!!t&&(t instanceof Ge||be(t.lift)&&be(t.subscribe))}function Jr(t){return this instanceof Jr?(this.v=t,this):new Jr(t)}function yN(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var n,e=t[Symbol.asyncIterator];return e?e.call(t):(t=function mv(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}(t),n={},r("next"),r("throw"),r("return"),n[Symbol.asyncIterator]=function(){return this},n);function r(i){n[i]=t[i]&&function(s){return new Promise(function(a,c){!function o(i,s,a,c){Promise.resolve(c).then(function(u){i({value:u,done:a})},s)}(a,c,(s=t[i](s)).done,s.value)})}}}Error,Error,"function"==typeof SuppressedError&&SuppressedError;const _N=t=>t&&"number"==typeof t.length&&"function"!=typeof t;function vN(t){return be(t?.then)}function CN(t){return be(t[tg])}function EN(t){return Symbol.asyncIterator&&be(t?.[Symbol.asyncIterator])}function IN(t){return new TypeError(`You provided ${null!==t&&"object"==typeof t?"an invalid object":`'${t}'`} where a stream was expected. You can provide an Observable, Promise, ReadableStream, Array, AsyncIterable, or Iterable.`)}const TN=function w4(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}();function wN(t){return be(t?.[TN])}function DN(t){return function mN(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o,r=n.apply(t,e||[]),i=[];return o=Object.create(("function"==typeof AsyncIterator?AsyncIterator:Object).prototype),a("next"),a("throw"),a("return",function s(h){return function(p){return Promise.resolve(p).then(h,d)}}),o[Symbol.asyncIterator]=function(){return this},o;function a(h,p){r[h]&&(o[h]=function(m){return new Promise(function(_,C){i.push([h,m,_,C])>1||c(h,m)})},p&&(o[h]=p(o[h])))}function c(h,p){try{!function u(h){h.value instanceof Jr?Promise.resolve(h.value.v).then(l,d):f(i[0][2],h)}(r[h](p))}catch(m){f(i[0][3],m)}}function l(h){c("next",h)}function d(h){c("throw",h)}function f(h,p){h(p),i.shift(),i.length&&c(i[0][0],i[0][1])}}(this,arguments,function*(){const n=t.getReader();try{for(;;){const{value:r,done:o}=yield Jr(n.read());if(o)return yield Jr(void 0);yield yield Jr(r)}}finally{n.releaseLock()}})}function SN(t){return be(t?.getReader)}function Wn(t){if(t instanceof Ge)return t;if(null!=t){if(CN(t))return function D4(t){return new Ge(e=>{const n=t[tg]();if(be(n.subscribe))return n.subscribe(e);throw new TypeError("Provided object does not correctly implement Symbol.observable")})}(t);if(_N(t))return function S4(t){return new Ge(e=>{for(let n=0;n<t.length&&!e.closed;n++)e.next(t[n]);e.complete()})}(t);if(vN(t))return function A4(t){return new Ge(e=>{t.then(n=>{e.closed||(e.next(n),e.complete())},n=>e.error(n)).then(null,gI)})}(t);if(EN(t))return AN(t);if(wN(t))return function b4(t){return new Ge(e=>{for(const n of t)if(e.next(n),e.closed)return;e.complete()})}(t);if(SN(t))return function k4(t){return AN(DN(t))}(t)}throw IN(t)}function AN(t){return new Ge(e=>{(function R4(t,e){var n,r,o,i;return function pN(t,e,n,r){return new(n||(n=Promise))(function(i,s){function a(l){try{u(r.next(l))}catch(d){s(d)}}function c(l){try{u(r.throw(l))}catch(d){s(d)}}function u(l){l.done?i(l.value):function o(i){return i instanceof n?i:new n(function(s){s(i)})}(l.value).then(a,c)}u((r=r.apply(t,e||[])).next())})}(this,void 0,void 0,function*(){try{for(n=yN(t);!(r=yield n.next()).done;)if(e.next(r.value),e.closed)return}catch(s){o={error:s}}finally{try{r&&!r.done&&(i=n.return)&&(yield i.call(n))}finally{if(o)throw o.error}}e.complete()})})(t,e).catch(n=>e.error(n))})}function wr(t,e,n,r=0,o=!1){const i=e.schedule(function(){n(),o?t.add(this.schedule(null,r)):this.unsubscribe()},r);if(t.add(i),!o)return i}function bN(t,e=0){return Rt((n,r)=>{n.subscribe(vt(r,o=>wr(r,t,()=>r.next(o),e),()=>wr(r,t,()=>r.complete(),e),o=>wr(r,t,()=>r.error(o),e)))})}function kN(t,e=0){return Rt((n,r)=>{r.add(t.schedule(()=>n.subscribe(r),e))})}function RN(t,e){if(!t)throw new Error("Iterable cannot be null");return new Ge(n=>{wr(n,e,()=>{const r=t[Symbol.asyncIterator]();wr(n,e,()=>{r.next().then(o=>{o.done?n.complete():n.next(o.value)})},0,!0)})})}function et(t,e){return e?function F4(t,e){if(null!=t){if(CN(t))return function M4(t,e){return Wn(t).pipe(kN(e),bN(e))}(t,e);if(_N(t))return function O4(t,e){return new Ge(n=>{let r=0;return e.schedule(function(){r===t.length?n.complete():(n.next(t[r++]),n.closed||this.schedule())})})}(t,e);if(vN(t))return function N4(t,e){return Wn(t).pipe(kN(e),bN(e))}(t,e);if(EN(t))return RN(t,e);if(wN(t))return function P4(t,e){return new Ge(n=>{let r;return wr(n,e,()=>{r=t[TN](),wr(n,e,()=>{let o,i;try{({value:o,done:i}=r.next())}catch(s){return void n.error(s)}i?n.complete():n.next(o)},0,!0)}),()=>be(r?.return)&&r.return()})}(t,e);if(SN(t))return function x4(t,e){return RN(DN(t),e)}(t,e)}throw IN(t)}(t,e):Wn(t)}function _v(t){return t[t.length-1]}function MN(t){return be(_v(t))?t.pop():void 0}function wf(t){return function L4(t){return t&&be(t.schedule)}(_v(t))?t.pop():void 0}function te(...t){return et(t,wf(t))}const{isArray:U4}=Array,{getPrototypeOf:H4,prototype:B4,keys:V4}=Object;function NN(t){if(1===t.length){const e=t[0];if(U4(e))return{args:e,keys:null};if(function j4(t){return t&&"object"==typeof t&&H4(t)===B4}(e)){const n=V4(e);return{args:n.map(r=>e[r]),keys:n}}}return{args:t,keys:null}}const{isArray:$4}=Array;function ON(t){return Be(e=>function G4(t,e){return $4(e)?t(...e):t(e)}(t,e))}function PN(t,e){return t.reduce((n,r,o)=>(n[r]=e[o],n),{})}function xN(...t){const e=wf(t),n=MN(t),{args:r,keys:o}=NN(t);if(0===r.length)return et([],e);const i=new Ge(function z4(t,e,n=Ei){return r=>{FN(e,()=>{const{length:o}=t,i=new Array(o);let s=o,a=o;for(let c=0;c<o;c++)FN(e,()=>{const u=et(t[c],e);let l=!1;u.subscribe(vt(r,d=>{i[c]=d,l||(l=!0,a--),a||r.next(n(i.slice()))},()=>{--s||r.complete()}))},r)},r)}}(r,e,o?s=>PN(o,s):Ei));return n?i.pipe(ON(n)):i}function FN(t,e,n){t?wr(n,t,e):e()}const vv=qp(t=>function(){t(this),this.name="EmptyError",this.message="no elements in sequence"});function gn(t,e,n=1/0){return be(e)?gn((r,o)=>Be((i,s)=>e(r,i,o,s))(Wn(t(r,o))),n):("number"==typeof e&&(n=e),Rt((r,o)=>function q4(t,e,n,r,o,i,s,a){const c=[];let u=0,l=0,d=!1;const f=()=>{d&&!c.length&&!u&&e.complete()},h=m=>u<r?p(m):c.push(m),p=m=>{i&&e.next(m),u++;let _=!1;Wn(n(m,l++)).subscribe(vt(e,C=>{o?.(C),i?h(C):e.next(C)},()=>{_=!0},void 0,()=>{if(_)try{for(u--;c.length&&u<r;){const C=c.shift();s?wr(e,s,()=>p(C)):p(C)}f()}catch(C){e.error(C)}}))};return t.subscribe(vt(e,h,()=>{d=!0,f()})),()=>{a?.()}}(r,o,t,n)))}function kc(t=1/0){return gn(Ei,t)}function Cv(...t){return function K4(){return kc(1)}()(et(t,wf(t)))}function Ev(t){return new Ge(e=>{Wn(t()).subscribe(e)})}const Gt=new Ge(t=>t.complete());function Iv(t,e){const n=be(t)?t:()=>t,r=o=>o.error(n());return new Ge(e?o=>e.schedule(r,0,o):r)}function Zr(t,e){return Rt((n,r)=>{let o=0;n.subscribe(vt(r,i=>t.call(e,i,o++)&&r.next(i)))})}function Ds(t){return t<=0?()=>Gt:Rt((e,n)=>{let r=0;e.subscribe(vt(n,o=>{++r<=t&&(n.next(o),t<=r&&n.complete())}))})}function Q4(t=J4){return Rt((e,n)=>{let r=!1;e.subscribe(vt(n,o=>{r=!0,n.next(o)},()=>r?n.complete():n.error(t())))})}function J4(){return new vv}function ri(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Zr((o,i)=>t(o,i,r)):Ei,Ds(1),n?function Y4(t){return Rt((e,n)=>{let r=!1;e.subscribe(vt(n,o=>{r=!0,n.next(o)},()=>{r||n.next(t),n.complete()}))})}(e):Q4(()=>new vv))}function mn(t,e){return Rt((n,r)=>{let o=null,i=0,s=!1;const a=()=>s&&!o&&r.complete();n.subscribe(vt(r,c=>{o?.unsubscribe();let u=0;const l=i++;Wn(t(c,l)).subscribe(o=vt(r,d=>r.next(e?e(c,d,l,u++):d),()=>{o=null,a()}))},()=>{s=!0,a()}))})}function Tv(t){return Rt((e,n)=>{Wn(t).subscribe(vt(n,()=>n.complete(),Yp)),!n.closed&&e.subscribe(n)})}function Df(t,e){return be(e)?gn(t,e,1):gn(t,1)}function Xr(t,e,n){const r=be(t)||e||n?{next:t,error:e,complete:n}:t;return r?Rt((o,i)=>{var s;null===(s=r.subscribe)||void 0===s||s.call(r);let a=!0;o.subscribe(vt(i,c=>{var u;null===(u=r.next)||void 0===u||u.call(r,c),i.next(c)},()=>{var c;a=!1,null===(c=r.complete)||void 0===c||c.call(r),i.complete()},c=>{var u;a=!1,null===(u=r.error)||void 0===u||u.call(r,c),i.error(c)},()=>{var c,u;a&&(null===(c=r.unsubscribe)||void 0===c||c.call(r)),null===(u=r.finalize)||void 0===u||u.call(r)}))}):Ei}function LN(t){return t<=0?()=>Gt:Rt((e,n)=>{let r=[];e.subscribe(vt(n,o=>{r.push(o),t<r.length&&r.shift()},()=>{for(const o of r)n.next(o);n.complete()},void 0,()=>{r=null}))})}function Rc(t){return Rt((e,n)=>{let i,r=null,o=!1;r=e.subscribe(vt(n,void 0,void 0,s=>{i=Wn(t(s,Rc(t)(e))),r?(r.unsubscribe(),r=null,i.subscribe(n)):o=!0})),o&&(r.unsubscribe(),r=null,i.subscribe(n))})}function wv(t){return Rt((e,n)=>{try{e.subscribe(n)}finally{n.add(t)}})}let X4=(()=>{class t{_doc;constructor(n){this._doc=n}getTitle(){return this._doc.title}setTitle(n){this._doc.title=n||""}static \u0275fac=function(r){return new(r||t)(F(kt))};static \u0275prov=M({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const ee="primary",Nc=Symbol("RouteTitle");class r6{params;constructor(e){this.params=e||{}}has(e){return Object.prototype.hasOwnProperty.call(this.params,e)}get(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n[0]:n}return null}getAll(e){if(this.has(e)){const n=this.params[e];return Array.isArray(n)?n:[n]}return[]}get keys(){return Object.keys(this.params)}}function Ss(t){return new r6(t)}function Dv(t,e,n){for(let r=0;r<t.length;r++){const o=t[r],i=e[r];if(":"===o[0])n[o.substring(1)]=i;else if(o!==i.path)return!1}return!0}function o6(t,e,n){const r=n.path.split("/"),o=r.indexOf("**");if(-1===o){if(r.length>t.length||"full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const c={},u=t.slice(0,r.length);return Dv(r,u,c)?{consumed:u,posParams:c}:null}if(o!==r.lastIndexOf("**"))return null;const i=r.slice(0,o),s=r.slice(o+1);if(i.length+s.length>t.length||"full"===n.pathMatch&&e.hasChildren()&&"**"!==n.path)return null;const a={};return Dv(i,t.slice(0,i.length),a)&&Dv(s,t.slice(t.length-s.length),a)?{consumed:t,posParams:a}:null}function Sf(t){return new Promise((e,n)=>{t.pipe(ri()).subscribe({next:r=>e(r),error:r=>n(r)})})}function Yn(t,e){const n=t?Sv(t):void 0,r=e?Sv(e):void 0;if(!n||!r||n.length!=r.length)return!1;let o;for(let i=0;i<n.length;i++)if(o=n[i],!BN(t[o],e[o]))return!1;return!0}function Sv(t){return[...Object.keys(t),...Object.getOwnPropertySymbols(t)]}function BN(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((o,i)=>r[i]===o)}return t===e}function oi(t){return hN(t)?t:ac(t)?et(Promise.resolve(t)):te(t)}function VN(t){return hN(t)?Sf(t):Promise.resolve(t)}const a6={exact:function $N(t,e,n){if(!ii(t.segments,e.segments)||!Af(t.segments,e.segments,n)||t.numberOfChildren!==e.numberOfChildren)return!1;for(const r in e.children)if(!t.children[r]||!$N(t.children[r],e.children[r],n))return!1;return!0},subset:GN},jN={exact:function u6(t,e){return Yn(t,e)},subset:function l6(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>BN(t[n],e[n]))},ignored:()=>!0};function Av(t,e,n){return a6[n.paths](t.root,e.root,n.matrixParams)&&jN[n.queryParams](t.queryParams,e.queryParams)&&!("exact"===n.fragment&&t.fragment!==e.fragment)}function GN(t,e,n){return zN(t,e,e.segments,n)}function zN(t,e,n,r){if(t.segments.length>n.length){const o=t.segments.slice(0,n.length);return!(!ii(o,n)||e.hasChildren()||!Af(o,n,r))}if(t.segments.length===n.length){if(!ii(t.segments,n)||!Af(t.segments,n,r))return!1;for(const o in e.children)if(!t.children[o]||!GN(t.children[o],e.children[o],r))return!1;return!0}{const o=n.slice(0,t.segments.length),i=n.slice(t.segments.length);return!!(ii(t.segments,o)&&Af(t.segments,o,r)&&t.children[ee])&&zN(t.children[ee],e,i,r)}}function Af(t,e,n){return e.every((r,o)=>jN[n](t[o].parameters,r.parameters))}class Qn{root;queryParams;fragment;_queryParamMap;constructor(e=new _e([],{}),n={},r=null){this.root=e,this.queryParams=n,this.fragment=r}get queryParamMap(){return this._queryParamMap??=Ss(this.queryParams),this._queryParamMap}toString(){return h6.serialize(this)}}class _e{segments;children;parent=null;constructor(e,n){this.segments=e,this.children=n,Object.values(n).forEach(r=>r.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return bf(this)}}class Oc{path;parameters;_parameterMap;constructor(e,n){this.path=e,this.parameters=n}get parameterMap(){return this._parameterMap??=Ss(this.parameters),this._parameterMap}toString(){return WN(this)}}function ii(t,e){return t.length===e.length&&t.every((n,r)=>n.path===e[r].path)}let Pc=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=M({token:t,factory:()=>new xc,providedIn:"root"})}return t})();class xc{parse(e){const n=new w6(e);return new Qn(n.parseRootSegment(),n.parseQueryParams(),n.parseFragment())}serialize(e){const n=`/${Fc(e.root,!0)}`,r=function m6(t){const e=Object.entries(t).map(([n,r])=>Array.isArray(r)?r.map(o=>`${kf(n)}=${kf(o)}`).join("&"):`${kf(n)}=${kf(r)}`).filter(n=>n);return e.length?`?${e.join("&")}`:""}(e.queryParams);return`${n}${r}${"string"==typeof e.fragment?`#${function p6(t){return encodeURI(t)}(e.fragment)}`:""}`}}const h6=new xc;function bf(t){return t.segments.map(e=>WN(e)).join("/")}function Fc(t,e){if(!t.hasChildren())return bf(t);if(e){const n=t.children[ee]?Fc(t.children[ee],!1):"",r=[];return Object.entries(t.children).forEach(([o,i])=>{o!==ee&&r.push(`${o}:${Fc(i,!1)}`)}),r.length>0?`${n}(${r.join("//")})`:n}{const n=function f6(t,e){let n=[];return Object.entries(t.children).forEach(([r,o])=>{r===ee&&(n=n.concat(e(o,r)))}),Object.entries(t.children).forEach(([r,o])=>{r!==ee&&(n=n.concat(e(o,r)))}),n}(t,(r,o)=>o===ee?[Fc(t.children[ee],!1)]:[`${o}:${Fc(r,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children[ee]?`${bf(t)}/${n[0]}`:`${bf(t)}/(${n.join("//")})`}}function qN(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function kf(t){return qN(t).replace(/%3B/gi,";")}function bv(t){return qN(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function Rf(t){return decodeURIComponent(t)}function KN(t){return Rf(t.replace(/\+/g,"%20"))}function WN(t){return`${bv(t.path)}${function g6(t){return Object.entries(t).map(([e,n])=>`;${bv(e)}=${bv(n)}`).join("")}(t.parameters)}`}const y6=/^[^\/()?;#]+/;function kv(t){const e=t.match(y6);return e?e[0]:""}const _6=/^[^\/()?;=#]+/,C6=/^[^=?&#]+/,I6=/^[^&#]+/;class w6{url;remaining;constructor(e){this.url=e,this.remaining=e}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new _e([],{}):new _e([],this.parseChildren())}parseQueryParams(){const e={};if(this.consumeOptional("?"))do{this.parseQueryParam(e)}while(this.consumeOptional("&"));return e}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const e=[];for(this.peekStartsWith("(")||e.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),e.push(this.parseSegment());let n={};this.peekStartsWith("/(")&&(this.capture("/"),n=this.parseParens(!0));let r={};return this.peekStartsWith("(")&&(r=this.parseParens(!1)),(e.length>0||Object.keys(n).length>0)&&(r[ee]=new _e(e,n)),r}parseSegment(){const e=kv(this.remaining);if(""===e&&this.peekStartsWith(";"))throw new I(4009,!1);return this.capture(e),new Oc(Rf(e),this.parseMatrixParams())}parseMatrixParams(){const e={};for(;this.consumeOptional(";");)this.parseParam(e);return e}parseParam(e){const n=function v6(t){const e=t.match(_6);return e?e[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const o=kv(this.remaining);o&&(r=o,this.capture(r))}e[Rf(n)]=Rf(r)}parseQueryParam(e){const n=function E6(t){const e=t.match(C6);return e?e[0]:""}(this.remaining);if(!n)return;this.capture(n);let r="";if(this.consumeOptional("=")){const s=function T6(t){const e=t.match(I6);return e?e[0]:""}(this.remaining);s&&(r=s,this.capture(r))}const o=KN(n),i=KN(r);if(e.hasOwnProperty(o)){let s=e[o];Array.isArray(s)||(s=[s],e[o]=s),s.push(i)}else e[o]=i}parseParens(e){const n={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const r=kv(this.remaining),o=this.remaining[r.length];if("/"!==o&&")"!==o&&";"!==o)throw new I(4010,!1);let i;r.indexOf(":")>-1?(i=r.slice(0,r.indexOf(":")),this.capture(i),this.capture(":")):e&&(i=ee);const s=this.parseChildren();n[i??ee]=1===Object.keys(s).length&&s[ee]?s[ee]:new _e([],s),this.consumeOptional("//")}return n}peekStartsWith(e){return this.remaining.startsWith(e)}consumeOptional(e){return!!this.peekStartsWith(e)&&(this.remaining=this.remaining.substring(e.length),!0)}capture(e){if(!this.consumeOptional(e))throw new I(4011,!1)}}function YN(t){return t.segments.length>0?new _e([],{[ee]:t}):t}function QN(t){const e={};for(const[r,o]of Object.entries(t.children)){const i=QN(o);if(r===ee&&0===i.segments.length&&i.hasChildren())for(const[s,a]of Object.entries(i.children))e[s]=a;else(i.segments.length>0||i.hasChildren())&&(e[r]=i)}return function D6(t){if(1===t.numberOfChildren&&t.children[ee]){const e=t.children[ee];return new _e(t.segments.concat(e.segments),e.children)}return t}(new _e(t.segments,e))}function si(t){return t instanceof Qn}function JN(t){let e;const o=YN(function n(i){const s={};for(const c of i.children){const u=n(c);s[c.outlet]=u}const a=new _e(i.url,s);return i===t&&(e=a),a}(t.root));return e??o}function ZN(t,e,n,r,o){let i=t;for(;i.parent;)i=i.parent;if(0===e.length)return Rv(i,i,i,n,r,o);const s=function A6(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new tO(!0,0,t);let e=0,n=!1;const r=t.reduce((o,i,s)=>{if("object"==typeof i&&null!=i){if(i.outlets){const a={};return Object.entries(i.outlets).forEach(([c,u])=>{a[c]="string"==typeof u?u.split("/"):u}),[...o,{outlets:a}]}if(i.segmentPath)return[...o,i.segmentPath]}return"string"!=typeof i?[...o,i]:0===s?(i.split("/").forEach((a,c)=>{0==c&&"."===a||(0==c&&""===a?n=!0:".."===a?e++:""!=a&&o.push(a))}),o):[...o,i]},[]);return new tO(n,e,r)}(e);if(s.toRoot())return Rv(i,i,new _e([],{}),n,r,o);const a=function b6(t,e,n){if(t.isAbsolute)return new Nf(e,!0,0);if(!n)return new Nf(e,!1,NaN);if(null===n.parent)return new Nf(n,!0,0);const r=Mf(t.commands[0])?0:1;return function k6(t,e,n){let r=t,o=e,i=n;for(;i>o;){if(i-=o,r=r.parent,!r)throw new I(4005,!1);o=r.segments.length}return new Nf(r,!1,o-i)}(n,n.segments.length-1+r,t.numberOfDoubleDots)}(s,i,t),c=a.processChildren?Uc(a.segmentGroup,a.index,s.commands):nO(a.segmentGroup,a.index,s.commands);return Rv(i,a.segmentGroup,c,n,r,o)}function Mf(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function Lc(t){return"object"==typeof t&&null!=t&&t.outlets}function XN(t,e,n){t||="\u0275";const r=new Qn;return r.queryParams={[t]:e},n.parse(n.serialize(r)).queryParams[t]}function Rv(t,e,n,r,o,i){const s={};for(const[u,l]of Object.entries(r??{}))s[u]=Array.isArray(l)?l.map(d=>XN(u,d,i)):XN(u,l,i);let a;a=t===e?n:eO(t,e,n);const c=YN(QN(a));return new Qn(c,s,o)}function eO(t,e,n){const r={};return Object.entries(t.children).forEach(([o,i])=>{r[o]=i===e?n:eO(i,e,n)}),new _e(t.segments,r)}class tO{isAbsolute;numberOfDoubleDots;commands;constructor(e,n,r){if(this.isAbsolute=e,this.numberOfDoubleDots=n,this.commands=r,e&&r.length>0&&Mf(r[0]))throw new I(4003,!1);const o=r.find(Lc);if(o&&o!==function s6(t){return t.length>0?t[t.length-1]:null}(r))throw new I(4004,!1)}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Nf{segmentGroup;processChildren;index;constructor(e,n,r){this.segmentGroup=e,this.processChildren=n,this.index=r}}function nO(t,e,n){if(t??=new _e([],{}),0===t.segments.length&&t.hasChildren())return Uc(t,e,n);const r=function M6(t,e,n){let r=0,o=e;const i={match:!1,pathIndex:0,commandIndex:0};for(;o<t.segments.length;){if(r>=n.length)return i;const s=t.segments[o],a=n[r];if(Lc(a))break;const c=`${a}`,u=r<n.length-1?n[r+1]:null;if(o>0&&void 0===c)break;if(c&&u&&"object"==typeof u&&void 0===u.outlets){if(!oO(c,u,s))return i;r+=2}else{if(!oO(c,{},s))return i;r++}o++}return{match:!0,pathIndex:o,commandIndex:r}}(t,e,n),o=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const i=new _e(t.segments.slice(0,r.pathIndex),{});return i.children[ee]=new _e(t.segments.slice(r.pathIndex),t.children),Uc(i,0,o)}return r.match&&0===o.length?new _e(t.segments,{}):r.match&&!t.hasChildren()?Mv(t,e,n):r.match?Uc(t,0,o):Mv(t,e,n)}function Uc(t,e,n){if(0===n.length)return new _e(t.segments,{});{const r=function R6(t){return Lc(t[0])?t[0].outlets:{[ee]:t}}(n),o={};if(Object.keys(r).some(i=>i!==ee)&&t.children[ee]&&1===t.numberOfChildren&&0===t.children[ee].segments.length){const i=Uc(t.children[ee],e,n);return new _e(t.segments,i.children)}return Object.entries(r).forEach(([i,s])=>{"string"==typeof s&&(s=[s]),null!==s&&(o[i]=nO(t.children[i],e,s))}),Object.entries(t.children).forEach(([i,s])=>{void 0===r[i]&&(o[i]=s)}),new _e(t.segments,o)}}function Mv(t,e,n){const r=t.segments.slice(0,e);let o=0;for(;o<n.length;){const i=n[o];if(Lc(i)){const c=N6(i.outlets);return new _e(r,c)}if(0===o&&Mf(n[0])){r.push(new Oc(t.segments[e].path,rO(n[0]))),o++;continue}const s=Lc(i)?i.outlets[ee]:`${i}`,a=o<n.length-1?n[o+1]:null;s&&a&&Mf(a)?(r.push(new Oc(s,rO(a))),o+=2):(r.push(new Oc(s,{})),o++)}return new _e(r,{})}function N6(t){const e={};return Object.entries(t).forEach(([n,r])=>{"string"==typeof r&&(r=[r]),null!==r&&(e[n]=Mv(new _e([],{}),0,r))}),e}function rO(t){const e={};return Object.entries(t).forEach(([n,r])=>e[n]=`${r}`),e}function oO(t,e,n){return t==n.path&&Yn(e,n.parameters)}const Hc="imperative";var oe=function(t){return t[t.NavigationStart=0]="NavigationStart",t[t.NavigationEnd=1]="NavigationEnd",t[t.NavigationCancel=2]="NavigationCancel",t[t.NavigationError=3]="NavigationError",t[t.RoutesRecognized=4]="RoutesRecognized",t[t.ResolveStart=5]="ResolveStart",t[t.ResolveEnd=6]="ResolveEnd",t[t.GuardsCheckStart=7]="GuardsCheckStart",t[t.GuardsCheckEnd=8]="GuardsCheckEnd",t[t.RouteConfigLoadStart=9]="RouteConfigLoadStart",t[t.RouteConfigLoadEnd=10]="RouteConfigLoadEnd",t[t.ChildActivationStart=11]="ChildActivationStart",t[t.ChildActivationEnd=12]="ChildActivationEnd",t[t.ActivationStart=13]="ActivationStart",t[t.ActivationEnd=14]="ActivationEnd",t[t.Scroll=15]="Scroll",t[t.NavigationSkipped=16]="NavigationSkipped",t}(oe||{});class Jn{id;url;constructor(e,n){this.id=e,this.url=n}}class Of extends Jn{type=oe.NavigationStart;navigationTrigger;restoredState;constructor(e,n,r="imperative",o=null){super(e,n),this.navigationTrigger=r,this.restoredState=o}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class Dr extends Jn{urlAfterRedirects;type=oe.NavigationEnd;constructor(e,n,r){super(e,n),this.urlAfterRedirects=r}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}var zt=function(t){return t[t.Redirect=0]="Redirect",t[t.SupersededByNewNavigation=1]="SupersededByNewNavigation",t[t.NoDataFromResolver=2]="NoDataFromResolver",t[t.GuardRejected=3]="GuardRejected",t[t.Aborted=4]="Aborted",t}(zt||{}),Pf=function(t){return t[t.IgnoredSameUrlNavigation=0]="IgnoredSameUrlNavigation",t[t.IgnoredByUrlHandlingStrategy=1]="IgnoredByUrlHandlingStrategy",t}(Pf||{});class to extends Jn{reason;code;type=oe.NavigationCancel;constructor(e,n,r,o){super(e,n),this.reason=r,this.code=o}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class As extends Jn{reason;code;type=oe.NavigationSkipped;constructor(e,n,r,o){super(e,n),this.reason=r,this.code=o}}class Nv extends Jn{error;target;type=oe.NavigationError;constructor(e,n,r,o){super(e,n),this.error=r,this.target=o}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class iO extends Jn{urlAfterRedirects;state;type=oe.RoutesRecognized;constructor(e,n,r,o){super(e,n),this.urlAfterRedirects=r,this.state=o}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class P6 extends Jn{urlAfterRedirects;state;type=oe.GuardsCheckStart;constructor(e,n,r,o){super(e,n),this.urlAfterRedirects=r,this.state=o}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class x6 extends Jn{urlAfterRedirects;state;shouldActivate;type=oe.GuardsCheckEnd;constructor(e,n,r,o,i){super(e,n),this.urlAfterRedirects=r,this.state=o,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class F6 extends Jn{urlAfterRedirects;state;type=oe.ResolveStart;constructor(e,n,r,o){super(e,n),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class L6 extends Jn{urlAfterRedirects;state;type=oe.ResolveEnd;constructor(e,n,r,o){super(e,n),this.urlAfterRedirects=r,this.state=o}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class U6{route;type=oe.RouteConfigLoadStart;constructor(e){this.route=e}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class H6{route;type=oe.RouteConfigLoadEnd;constructor(e){this.route=e}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class B6{snapshot;type=oe.ChildActivationStart;constructor(e){this.snapshot=e}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class V6{snapshot;type=oe.ChildActivationEnd;constructor(e){this.snapshot=e}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class j6{snapshot;type=oe.ActivationStart;constructor(e){this.snapshot=e}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class $6{snapshot;type=oe.ActivationEnd;constructor(e){this.snapshot=e}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class sO{routerEvent;position;anchor;scrollBehavior;type=oe.Scroll;constructor(e,n,r,o){this.routerEvent=e,this.position=n,this.anchor=r,this.scrollBehavior=o}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}class Ov{}class xf{url;navigationBehaviorOptions;constructor(e,n){this.url=e,this.navigationBehaviorOptions=n}}class z6{rootInjector;outlet=null;route=null;children;attachRef=null;get injector(){return this.route?.snapshot._environmentInjector??this.rootInjector}constructor(e){this.rootInjector=e,this.children=new Bc(this.rootInjector)}}let Bc=(()=>{class t{rootInjector;contexts=new Map;constructor(n){this.rootInjector=n}onChildOutletCreated(n,r){const o=this.getOrCreateContext(n);o.outlet=r,this.contexts.set(n,o)}onChildOutletDestroyed(n){const r=this.getContext(n);r&&(r.outlet=null,r.attachRef=null)}onOutletDeactivated(){const n=this.contexts;return this.contexts=new Map,n}onOutletReAttached(n){this.contexts=n}getOrCreateContext(n){let r=this.getContext(n);return r||(r=new z6(this.rootInjector),this.contexts.set(n,r)),r}getContext(n){return this.contexts.get(n)||null}static \u0275fac=function(r){return new(r||t)(F(ot))};static \u0275prov=M({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();class aO{_root;constructor(e){this._root=e}get root(){return this._root.value}parent(e){const n=this.pathFromRoot(e);return n.length>1?n[n.length-2]:null}children(e){const n=Pv(e,this._root);return n?n.children.map(r=>r.value):[]}firstChild(e){const n=Pv(e,this._root);return n&&n.children.length>0?n.children[0].value:null}siblings(e){const n=xv(e,this._root);return n.length<2?[]:n[n.length-2].children.map(o=>o.value).filter(o=>o!==e)}pathFromRoot(e){return xv(e,this._root).map(n=>n.value)}}function Pv(t,e){if(t===e.value)return e;for(const n of e.children){const r=Pv(t,n);if(r)return r}return null}function xv(t,e){if(t===e.value)return[e];for(const n of e.children){const r=xv(t,n);if(r.length)return r.unshift(e),r}return[]}class Rn{value;children;constructor(e,n){this.value=e,this.children=n}toString(){return`TreeNode(${this.value})`}}function bs(t){const e={};return t&&t.children.forEach(n=>e[n.value.outlet]=n),e}class cO extends aO{snapshot;constructor(e,n){super(e),this.snapshot=n,Fv(this,e)}toString(){return this.snapshot.toString()}}function uO(t,e){const n=function q6(t,e){const s=new Lf([],{},{},"",{},ee,t,null,{},e);return new lO("",new Rn(s,[]))}(t,e),r=new on([new Oc("",{})]),o=new on({}),i=new on({}),s=new on({}),a=new on(""),c=new ks(r,o,s,a,i,ee,t,n.root);return c.snapshot=n.root,new cO(new Rn(c,[]),n)}class ks{urlSubject;paramsSubject;queryParamsSubject;fragmentSubject;dataSubject;outlet;component;snapshot;_futureSnapshot;_routerState;_paramMap;_queryParamMap;title;url;params;queryParams;fragment;data;constructor(e,n,r,o,i,s,a,c){this.urlSubject=e,this.paramsSubject=n,this.queryParamsSubject=r,this.fragmentSubject=o,this.dataSubject=i,this.outlet=s,this.component=a,this._futureSnapshot=c,this.title=this.dataSubject?.pipe(Be(u=>u[Nc]))??te(void 0),this.url=e,this.params=n,this.queryParams=r,this.fragment=o,this.data=i}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=this.params.pipe(Be(e=>Ss(e))),this._paramMap}get queryParamMap(){return this._queryParamMap??=this.queryParams.pipe(Be(e=>Ss(e))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function Ff(t,e,n="emptyOnly"){let r;const{routeConfig:o}=t;return r=null===e||"always"!==n&&""!==o?.path&&(e.component||e.routeConfig?.loadComponent)?{params:{...t.params},data:{...t.data},resolve:{...t.data,...t._resolvedData??{}}}:{params:{...e.params,...t.params},data:{...e.data,...t.data},resolve:{...t.data,...e.data,...o?.data,...t._resolvedData}},o&&fO(o)&&(r.resolve[Nc]=o.title),r}class Lf{url;params;queryParams;fragment;data;outlet;component;routeConfig;_resolve;_resolvedData;_routerState;_paramMap;_queryParamMap;_environmentInjector;get title(){return this.data?.[Nc]}constructor(e,n,r,o,i,s,a,c,u,l){this.url=e,this.params=n,this.queryParams=r,this.fragment=o,this.data=i,this.outlet=s,this.component=a,this.routeConfig=c,this._resolve=u,this._environmentInjector=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap??=Ss(this.params),this._paramMap}get queryParamMap(){return this._queryParamMap??=Ss(this.queryParams),this._queryParamMap}toString(){return`Route(url:'${this.url.map(r=>r.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class lO extends aO{url;constructor(e,n){super(n),this.url=e,Fv(this,n)}toString(){return dO(this._root)}}function Fv(t,e){e.value._routerState=t,e.children.forEach(n=>Fv(t,n))}function dO(t){const e=t.children.length>0?` { ${t.children.map(dO).join(", ")} } `:"";return`${t.value}${e}`}function Lv(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Yn(e.queryParams,n.queryParams)||t.queryParamsSubject.next(n.queryParams),e.fragment!==n.fragment&&t.fragmentSubject.next(n.fragment),Yn(e.params,n.params)||t.paramsSubject.next(n.params),function i6(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Yn(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.urlSubject.next(n.url),Yn(e.data,n.data)||t.dataSubject.next(n.data)}else t.snapshot=t._futureSnapshot,t.dataSubject.next(t._futureSnapshot.data)}function Uv(t,e){const n=Yn(t.params,e.params)&&function d6(t,e){return ii(t,e)&&t.every((n,r)=>Yn(n.parameters,e[r].parameters))}(t.url,e.url);return n&&!(!t.parent!=!e.parent)&&(!t.parent||Uv(t.parent,e.parent))}function fO(t){return"string"==typeof t.title||null===t.title}const K6=new S("");let Hv=(()=>{class t{activated=null;get activatedComponentRef(){return this.activated}_activatedRoute=null;name=ee;activateEvents=new qe;deactivateEvents=new qe;attachEvents=new qe;detachEvents=new qe;routerOutletData=XK();parentContexts=E(Bc);location=E(An);changeDetector=E(Tc);inputBinder=E(Uf,{optional:!0});supportsBindingToComponentInputs=!0;ngOnChanges(n){if(n.name){const{firstChange:r,previousValue:o}=n.name;if(r)return;this.isTrackedInParentContexts(o)&&(this.deactivate(),this.parentContexts.onChildOutletDestroyed(o)),this.initializeOutletWithName()}}ngOnDestroy(){this.isTrackedInParentContexts(this.name)&&this.parentContexts.onChildOutletDestroyed(this.name),this.inputBinder?.unsubscribeFromRouteData(this)}isTrackedInParentContexts(n){return this.parentContexts.getContext(n)?.outlet===this}ngOnInit(){this.initializeOutletWithName()}initializeOutletWithName(){if(this.parentContexts.onChildOutletCreated(this.name,this),this.activated)return;const n=this.parentContexts.getContext(this.name);n?.route&&(n.attachRef?this.attach(n.attachRef,n.route):this.activateWith(n.route,n.injector))}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new I(4012,!1);return this.activated.instance}get activatedRoute(){if(!this.activated)throw new I(4012,!1);return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new I(4012,!1);this.location.detach();const n=this.activated;return this.activated=null,this._activatedRoute=null,this.detachEvents.emit(n.instance),n}attach(n,r){this.activated=n,this._activatedRoute=r,this.location.insert(n.hostView),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.attachEvents.emit(n.instance)}deactivate(){if(this.activated){const n=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(n)}}activateWith(n,r){if(this.isActivated)throw new I(4013,!1);this._activatedRoute=n;const o=this.location,s=n.snapshot.component,a=this.parentContexts.getOrCreateContext(this.name).children,c=new W6(n,a,o.injector,this.routerOutletData);this.activated=o.createComponent(s,{index:o.length,injector:c,environmentInjector:r}),this.changeDetector.markForCheck(),this.inputBinder?.bindActivatedRouteToOutletComponent(this),this.activateEvents.emit(this.activated.instance)}static \u0275fac=function(r){return new(r||t)};static \u0275dir=z({type:t,selectors:[["router-outlet"]],inputs:{name:"name",routerOutletData:[1,"routerOutletData"]},outputs:{activateEvents:"activate",deactivateEvents:"deactivate",attachEvents:"attach",detachEvents:"detach"},exportAs:["outlet"],features:[Dn]})}return t})();class W6{route;childContexts;parent;outletData;constructor(e,n,r,o){this.route=e,this.childContexts=n,this.parent=r,this.outletData=o}get(e,n){return e===ks?this.route:e===Bc?this.childContexts:e===K6?this.outletData:this.parent.get(e,n)}}const Uf=new S("");let hO=(()=>{class t{outletDataSubscriptions=new Map;bindActivatedRouteToOutletComponent(n){this.unsubscribeFromRouteData(n),this.subscribeToRouteData(n)}unsubscribeFromRouteData(n){this.outletDataSubscriptions.get(n)?.unsubscribe(),this.outletDataSubscriptions.delete(n)}subscribeToRouteData(n){const{activatedRoute:r}=n,o=xN([r.queryParams,r.params,r.data]).pipe(mn(([i,s,a],c)=>(a={...i,...s,...a},0===c?te(a):Promise.resolve(a)))).subscribe(i=>{if(!n.isActivated||!n.activatedComponentRef||n.activatedRoute!==r||null===r.component)return void this.unsubscribeFromRouteData(n);const s=function e8(t){const e=ae(t);if(!e)return null;const n=new Cd(e);return{get selector(){return n.selector},get type(){return n.componentType},get inputs(){return n.inputs},get outputs(){return n.outputs},get ngContentSelectors(){return n.ngContentSelectors},get isStandalone(){return e.standalone},get isSignal(){return e.signals}}}(r.component);if(s)for(const{templateName:a}of s.inputs)n.activatedComponentRef.setInput(a,i[a]);else this.unsubscribeFromRouteData(n)});this.outletDataSubscriptions.set(n,o)}static \u0275fac=function(r){return new(r||t)};static \u0275prov=M({token:t,factory:t.\u0275fac})}return t})(),pO=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275cmp=is({type:t,selectors:[["ng-component"]],exportAs:["emptyRouterOutlet"],decls:1,vars:0,template:function(r,o){1&r&&jd(0,"router-outlet")},dependencies:[Hv],encapsulation:2})}return t})();function Bv(t){const e=t.children&&t.children.map(Bv),n=e?{...t,children:e}:{...t};return!n.component&&!n.loadComponent&&(e||n.loadChildren)&&n.outlet&&n.outlet!==ee&&(n.component=pO),n}function Vc(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const o=function Q6(t,e,n){return e.children.map(r=>{for(const o of n.children)if(t.shouldReuseRoute(r.value,o.value.snapshot))return Vc(t,r,o);return Vc(t,r)})}(t,e,n);return new Rn(r,o)}{if(t.shouldAttach(e.value)){const i=t.retrieve(e.value);if(null!==i){const s=i.route;return s.value._futureSnapshot=e.value,s.children=e.children.map(a=>Vc(t,a)),s}}const r=function J6(t){return new ks(new on(t.url),new on(t.params),new on(t.queryParams),new on(t.fragment),new on(t.data),t.outlet,t.component,t)}(e.value),o=e.children.map(i=>Vc(t,i));return new Rn(r,o)}}class Vv{redirectTo;navigationBehaviorOptions;constructor(e,n){this.redirectTo=e,this.navigationBehaviorOptions=n}}const gO="ngNavigationCancelingError";function Hf(t,e){const{redirectTo:n,navigationBehaviorOptions:r}=si(e)?{redirectTo:e,navigationBehaviorOptions:void 0}:e,o=mO(!1,zt.Redirect);return o.url=n,o.navigationBehaviorOptions=r,o}function mO(t,e){const n=new Error(`NavigationCancelingError: ${t||""}`);return n[gO]=!0,n.cancellationCode=e,n}function yO(t){return!!t&&t[gO]}class X6{routeReuseStrategy;futureState;currState;forwardEvent;inputBindingEnabled;constructor(e,n,r,o,i){this.routeReuseStrategy=e,this.futureState=n,this.currState=r,this.forwardEvent=o,this.inputBindingEnabled=i}activate(e){const n=this.futureState._root,r=this.currState?this.currState._root:null;this.deactivateChildRoutes(n,r,e),Lv(this.futureState.root),this.activateChildRoutes(n,r,e)}deactivateChildRoutes(e,n,r){const o=bs(n);e.children.forEach(i=>{const s=i.value.outlet;this.deactivateRoutes(i,o[s],r),delete o[s]}),Object.values(o).forEach(i=>{this.deactivateRouteAndItsChildren(i,r)})}deactivateRoutes(e,n,r){const o=e.value,i=n?n.value:null;if(o===i)if(o.component){const s=r.getContext(o.outlet);s&&this.deactivateChildRoutes(e,n,s.children)}else this.deactivateChildRoutes(e,n,r);else i&&this.deactivateRouteAndItsChildren(n,r)}deactivateRouteAndItsChildren(e,n){e.value.component&&this.routeReuseStrategy.shouldDetach(e.value.snapshot)?this.detachAndStoreRouteSubtree(e,n):this.deactivateRouteAndOutlet(e,n)}detachAndStoreRouteSubtree(e,n){const r=n.getContext(e.value.outlet),o=r&&e.value.component?r.children:n,i=bs(e);for(const s of Object.values(i))this.deactivateRouteAndItsChildren(s,o);if(r&&r.outlet){const s=r.outlet.detach(),a=r.children.onOutletDeactivated();this.routeReuseStrategy.store(e.value.snapshot,{componentRef:s,route:e,contexts:a})}}deactivateRouteAndOutlet(e,n){const r=n.getContext(e.value.outlet),o=r&&e.value.component?r.children:n,i=bs(e);for(const s of Object.values(i))this.deactivateRouteAndItsChildren(s,o);r&&(r.outlet&&(r.outlet.deactivate(),r.children.onOutletDeactivated()),r.attachRef=null,r.route=null)}activateChildRoutes(e,n,r){const o=bs(n);e.children.forEach(i=>{this.activateRoutes(i,o[i.value.outlet],r),this.forwardEvent(new $6(i.value.snapshot))}),e.children.length&&this.forwardEvent(new V6(e.value.snapshot))}activateRoutes(e,n,r){const o=e.value,i=n?n.value:null;if(Lv(o),o===i)if(o.component){const s=r.getOrCreateContext(o.outlet);this.activateChildRoutes(e,n,s.children)}else this.activateChildRoutes(e,n,r);else if(o.component){const s=r.getOrCreateContext(o.outlet);if(this.routeReuseStrategy.shouldAttach(o.snapshot)){const a=this.routeReuseStrategy.retrieve(o.snapshot);this.routeReuseStrategy.store(o.snapshot,null),s.children.onOutletReAttached(a.contexts),s.attachRef=a.componentRef,s.route=a.route.value,s.outlet&&s.outlet.attach(a.componentRef,a.route.value),Lv(a.route.value),this.activateChildRoutes(e,null,s.children)}else s.attachRef=null,s.route=o,s.outlet&&s.outlet.activateWith(o,s.injector),this.activateChildRoutes(e,null,s.children)}else this.activateChildRoutes(e,null,r)}}class _O{path;route;constructor(e){this.path=e,this.route=this.path[this.path.length-1]}}class Bf{component;route;constructor(e,n){this.component=e,this.route=n}}function e5(t,e,n){const r=t._root;return jc(r,e?e._root:null,n,[r.value])}function Rs(t,e){const n=Symbol(),r=e.get(t,n);return r===n?"function"!=typeof t||function hF(t){return null!==ju(t)}(t)?e.get(t):t:r}function jc(t,e,n,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const i=bs(e);return t.children.forEach(s=>{(function n5(t,e,n,r,o={canDeactivateChecks:[],canActivateChecks:[]}){const i=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&i.routeConfig===s.routeConfig){const c=function r5(t,e,n){if("function"==typeof n)return Dt(e._environmentInjector,()=>n(t,e));switch(n){case"pathParamsChange":return!ii(t.url,e.url);case"pathParamsOrQueryParamsChange":return!ii(t.url,e.url)||!Yn(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!Uv(t,e)||!Yn(t.queryParams,e.queryParams);default:return!Uv(t,e)}}(s,i,i.routeConfig.runGuardsAndResolvers);c?o.canActivateChecks.push(new _O(r)):(i.data=s.data,i._resolvedData=s._resolvedData),jc(t,e,i.component?a?a.children:null:n,r,o),c&&a&&a.outlet&&a.outlet.isActivated&&o.canDeactivateChecks.push(new Bf(a.outlet.component,s))}else s&&$c(e,a,o),o.canActivateChecks.push(new _O(r)),jc(t,null,i.component?a?a.children:null:n,r,o)})(s,i[s.value.outlet],n,r.concat([s.value]),o),delete i[s.value.outlet]}),Object.entries(i).forEach(([s,a])=>$c(a,n.getContext(s),o)),o}function $c(t,e,n){const r=bs(t),o=t.value;Object.entries(r).forEach(([i,s])=>{$c(s,o.component?e?e.children.getContext(i):null:e,n)}),n.canDeactivateChecks.push(new Bf(o.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,o))}function Gc(t){return"function"==typeof t}function vO(t){return t instanceof vv||"EmptyError"===t?.name}const Vf=Symbol("INITIAL_VALUE");function Ms(){return mn(t=>xN(t.map(e=>e.pipe(Ds(1),function Z4(...t){const e=wf(t);return Rt((n,r)=>{(e?Cv(t,n,e):Cv(t,n)).subscribe(r)})}(Vf)))).pipe(Be(e=>{for(const n of e)if(!0!==n){if(n===Vf)return Vf;if(!1===n||l5(n))return n}return!0}),Zr(e=>e!==Vf),Ds(1)))}function l5(t){return si(t)||t instanceof Vv}function CO(t){return t.aborted?te(void 0).pipe(Ds(1)):new Ge(e=>{const n=()=>{e.next(),e.complete()};return t.addEventListener("abort",n),()=>t.removeEventListener("abort",n)})}function EO(t){return Tv(CO(t))}function IO(t){return function Xx(...t){return mI(t)}(Xr(e=>{if("boolean"!=typeof e)throw Hf(0,e)}),Be(e=>!0===e))}class Sr extends Error{segmentGroup;constructor(e){super(),this.segmentGroup=e||null,Object.setPrototypeOf(this,Sr.prototype)}}class zc extends Error{urlTree;constructor(e){super(),this.urlTree=e,Object.setPrototypeOf(this,zc.prototype)}}function E5(t){throw new I(4e3,!1)}class T5{urlSerializer;urlTree;constructor(e,n){this.urlSerializer=e,this.urlTree=n}lineralizeSegments(e,n){return y(function*(){let r=[],o=n.root;for(;;){if(r=r.concat(o.segments),0===o.numberOfChildren)return r;if(o.numberOfChildren>1||!o.children[ee])throw E5();o=o.children[ee]}})()}applyRedirectCommands(e,n,r,o,i){var s=this;return y(function*(){const a=yield function w5(t,e,n){if("string"==typeof t)return Promise.resolve(t);const r=t,{queryParams:o,fragment:i,routeConfig:s,url:a,outlet:c,params:u,data:l,title:d,paramMap:f,queryParamMap:h}=e;return Sf(oi(Dt(n,()=>r({params:u,data:l,queryParams:o,fragment:i,routeConfig:s,url:a,outlet:c,title:d,paramMap:f,queryParamMap:h}))))}(n,o,i);if(a instanceof Qn)throw new zc(a);const c=s.applyRedirectCreateUrlTree(a,s.urlSerializer.parse(a),e,r);if("/"===a[0])throw new zc(c);return c})()}applyRedirectCreateUrlTree(e,n,r,o){const i=this.createSegmentGroup(e,n.root,r,o);return new Qn(i,this.createQueryParams(n.queryParams,this.urlTree.queryParams),n.fragment)}createQueryParams(e,n){const r={};return Object.entries(e).forEach(([o,i])=>{if("string"==typeof i&&":"===i[0]){const a=i.substring(1);r[o]=n[a]}else r[o]=i}),r}createSegmentGroup(e,n,r,o){const i=this.createSegments(e,n.segments,r,o);let s={};return Object.entries(n.children).forEach(([a,c])=>{s[a]=this.createSegmentGroup(e,c,r,o)}),new _e(i,s)}createSegments(e,n,r,o){return n.map(i=>":"===i.path[0]?this.findPosParam(e,i,o):this.findOrReturn(i,r))}findPosParam(e,n,r){const o=r[n.path.substring(1)];if(!o)throw new I(4001,!1);return o}findOrReturn(e,n){let r=0;for(const o of n){if(o.path===e.path)return n.splice(r),o;r++}return e}}function Mn(t){return t.outlet||ee}function k5(t,e){const n=t.filter(r=>Mn(r)===e);return n.push(...t.filter(r=>Mn(r)!==e)),n}const jv={matched:!1,consumedSegments:[],remainingSegments:[],parameters:{},positionalParamSegments:{}};function R5(t,e,n,r,o,i){const s=TO(t,e,n);return s.matched?(r=function D5(t,e){return t.providers&&!t._injector&&(t._injector=Ed(t.providers,e,`Route: ${t.path}`)),t._injector??e}(e,r),function C5(t,e,n,r,o){const i=e.canMatch;return i&&0!==i.length?te(i.map(a=>{const c=Rs(a,t);return oi(function u5(t){return t&&Gc(t.canMatch)}(c)?c.canMatch(e,n):Dt(t,()=>c(e,n))).pipe(EO(o))})).pipe(Ms(),IO()):te(!0)}(r,e,n,0,i).pipe(Be(a=>!0===a?s:{...jv}))):te(s)}function TO(t,e,n){if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?{...jv}:{matched:!0,consumedSegments:[],remainingSegments:n,parameters:{},positionalParamSegments:{}};const o=(e.matcher||o6)(n,t,e);if(!o)return{...jv};const i={};Object.entries(o.posParams??{}).forEach(([a,c])=>{i[a]=c.path});const s=o.consumed.length>0?{...i,...o.consumed[o.consumed.length-1].parameters}:i;return{matched:!0,consumedSegments:o.consumed,remainingSegments:n.slice(o.consumed.length),parameters:s,positionalParamSegments:o.posParams??{}}}function wO(t,e,n,r){return n.length>0&&function O5(t,e,n){return n.some(r=>jf(t,e,r)&&Mn(r)!==ee)}(t,n,r)?{segmentGroup:new _e(e,N5(r,new _e(n,t.children))),slicedSegments:[]}:0===n.length&&function P5(t,e,n){return n.some(r=>jf(t,e,r))}(t,n,r)?{segmentGroup:new _e(t.segments,M5(t,n,r,t.children)),slicedSegments:n}:{segmentGroup:new _e(t.segments,t.children),slicedSegments:n}}function M5(t,e,n,r){const o={};for(const i of n)if(jf(t,e,i)&&!r[Mn(i)]){const s=new _e([],{});o[Mn(i)]=s}return{...r,...o}}function N5(t,e){const n={};n[ee]=e;for(const r of t)if(""===r.path&&Mn(r)!==ee){const o=new _e([],{});n[Mn(r)]=o}return n}function jf(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}class F5{}function $v(){return($v=y(function*(t,e,n,r,o,i,s="emptyOnly",a){return new H5(t,e,n,r,o,s,i,a).recognize()})).apply(this,arguments)}class H5{injector;configLoader;rootComponentType;config;urlTree;paramsInheritanceStrategy;urlSerializer;abortSignal;applyRedirects;absoluteRedirectCount=0;allowRedirects=!0;constructor(e,n,r,o,i,s,a,c){this.injector=e,this.configLoader=n,this.rootComponentType=r,this.config=o,this.urlTree=i,this.paramsInheritanceStrategy=s,this.urlSerializer=a,this.abortSignal=c,this.applyRedirects=new T5(this.urlSerializer,this.urlTree)}noMatchError(e){return new I(4002,`'${e.segmentGroup}'`)}recognize(){var e=this;return y(function*(){const n=wO(e.urlTree.root,[],[],e.config).segmentGroup,{children:r,rootSnapshot:o}=yield e.match(n),i=new Rn(o,r),s=new lO("",i),a=function S6(t,e,n=null,r=null,o=new xc){return ZN(JN(t),e,n,r,o)}(o,[],e.urlTree.queryParams,e.urlTree.fragment);return a.queryParams=e.urlTree.queryParams,s.url=e.urlSerializer.serialize(a),{state:s,tree:a}})()}match(e){var n=this;return y(function*(){const r=new Lf([],Object.freeze({}),Object.freeze({...n.urlTree.queryParams}),n.urlTree.fragment,Object.freeze({}),ee,n.rootComponentType,null,{},n.injector);try{return{children:yield n.processSegmentGroup(n.injector,n.config,e,ee,r),rootSnapshot:r}}catch(o){if(o instanceof zc)return n.urlTree=o.urlTree,n.match(o.urlTree.root);throw o instanceof Sr?n.noMatchError(o):o}})()}processSegmentGroup(e,n,r,o,i){var s=this;return y(function*(){if(0===r.segments.length&&r.hasChildren())return s.processChildren(e,n,r,i);const a=yield s.processSegment(e,n,r,r.segments,o,!0,i);return a instanceof Rn?[a]:[]})()}processChildren(e,n,r,o){var i=this;return y(function*(){const s=[];for(const u of Object.keys(r.children))"primary"===u?s.unshift(u):s.push(u);let a=[];for(const u of s){const l=r.children[u],d=k5(n,u),f=yield i.processSegmentGroup(e,d,l,u,o);a.push(...f)}const c=DO(a);return function B5(t){t.sort((e,n)=>e.value.outlet===ee?-1:n.value.outlet===ee?1:e.value.outlet.localeCompare(n.value.outlet))}(c),c})()}processSegment(e,n,r,o,i,s,a){var c=this;return y(function*(){for(const u of n)try{return yield c.processSegmentAgainstRoute(u._injector??e,n,u,r,o,i,s,a)}catch(l){if(l instanceof Sr||vO(l))continue;throw l}if(function x5(t,e,n){return 0===e.length&&!t.children[n]}(r,o,i))return new F5;throw new Sr(r)})()}processSegmentAgainstRoute(e,n,r,o,i,s,a,c){var u=this;return y(function*(){if(Mn(r)!==s&&(s===ee||!jf(o,i,r)))throw new Sr(o);if(void 0===r.redirectTo)return u.matchSegmentAgainstRoute(e,o,r,i,s,c);if(u.allowRedirects&&a)return u.expandSegmentAgainstRouteUsingRedirect(e,o,n,r,i,s,c);throw new Sr(o)})()}expandSegmentAgainstRouteUsingRedirect(e,n,r,o,i,s,a){var c=this;return y(function*(){const{matched:u,parameters:l,consumedSegments:d,positionalParamSegments:f,remainingSegments:h}=TO(n,o,i);if(!u)throw new Sr(n);"string"==typeof o.redirectTo&&"/"===o.redirectTo[0]&&(c.absoluteRedirectCount++,c.absoluteRedirectCount>31&&(c.allowRedirects=!1));const p=new Lf(i,l,Object.freeze({...c.urlTree.queryParams}),c.urlTree.fragment,SO(o),Mn(o),o.component??o._loadedComponent??null,o,AO(o),e),m=Ff(p,a,c.paramsInheritanceStrategy);if(p.params=Object.freeze(m.params),p.data=Object.freeze(m.data),c.abortSignal.aborted)throw new Error(c.abortSignal.reason);const _=yield c.applyRedirects.applyRedirectCommands(d,o.redirectTo,f,p,e),C=yield c.applyRedirects.lineralizeSegments(o,_);return c.processSegment(e,r,n,C.concat(h),s,!1,a)})()}matchSegmentAgainstRoute(e,n,r,o,i,s){var a=this;return y(function*(){if(a.abortSignal.aborted)throw new Error(a.abortSignal.reason);const c=yield Sf(R5(n,r,o,e,0,a.abortSignal));if("**"===r.path&&(n.children={}),!c?.matched)throw new Sr(n);e=r._injector??e;const{routes:u}=yield a.getChildConfig(e,r,o),l=r._loadedInjector??e,{parameters:d,consumedSegments:f,remainingSegments:h}=c,p=new Lf(f,d,Object.freeze({...a.urlTree.queryParams}),a.urlTree.fragment,SO(r),Mn(r),r.component??r._loadedComponent??null,r,AO(r),e),m=Ff(p,s,a.paramsInheritanceStrategy);p.params=Object.freeze(m.params),p.data=Object.freeze(m.data);const{segmentGroup:_,slicedSegments:C}=wO(n,f,h,u);if(0===C.length&&_.hasChildren()){const x=yield a.processChildren(l,u,_,p);return new Rn(p,x)}if(0===u.length&&0===C.length)return new Rn(p,[]);const v=Mn(r)===i,N=yield a.processSegment(l,u,_,C,v?ee:i,!0,p);return new Rn(p,N instanceof Rn?[N]:[])})()}getChildConfig(e,n,r){var o=this;return y(function*(){if(n.children)return{routes:n.children,injector:e};if(n.loadChildren){if(void 0!==n._loadedRoutes){const s=n._loadedNgModuleFactory;return s&&!n._loadedInjector&&(n._loadedInjector=s.create(e).injector),{routes:n._loadedRoutes,injector:n._loadedInjector}}if(o.abortSignal.aborted)throw new Error(o.abortSignal.reason);if(yield Sf(function v5(t,e,n,r,o){const i=e.canLoad;return void 0===i||0===i.length?te(!0):te(i.map(a=>{const c=Rs(a,t),l=oi(function i5(t){return t&&Gc(t.canLoad)}(c)?c.canLoad(e,n):Dt(t,()=>c(e,n)));return o?l.pipe(EO(o)):l})).pipe(Ms(),IO())}(e,n,r,0,o.abortSignal))){const s=yield o.configLoader.loadChildren(e,n);return n._loadedRoutes=s.routes,n._loadedInjector=s.injector,n._loadedNgModuleFactory=s.factory,s}throw function I5(){throw mO(!1,zt.GuardRejected)}()}return{routes:[],injector:e}})()}}function V5(t){const e=t.value.routeConfig;return e&&""===e.path}function DO(t){const e=[],n=new Set;for(const r of t){if(!V5(r)){e.push(r);continue}const o=e.find(i=>r.value.routeConfig===i.value.routeConfig);void 0!==o?(o.children.push(...r.children),n.add(o)):e.push(r)}for(const r of n){const o=DO(r.children);e.push(new Rn(r.value,o))}return e.filter(r=>!n.has(r))}function SO(t){return t.data||{}}function AO(t){return t.resolve||{}}function bO(t){const e=t.children.map(n=>bO(n)).flat();return[t,...e]}function kO(t){return mn(e=>{const n=t(e);return n?et(n).pipe(Be(()=>e)):te(e)})}let RO=(()=>{class t{buildTitle(n){let r,o=n.root;for(;void 0!==o;)r=this.getResolvedTitleForRoute(o)??r,o=o.children.find(i=>i.outlet===ee);return r}getResolvedTitleForRoute(n){return n.data[Nc]}static \u0275fac=function(r){return new(r||t)};static \u0275prov=M({token:t,factory:()=>E(K5),providedIn:"root"})}return t})(),K5=(()=>{class t extends RO{title;constructor(n){super(),this.title=n}updateTitle(n){const r=this.buildTitle(n);void 0!==r&&this.title.setTitle(r)}static \u0275fac=function(r){return new(r||t)(F(X4))};static \u0275prov=M({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const Ns=new S("",{factory:()=>({})}),qc=new S("");let Gv=(()=>{class t{componentLoaders=new WeakMap;childrenLoaders=new WeakMap;onLoadStartListener;onLoadEndListener;compiler=E(HK);loadComponent(n,r){var o=this;return y(function*(){if(o.componentLoaders.get(r))return o.componentLoaders.get(r);if(r._loadedComponent)return Promise.resolve(r._loadedComponent);o.onLoadStartListener&&o.onLoadStartListener(r);const i=y(function*(){try{const s=yield VN(Dt(n,()=>r.loadComponent())),a=yield NO(MO(s));return o.onLoadEndListener&&o.onLoadEndListener(r),r._loadedComponent=a,a}finally{o.componentLoaders.delete(r)}})();return o.componentLoaders.set(r,i),i})()}loadChildren(n,r){var o=this;if(this.childrenLoaders.get(r))return this.childrenLoaders.get(r);if(r._loadedRoutes)return Promise.resolve({routes:r._loadedRoutes,injector:r._loadedInjector});this.onLoadStartListener&&this.onLoadStartListener(r);const i=y(function*(){try{const s=yield function W5(t,e,n,r){return zv.apply(this,arguments)}(r,o.compiler,n,o.onLoadEndListener);return r._loadedRoutes=s.routes,r._loadedInjector=s.injector,r._loadedNgModuleFactory=s.factory,s}finally{o.childrenLoaders.delete(r)}})();return this.childrenLoaders.set(r,i),i}static \u0275fac=function(r){return new(r||t)};static \u0275prov=M({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function zv(){return(zv=y(function*(t,e,n,r){const o=yield VN(Dt(n,()=>t.loadChildren())),i=yield NO(MO(o));let s;s=i instanceof OA||Array.isArray(i)?i:yield e.compileModuleAsync(i),r&&r(t);let a,c,l;return Array.isArray(s)?c=s:(a=s.create(n).injector,l=s,c=a.get(qc,[],{optional:!0,self:!0}).flat()),{routes:c.map(Bv),injector:a,factory:l}})).apply(this,arguments)}function MO(t){return function Y5(t){return t&&"object"==typeof t&&"default"in t}(t)?t.default:t}function NO(t){return qv.apply(this,arguments)}function qv(){return(qv=y(function*(t){return t})).apply(this,arguments)}let Kv=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=M({token:t,factory:()=>E(Q5),providedIn:"root"})}return t})(),Q5=(()=>{class t{shouldProcessUrl(n){return!0}extract(n){return n}merge(n,r){return n}static \u0275fac=function(r){return new(r||t)};static \u0275prov=M({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const OO=new S(""),PO=new S("");function J5(t,e,n){const r=t.get(PO),o=t.get(kt);if(!o.startViewTransition||r.skipNextTransition)return r.skipNextTransition=!1,new Promise(u=>setTimeout(u));let i;const s=new Promise(u=>{i=u}),a=o.startViewTransition(()=>(i(),function Z5(t){return new Promise(e=>{Kl({read:()=>setTimeout(e)},{injector:t})})}(t)));a.updateCallbackDone.catch(u=>{}),a.ready.catch(u=>{}),a.finished.catch(u=>{});const{onViewTransitionCreated:c}=r;return c&&Dt(t,()=>c({transition:a,from:e,to:n})),s}const X5=()=>{},xO=new S("");let Wv=(()=>{class t{currentNavigation=wn(null,{equal:()=>!1});currentTransition=null;lastSuccessfulNavigation=wn(null);events=new rn;transitionAbortWithErrorSubject=new rn;configLoader=E(Gv);environmentInjector=E(ot);destroyRef=E(Tn);urlSerializer=E(Pc);rootContexts=E(Bc);location=E(Dc);inputBindingEnabled=null!==E(Uf,{optional:!0});titleStrategy=E(RO);options=E(Ns,{optional:!0})||{};paramsInheritanceStrategy=this.options.paramsInheritanceStrategy||"emptyOnly";urlHandlingStrategy=E(Kv);createViewTransition=E(OO,{optional:!0});navigationErrorHandler=E(xO,{optional:!0});navigationId=0;get hasRequestedNavigation(){return 0!==this.navigationId}transitions;afterPreactivation=()=>te(void 0);rootComponentType=null;destroyed=!1;constructor(){this.configLoader.onLoadEndListener=o=>this.events.next(new H6(o)),this.configLoader.onLoadStartListener=o=>this.events.next(new U6(o)),this.destroyRef.onDestroy(()=>{this.destroyed=!0})}complete(){this.transitions?.complete()}handleNavigationRequest(n){const r=++this.navigationId;fe(()=>{this.transitions?.next({...n,extractedUrl:this.urlHandlingStrategy.extract(n.rawUrl),targetSnapshot:null,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null,id:r})})}setupNavigations(n){return this.transitions=new on(null),this.transitions.pipe(Zr(r=>null!==r),mn(r=>{let o=!1;const i=new AbortController,s=()=>!o&&this.currentTransition?.id===r.id;return te(r).pipe(mn(a=>{if(this.navigationId>r.id)return this.cancelNavigationTransition(r,"",zt.SupersededByNewNavigation),Gt;this.currentTransition=r;const c=this.lastSuccessfulNavigation();this.currentNavigation.set({id:a.id,initialUrl:a.rawUrl,extractedUrl:a.extractedUrl,targetBrowserUrl:"string"==typeof a.extras.browserUrl?this.urlSerializer.parse(a.extras.browserUrl):a.extras.browserUrl,trigger:a.source,extras:a.extras,previousNavigation:c?{...c,previousNavigation:null}:null,abort:()=>i.abort()});const u=!n.navigated||this.isUpdatingInternalState()||this.isUpdatedBrowserUrl();if(!u&&"reload"!==(a.extras.onSameUrlNavigation??n.onSameUrlNavigation))return this.events.next(new As(a.id,this.urlSerializer.serialize(a.rawUrl),"",Pf.IgnoredSameUrlNavigation)),a.resolve(!1),Gt;if(this.urlHandlingStrategy.shouldProcessUrl(a.rawUrl))return te(a).pipe(mn(d=>(this.events.next(new Of(d.id,this.urlSerializer.serialize(d.extractedUrl),d.source,d.restoredState)),d.id!==this.navigationId?Gt:Promise.resolve(d))),function j5(t,e,n,r,o,i,s){return gn(function(){var a=y(function*(c){const{state:u,tree:l}=yield function L5(t,e,n,r,o,i){return $v.apply(this,arguments)}(t,e,n,r,c.extractedUrl,o,i,s);return{...c,targetSnapshot:u,urlAfterRedirects:l}});return function(c){return a.apply(this,arguments)}}())}(this.environmentInjector,this.configLoader,this.rootComponentType,n.config,this.urlSerializer,this.paramsInheritanceStrategy,i.signal),Xr(d=>{r.targetSnapshot=d.targetSnapshot,r.urlAfterRedirects=d.urlAfterRedirects,this.currentNavigation.update(h=>(h.finalUrl=d.urlAfterRedirects,h));const f=new iO(d.id,this.urlSerializer.serialize(d.extractedUrl),this.urlSerializer.serialize(d.urlAfterRedirects),d.targetSnapshot);this.events.next(f)}));if(u&&this.urlHandlingStrategy.shouldProcessUrl(a.currentRawUrl)){const{id:d,extractedUrl:f,source:h,restoredState:p,extras:m}=a,_=new Of(d,this.urlSerializer.serialize(f),h,p);this.events.next(_);const C=uO(this.rootComponentType,this.environmentInjector).snapshot;return this.currentTransition=r={...a,targetSnapshot:C,urlAfterRedirects:f,extras:{...m,skipLocationChange:!1,replaceUrl:!1}},this.currentNavigation.update(v=>(v.finalUrl=f,v)),te(r)}return this.events.next(new As(a.id,this.urlSerializer.serialize(a.extractedUrl),"",Pf.IgnoredByUrlHandlingStrategy)),a.resolve(!1),Gt}),Be(a=>{const c=new P6(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);return this.events.next(c),this.currentTransition=r={...a,guards:e5(a.targetSnapshot,a.currentSnapshot,this.rootContexts)},r}),function d5(t){return gn(e=>{const{targetSnapshot:n,currentSnapshot:r,guards:{canActivateChecks:o,canDeactivateChecks:i}}=e;return 0===i.length&&0===o.length?te({...e,guardsResult:!0}):function f5(t,e,n){return et(t).pipe(gn(r=>function _5(t,e,n,r){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;return o&&0!==o.length?te(o.map(s=>{const a=e._environmentInjector,c=Rs(s,a);return oi(function c5(t){return t&&Gc(t.canDeactivate)}(c)?c.canDeactivate(t,e,n,r):Dt(a,()=>c(t,e,n,r))).pipe(ri())})).pipe(Ms()):te(!0)}(r.component,r.route,n,e)),ri(r=>!0!==r,!0))}(i,n,r).pipe(gn(s=>s&&function o5(t){return"boolean"==typeof t}(s)?function h5(t,e,n){return et(e).pipe(Df(r=>Cv(function g5(t,e){return null!==t&&e&&e(new B6(t)),te(!0)}(r.route.parent,n),function p5(t,e){return null!==t&&e&&e(new j6(t)),te(!0)}(r.route,n),function y5(t,e){const n=e[e.length-1],o=e.slice(0,e.length-1).reverse().map(i=>function t5(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(i)).filter(i=>null!==i).map(i=>Ev(()=>te(i.guards.map(a=>{const c=i.node._environmentInjector,u=Rs(a,c);return oi(function a5(t){return t&&Gc(t.canActivateChild)}(u)?u.canActivateChild(n,t):Dt(c,()=>u(n,t))).pipe(ri())})).pipe(Ms())));return te(o).pipe(Ms())}(t,r.path),function m5(t,e){const n=e.routeConfig?e.routeConfig.canActivate:null;if(!n||0===n.length)return te(!0);const r=n.map(o=>Ev(()=>{const i=e._environmentInjector,s=Rs(o,i);return oi(function s5(t){return t&&Gc(t.canActivate)}(s)?s.canActivate(e,t):Dt(i,()=>s(e,t))).pipe(ri())}));return te(r).pipe(Ms())}(t,r.route))),ri(r=>!0!==r,!0))}(n,o,t):te(s)),Be(s=>({...e,guardsResult:s})))})}(a=>this.events.next(a)),mn(a=>{if(r.guardsResult=a.guardsResult,a.guardsResult&&"boolean"!=typeof a.guardsResult)throw Hf(0,a.guardsResult);const c=new x6(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot,!!a.guardsResult);if(this.events.next(c),!s())return Gt;if(!a.guardsResult)return this.cancelNavigationTransition(a,"",zt.GuardRejected),Gt;if(0===a.guards.canActivateChecks.length)return te(a);const u=new F6(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);if(this.events.next(u),!s())return Gt;let l=!1;return te(a).pipe(function $5(t){return gn(e=>{const{targetSnapshot:n,guards:{canActivateChecks:r}}=e;if(!r.length)return te(e);const o=new Set(r.map(a=>a.route)),i=new Set;for(const a of o)if(!i.has(a))for(const c of bO(a))i.add(c);let s=0;return et(i).pipe(Df(a=>o.has(a)?function G5(t,e,n){const r=t.routeConfig,o=t._resolve;return void 0!==r?.title&&!fO(r)&&(o[Nc]=r.title),Ev(()=>(t.data=Ff(t,t.parent,n).resolve,function z5(t,e,n){const r=Sv(t);if(0===r.length)return te({});const o={};return et(r).pipe(gn(i=>function q5(t,e,n){const r=e._environmentInjector,o=Rs(t,r);return oi(o.resolve?o.resolve(e,n):Dt(r,()=>o(e,n)))}(t[i],e,n).pipe(ri(),Xr(s=>{if(s instanceof Vv)throw Hf(new xc,s);o[i]=s}))),LN(1),Be(()=>o),Rc(i=>vO(i)?Gt:Iv(i)))}(o,t,e).pipe(Be(i=>(t._resolvedData=i,t.data={...t.data,...i},null)))))}(a,n,t):(a.data=Ff(a,a.parent,t).resolve,te(void 0))),Xr(()=>s++),LN(1),gn(a=>s===i.size?te(e):Gt))})}(this.paramsInheritanceStrategy),Xr({next:()=>{l=!0;const d=new L6(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects),a.targetSnapshot);this.events.next(d)},complete:()=>{l||this.cancelNavigationTransition(a,"",zt.NoDataFromResolver)}}))}),kO(a=>{const c=l=>{const d=[];l.routeConfig?._loadedComponent?l.component=l.routeConfig?._loadedComponent:l.routeConfig?.loadComponent&&d.push(this.configLoader.loadComponent(l._environmentInjector,l.routeConfig).then(h=>{l.component=h}));for(const f of l.children)d.push(...c(f));return d},u=c(a.targetSnapshot.root);return 0===u.length?te(a):et(Promise.all(u).then(()=>a))}),kO(()=>this.afterPreactivation()),mn(()=>{const{currentSnapshot:a,targetSnapshot:c}=r,u=this.createViewTransition?.(this.environmentInjector,a.root,c.root);return u?et(u).pipe(Be(()=>r)):te(r)}),Ds(1),Be(a=>{const c=function Y6(t,e,n){const r=Vc(t,e._root,n?n._root:void 0);return new cO(r,e)}(n.routeReuseStrategy,a.targetSnapshot,a.currentRouterState);this.currentTransition=r=a={...a,targetRouterState:c},this.currentNavigation.update(u=>(u.targetRouterState=c,u)),this.events.next(new Ov),s()&&(new X6(n.routeReuseStrategy,r.targetRouterState,r.currentRouterState,u=>this.events.next(u),this.inputBindingEnabled).activate(this.rootContexts),s()&&(o=!0,this.currentNavigation.update(u=>(u.abort=X5,u)),this.lastSuccessfulNavigation.set(fe(this.currentNavigation)),this.events.next(new Dr(a.id,this.urlSerializer.serialize(a.extractedUrl),this.urlSerializer.serialize(a.urlAfterRedirects))),this.titleStrategy?.updateTitle(a.targetRouterState.snapshot),a.resolve(!0)))}),Tv(CO(i.signal).pipe(Zr(()=>!o&&!r.targetRouterState),Xr(()=>{this.cancelNavigationTransition(r,i.signal.reason+"",zt.Aborted)}))),Xr({complete:()=>{o=!0}}),Tv(this.transitionAbortWithErrorSubject.pipe(Xr(a=>{throw a}))),wv(()=>{i.abort(),o||this.cancelNavigationTransition(r,"",zt.SupersededByNewNavigation),this.currentTransition?.id===r.id&&(this.currentNavigation.set(null),this.currentTransition=null)}),Rc(a=>{if(o=!0,this.destroyed)return r.resolve(!1),Gt;if(yO(a))this.events.next(new to(r.id,this.urlSerializer.serialize(r.extractedUrl),a.message,a.cancellationCode)),function Z6(t){return yO(t)&&si(t.url)}(a)?this.events.next(new xf(a.url,a.navigationBehaviorOptions)):r.resolve(!1);else{const c=new Nv(r.id,this.urlSerializer.serialize(r.extractedUrl),a,r.targetSnapshot??void 0);try{const u=Dt(this.environmentInjector,()=>this.navigationErrorHandler?.(c));if(!(u instanceof Vv))throw this.events.next(c),a;{const{message:l,cancellationCode:d}=Hf(0,u);this.events.next(new to(r.id,this.urlSerializer.serialize(r.extractedUrl),l,d)),this.events.next(new xf(u.redirectTo,u.navigationBehaviorOptions))}}catch(u){this.options.resolveNavigationPromiseOnError?r.resolve(!1):r.reject(u)}}return Gt}))}))}cancelNavigationTransition(n,r,o){const i=new to(n.id,this.urlSerializer.serialize(n.extractedUrl),r,o);this.events.next(i),n.resolve(!1)}isUpdatingInternalState(){return this.currentTransition?.extractedUrl.toString()!==this.currentTransition?.currentUrlTree.toString()}isUpdatedBrowserUrl(){const n=this.urlHandlingStrategy.extract(this.urlSerializer.parse(this.location.path(!0))),r=fe(this.currentNavigation),o=r?.targetBrowserUrl??r?.extractedUrl;return n.toString()!==o?.toString()&&!r?.extras.skipLocationChange}static \u0275fac=function(r){return new(r||t)};static \u0275prov=M({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function eY(t){return t!==Hc}const tY=new S("");let nY=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=M({token:t,factory:()=>E(oY),providedIn:"root"})}return t})();class rY{shouldDetach(e){return!1}store(e,n){}shouldAttach(e){return!1}retrieve(e){return null}shouldReuseRoute(e,n){return e.routeConfig===n.routeConfig}shouldDestroyInjector(e){return!0}}let oY=(()=>{class t extends rY{static \u0275fac=(()=>{let n;return function(o){return(n||(n=Qe(t)))(o||t)}})();static \u0275prov=M({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),LO=(()=>{class t{urlSerializer=E(Pc);options=E(Ns,{optional:!0})||{};canceledNavigationResolution=this.options.canceledNavigationResolution||"replace";location=E(Dc);urlHandlingStrategy=E(Kv);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";currentUrlTree=new Qn;getCurrentUrlTree(){return this.currentUrlTree}rawUrlTree=this.currentUrlTree;getRawUrlTree(){return this.rawUrlTree}createBrowserPath({finalUrl:n,initialUrl:r,targetBrowserUrl:o}){const i=void 0!==n?this.urlHandlingStrategy.merge(n,r):r,s=o??i;return s instanceof Qn?this.urlSerializer.serialize(s):s}commitTransition({targetRouterState:n,finalUrl:r,initialUrl:o}){r&&n?(this.currentUrlTree=r,this.rawUrlTree=this.urlHandlingStrategy.merge(r,o),this.routerState=n):this.rawUrlTree=o}routerState=uO(null,E(ot));getRouterState(){return this.routerState}_stateMemento=this.createStateMemento();get stateMemento(){return this._stateMemento}updateStateMemento(){this._stateMemento=this.createStateMemento()}createStateMemento(){return{rawUrlTree:this.rawUrlTree,currentUrlTree:this.currentUrlTree,routerState:this.routerState}}restoredState(){return this.location.getState()}static \u0275fac=function(r){return new(r||t)};static \u0275prov=M({token:t,factory:()=>E(iY),providedIn:"root"})}return t})(),iY=(()=>{class t extends LO{currentPageId=0;lastSuccessfulId=-1;get browserPageId(){return"computed"!==this.canceledNavigationResolution?this.currentPageId:this.restoredState()?.\u0275routerPageId??this.currentPageId}registerNonRouterCurrentEntryChangeListener(n){return this.location.subscribe(r=>{"popstate"===r.type&&setTimeout(()=>{n(r.url,r.state,"popstate")})})}handleRouterEvent(n,r){n instanceof Of?this.updateStateMemento():n instanceof As?this.commitTransition(r):n instanceof iO?"eager"===this.urlUpdateStrategy&&(r.extras.skipLocationChange||this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof Ov?(this.commitTransition(r),"deferred"===this.urlUpdateStrategy&&!r.extras.skipLocationChange&&this.setBrowserUrl(this.createBrowserPath(r),r)):n instanceof to&&!function O6(t){return t instanceof to&&(t.code===zt.Redirect||t.code===zt.SupersededByNewNavigation)}(n)?this.restoreHistory(r):n instanceof Nv?this.restoreHistory(r,!0):n instanceof Dr&&(this.lastSuccessfulId=n.id,this.currentPageId=this.browserPageId)}setBrowserUrl(n,{extras:r,id:o}){const{replaceUrl:i,state:s}=r;if(this.location.isCurrentPathEqualTo(n)||i){const a=this.browserPageId,c={...s,...this.generateNgRouterState(o,a)};this.location.replaceState(n,"",c)}else{const a={...s,...this.generateNgRouterState(o,this.browserPageId+1)};this.location.go(n,"",a)}}restoreHistory(n,r=!1){if("computed"===this.canceledNavigationResolution){const i=this.currentPageId-this.browserPageId;0!==i?this.location.historyGo(i):this.getCurrentUrlTree()===n.finalUrl&&0===i&&(this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}else"replace"===this.canceledNavigationResolution&&(r&&this.resetInternalState(n),this.resetUrlToCurrentUrlTree())}resetInternalState({finalUrl:n}){this.routerState=this.stateMemento.routerState,this.currentUrlTree=this.stateMemento.currentUrlTree,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n??this.rawUrlTree)}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.getRawUrlTree()),"",this.generateNgRouterState(this.lastSuccessfulId,this.currentPageId))}generateNgRouterState(n,r){return"computed"===this.canceledNavigationResolution?{navigationId:n,\u0275routerPageId:r}:{navigationId:n}}static \u0275fac=(()=>{let n;return function(o){return(n||(n=Qe(t)))(o||t)}})();static \u0275prov=M({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function UO(t,e){t.events.pipe(Zr(n=>n instanceof Dr||n instanceof to||n instanceof Nv||n instanceof As),Be(n=>n instanceof Dr||n instanceof As?0:n instanceof to&&(n.code===zt.Redirect||n.code===zt.SupersededByNewNavigation)?2:1),Zr(n=>2!==n),Ds(1)).subscribe(()=>{e()})}const HO={paths:"exact",fragment:"ignored",matrixParams:"ignored",queryParams:"exact"},BO={paths:"subset",fragment:"ignored",matrixParams:"ignored",queryParams:"subset"};let Nn=(()=>{class t{get currentUrlTree(){return this.stateManager.getCurrentUrlTree()}get rawUrlTree(){return this.stateManager.getRawUrlTree()}disposed=!1;nonRouterCurrentEntryChangeSubscription;console=E(ib);stateManager=E(LO);options=E(Ns,{optional:!0})||{};pendingTasks=E(Ur);urlUpdateStrategy=this.options.urlUpdateStrategy||"deferred";navigationTransitions=E(Wv);urlSerializer=E(Pc);location=E(Dc);urlHandlingStrategy=E(Kv);injector=E(ot);_events=new rn;get events(){return this._events}get routerState(){return this.stateManager.getRouterState()}navigated=!1;routeReuseStrategy=E(nY);injectorCleanup=E(tY,{optional:!0});onSameUrlNavigation=this.options.onSameUrlNavigation||"ignore";config=E(qc,{optional:!0})?.flat()??[];componentInputBindingEnabled=!!E(Uf,{optional:!0});currentNavigation=this.navigationTransitions.currentNavigation.asReadonly();constructor(){this.resetConfig(this.config),this.navigationTransitions.setupNavigations(this).subscribe({error:n=>{}}),this.subscribeToNavigationEvents()}eventsSubscription=new Kt;subscribeToNavigationEvents(){const n=this.navigationTransitions.events.subscribe(r=>{try{const o=this.navigationTransitions.currentTransition,i=fe(this.navigationTransitions.currentNavigation);if(null!==o&&null!==i)if(this.stateManager.handleRouterEvent(r,i),r instanceof to&&r.code!==zt.Redirect&&r.code!==zt.SupersededByNewNavigation)this.navigated=!0;else if(r instanceof Dr)this.navigated=!0,this.injectorCleanup?.(this.routeReuseStrategy,this.routerState,this.config);else if(r instanceof xf){const s=r.navigationBehaviorOptions,a=this.urlHandlingStrategy.merge(r.url,o.currentRawUrl),c={scroll:o.extras.scroll,browserUrl:o.extras.browserUrl,info:o.extras.info,skipLocationChange:o.extras.skipLocationChange,replaceUrl:o.extras.replaceUrl||"eager"===this.urlUpdateStrategy||eY(o.source),...s};this.scheduleNavigation(a,Hc,null,c,{resolve:o.resolve,reject:o.reject,promise:o.promise})}(function G6(t){return!(t instanceof Ov||t instanceof xf)})(r)&&this._events.next(r)}catch(o){this.navigationTransitions.transitionAbortWithErrorSubject.next(o)}});this.eventsSubscription.add(n)}resetRootComponentType(n){this.routerState.root.component=n,this.navigationTransitions.rootComponentType=n}initialNavigation(){this.setUpLocationChangeListener(),this.navigationTransitions.hasRequestedNavigation||this.navigateToSyncWithBrowser(this.location.path(!0),Hc,this.stateManager.restoredState())}setUpLocationChangeListener(){this.nonRouterCurrentEntryChangeSubscription??=this.stateManager.registerNonRouterCurrentEntryChangeListener((n,r,o)=>{this.navigateToSyncWithBrowser(n,o,r)})}navigateToSyncWithBrowser(n,r,o){const i={replaceUrl:!0},s=o?.navigationId?o:null;if(o){const c={...o};delete c.navigationId,delete c.\u0275routerPageId,0!==Object.keys(c).length&&(i.state=c)}const a=this.parseUrl(n);this.scheduleNavigation(a,r,s,i).catch(c=>{this.disposed||this.injector.get($n)(c)})}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return fe(this.navigationTransitions.currentNavigation)}get lastSuccessfulNavigation(){return this.navigationTransitions.lastSuccessfulNavigation}resetConfig(n){this.config=n.map(Bv),this.navigated=!1}ngOnDestroy(){this.dispose()}dispose(){this._events.unsubscribe(),this.navigationTransitions.complete(),this.nonRouterCurrentEntryChangeSubscription?.unsubscribe(),this.nonRouterCurrentEntryChangeSubscription=void 0,this.disposed=!0,this.eventsSubscription.unsubscribe()}createUrlTree(n,r={}){const{relativeTo:o,queryParams:i,fragment:s,queryParamsHandling:a,preserveFragment:c}=r,u=c?this.currentUrlTree.fragment:s;let d,l=null;switch(a??this.options.defaultQueryParamsHandling){case"merge":l={...this.currentUrlTree.queryParams,...i};break;case"preserve":l=this.currentUrlTree.queryParams;break;default:l=i||null}null!==l&&(l=this.removeEmptyProps(l));try{d=JN(o?o.snapshot:this.routerState.snapshot.root)}catch{("string"!=typeof n[0]||"/"!==n[0][0])&&(n=[]),d=this.currentUrlTree.root}return ZN(d,n,l,u??null,this.urlSerializer)}navigateByUrl(n,r={skipLocationChange:!1}){const o=si(n)?n:this.parseUrl(n),i=this.urlHandlingStrategy.merge(o,this.rawUrlTree);return this.scheduleNavigation(i,Hc,null,r)}navigate(n,r={skipLocationChange:!1}){return function sY(t){for(let e=0;e<t.length;e++)if(null==t[e])throw new I(4008,!1)}(n),this.navigateByUrl(this.createUrlTree(n,r),r)}serializeUrl(n){return this.urlSerializer.serialize(n)}parseUrl(n){try{return this.urlSerializer.parse(n)}catch{return this.console.warn(xt(4018,!1)),this.urlSerializer.parse("/")}}isActive(n,r){let o;if(o=!0===r?{...HO}:!1===r?{...BO}:r,si(n))return Av(this.currentUrlTree,n,o);const i=this.parseUrl(n);return Av(this.currentUrlTree,i,o)}removeEmptyProps(n){return Object.entries(n).reduce((r,[o,i])=>(null!=i&&(r[o]=i),r),{})}scheduleNavigation(n,r,o,i,s){if(this.disposed)return Promise.resolve(!1);let a,c,u;s?(a=s.resolve,c=s.reject,u=s.promise):u=new Promise((d,f)=>{a=d,c=f});const l=this.pendingTasks.add();return UO(this,()=>{queueMicrotask(()=>this.pendingTasks.remove(l))}),this.navigationTransitions.handleNavigationRequest({source:r,restoredState:o,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,rawUrl:n,extras:i,resolve:a,reject:c,promise:u,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),u.catch(d=>Promise.reject(d))}static \u0275fac=function(r){return new(r||t)};static \u0275prov=M({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),Kc=(()=>{class t{router;route;tabIndexAttribute;renderer;el;locationStrategy;reactiveHref=wn(null);get href(){return fe(this.reactiveHref)}set href(n){this.reactiveHref.set(n)}target;queryParams;fragment;queryParamsHandling;state;info;relativeTo;isAnchorElement;subscription;onChanges=new rn;applicationErrorHandler=E($n);options=E(Ns,{optional:!0});constructor(n,r,o,i,s,a){this.router=n,this.route=r,this.tabIndexAttribute=o,this.renderer=i,this.el=s,this.locationStrategy=a,this.reactiveHref.set(E(new JK("href"),{optional:!0}));const c=s.nativeElement.tagName?.toLowerCase();this.isAnchorElement="a"===c||"area"===c||!("object"!=typeof customElements||!customElements.get(c)?.observedAttributes?.includes?.("href")),this.isAnchorElement&&(this.setTabIndexIfNotOnNativeEl("0"),this.subscribeToNavigationEventsIfNecessary())}subscribeToNavigationEventsIfNecessary(){void 0===this.subscription&&(this.subscription=this.router.events.subscribe(n=>{n instanceof Dr&&this.updateHref()}))}preserveFragment=!1;skipLocationChange=!1;replaceUrl=!1;setTabIndexIfNotOnNativeEl(n){null!=this.tabIndexAttribute||this.isAnchorElement||this.applyAttributeValue("tabindex",n)}ngOnChanges(n){this.isAnchorElement&&this.updateHref(),this.onChanges.next(this)}routerLinkInput=null;set routerLink(n){null==n?(this.routerLinkInput=null,this.setTabIndexIfNotOnNativeEl(null)):(this.routerLinkInput=si(n)||Array.isArray(n)?n:[n],this.setTabIndexIfNotOnNativeEl("0"))}onClick(n,r,o,i,s){const a=this.urlTree;if(null===a||this.isAnchorElement&&(0!==n||r||o||i||s||"string"==typeof this.target&&"_self"!=this.target))return!0;const c={skipLocationChange:this.skipLocationChange,replaceUrl:this.replaceUrl,state:this.state,info:this.info};return this.router.navigateByUrl(a,c)?.catch(u=>{this.applicationErrorHandler(u)}),!this.isAnchorElement}ngOnDestroy(){this.subscription?.unsubscribe()}updateHref(){const n=this.urlTree;this.reactiveHref.set(null!==n&&this.locationStrategy?this.locationStrategy?.prepareExternalUrl(this.router.serializeUrl(n))??"":null)}applyAttributeValue(n,r){const o=this.renderer,i=this.el.nativeElement;null!==r?o.setAttribute(i,n,r):o.removeAttribute(i,n)}get urlTree(){return null===this.routerLinkInput?null:si(this.routerLinkInput)?this.routerLinkInput:this.router.createUrlTree(this.routerLinkInput,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:this.preserveFragment})}static \u0275fac=function(r){return new(r||t)(A(Nn),A(ks),ka("tabindex"),A(yr),A(Qt),A(ni))};static \u0275dir=z({type:t,selectors:[["","routerLink",""]],hostVars:2,hostBindings:function(r,o){1&r&&at("click",function(s){return o.onClick(s.button,s.ctrlKey,s.shiftKey,s.altKey,s.metaKey)}),2&r&&Kn("href",o.reactiveHref(),LD)("target",o.target)},inputs:{target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",state:"state",info:"info",relativeTo:"relativeTo",preserveFragment:[2,"preserveFragment","preserveFragment",Ts],skipLocationChange:[2,"skipLocationChange","skipLocationChange",Ts],replaceUrl:[2,"replaceUrl","replaceUrl",Ts],routerLink:"routerLink"},features:[Dn]})}return t})();class VO{}let uY=(()=>{class t{router;injector;preloadingStrategy;loader;subscription;constructor(n,r,o,i){this.router=n,this.injector=r,this.preloadingStrategy=o,this.loader=i}setUpPreloading(){this.subscription=this.router.events.pipe(Zr(n=>n instanceof Dr),Df(()=>this.preload())).subscribe(()=>{})}preload(){return this.processRoutes(this.injector,this.router.config)}ngOnDestroy(){this.subscription?.unsubscribe()}processRoutes(n,r){const o=[];for(const i of r){i.providers&&!i._injector&&(i._injector=Ed(i.providers,n,""));const s=i._injector??n;i._loadedNgModuleFactory&&!i._loadedInjector&&(i._loadedInjector=i._loadedNgModuleFactory.create(s).injector);const a=i._loadedInjector??s;(i.loadChildren&&!i._loadedRoutes&&void 0===i.canLoad||i.loadComponent&&!i._loadedComponent)&&o.push(this.preloadConfig(s,i)),(i.children||i._loadedRoutes)&&o.push(this.processRoutes(a,i.children??i._loadedRoutes))}return et(o).pipe(kc())}preloadConfig(n,r){return this.preloadingStrategy.preload(r,()=>{if(n.destroyed)return te(null);let o;o=r.loadChildren&&void 0===r.canLoad?et(this.loader.loadChildren(n,r)):te(null);const i=o.pipe(gn(s=>null===s?te(void 0):(r._loadedRoutes=s.routes,r._loadedInjector=s.injector,r._loadedNgModuleFactory=s.factory,this.processRoutes(s.injector??n,s.routes))));return r.loadComponent&&!r._loadedComponent?et([i,this.loader.loadComponent(n,r)]).pipe(kc()):i})}static \u0275fac=function(r){return new(r||t)(F(Nn),F(ot),F(VO),F(Gv))};static \u0275prov=M({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const Qv=new S("");let jO=(()=>{class t{options;routerEventsSubscription;scrollEventsSubscription;lastId=0;lastSource=Hc;restoredId=0;store={};urlSerializer=E(Pc);zone=E(Ie);viewportScroller=E(OT);transitions=E(Wv);constructor(n){this.options=n,this.options.scrollPositionRestoration||="disabled",this.options.anchorScrolling||="disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.transitions.events.subscribe(n=>{n instanceof Of?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=n.navigationTrigger,this.restoredId=n.restoredState?n.restoredState.navigationId:0):n instanceof Dr?(this.lastId=n.id,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.urlAfterRedirects).fragment)):n instanceof As&&n.code===Pf.IgnoredSameUrlNavigation&&(this.lastSource=void 0,this.restoredId=0,this.scheduleScrollEvent(n,this.urlSerializer.parse(n.url).fragment))})}consumeScrollEvents(){return this.transitions.events.subscribe(n=>{if(!(n instanceof sO)||"manual"===n.scrollBehavior)return;const r={behavior:"instant"};n.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0],r):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(n.position,r):n.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(n.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0])})}scheduleScrollEvent(n,r){var o=this;const i=fe(this.transitions.currentNavigation)?.extras.scroll;this.zone.runOutsideAngular(y(function*(){yield new Promise(s=>{setTimeout(s),typeof requestAnimationFrame<"u"&&requestAnimationFrame(s)}),o.zone.run(()=>{o.transitions.events.next(new sO(n,"popstate"===o.lastSource?o.store[o.restoredId]:null,r,i))})}))}ngOnDestroy(){this.routerEventsSubscription?.unsubscribe(),this.scrollEventsSubscription?.unsubscribe()}static \u0275fac=function(r){!function tA(){throw new Error("invalid")}()};static \u0275prov=M({token:t,factory:t.\u0275fac})}return t})();function $O(){return E(Nn).routerState.root}function yn(t,e){return{\u0275kind:t,\u0275providers:e}}function GO(){const t=E(Lt);return e=>{const n=t.get(Cr);if(e!==n.components[0])return;const r=t.get(Nn),o=t.get(zO);1===t.get(Jv)&&r.initialNavigation(),t.get(qO,null,{optional:!0})?.setUpPreloading(),t.get(Qv,null,{optional:!0})?.init(),r.resetRootComponentType(n.componentTypes[0]),o.closed||(o.next(),o.complete(),o.unsubscribe())}}const zO=new S("",{factory:()=>new rn}),Jv=new S("",{factory:()=>1}),qO=new S("");function gY(t){return yn(0,[{provide:qO,useExisting:uY},{provide:VO,useExisting:t}])}function yY(t){return ft("NgRouterViewTransitions"),yn(9,[{provide:OO,useValue:J5},{provide:PO,useValue:{skipNextTransition:!!t?.skipInitialTransition,...t}}])}const _Y=[Dc,{provide:Pc,useClass:xc},Nn,Bc,{provide:ks,useFactory:$O},Gv,[]];let Zv=(()=>{class t{constructor(){}static forRoot(n,r){return{ngModule:t,providers:[_Y,[],{provide:qc,multi:!0,useValue:n},[],r?.errorHandler?{provide:xO,useValue:r.errorHandler}:[],{provide:Ns,useValue:r||{}},r?.useHash?{provide:ni,useClass:o8}:{provide:ni,useClass:MM},{provide:Qv,useFactory:()=>{const t=E(OT),e=E(Ns);return e.scrollOffset&&t.setOffset(e.scrollOffset),new jO(e)}},r?.preloadingStrategy?gY(r.preloadingStrategy).\u0275providers:[],r?.initialNavigation?IY(r):[],r?.bindToComponentInputs?yn(8,[hO,{provide:Uf,useExisting:hO}]).\u0275providers:[],r?.enableViewTransitions?yY().\u0275providers:[],[{provide:KO,useFactory:GO},{provide:$y,multi:!0,useExisting:KO}]]}}static forChild(n){return{ngModule:t,providers:[{provide:qc,multi:!0,useValue:n}]}}static \u0275fac=function(r){return new(r||t)};static \u0275mod=qr({type:t});static \u0275inj=sr({})}return t})();function IY(t){return["disabled"===t.initialNavigation?yn(3,[Ab(()=>{E(Nn).setUpLocationChangeListener()}),{provide:Jv,useValue:2}]).\u0275providers:[],"enabledBlocking"===t.initialNavigation?yn(2,[{provide:OU,useValue:!0},{provide:Jv,useValue:0},Ab(()=>{const e=E(Lt);return e.get(kL,Promise.resolve()).then(()=>new Promise(r=>{const o=e.get(Nn),i=e.get(zO);UO(o,()=>{r(!0)}),e.get(Wv).afterPreactivation=()=>(r(!0),i.closed?te(void 0):i),o.initialNavigation()}))})]).\u0275providers:[]]}const KO=new S("");class Zt{headers;normalizedNames=new Map;lazyInit;lazyUpdate=null;constructor(e){e?"string"==typeof e?this.lazyInit=()=>{this.headers=new Map,e.split("\n").forEach(n=>{const r=n.indexOf(":");if(r>0){const o=n.slice(0,r),i=n.slice(r+1).trim();this.addHeaderEntry(o,i)}})}:typeof Headers<"u"&&e instanceof Headers?(this.headers=new Map,e.forEach((n,r)=>{this.addHeaderEntry(r,n)})):this.lazyInit=()=>{this.headers=new Map,Object.entries(e).forEach(([n,r])=>{this.setHeaderEntries(n,r)})}:this.headers=new Map}has(e){return this.init(),this.headers.has(e.toLowerCase())}get(e){this.init();const n=this.headers.get(e.toLowerCase());return n&&n.length>0?n[0]:null}keys(){return this.init(),Array.from(this.normalizedNames.values())}getAll(e){return this.init(),this.headers.get(e.toLowerCase())||null}append(e,n){return this.clone({name:e,value:n,op:"a"})}set(e,n){return this.clone({name:e,value:n,op:"s"})}delete(e,n){return this.clone({name:e,value:n,op:"d"})}maybeSetNormalizedName(e,n){this.normalizedNames.has(n)||this.normalizedNames.set(n,e)}init(){this.lazyInit&&(this.lazyInit instanceof Zt?this.copyFrom(this.lazyInit):this.lazyInit(),this.lazyInit=null,this.lazyUpdate&&(this.lazyUpdate.forEach(e=>this.applyUpdate(e)),this.lazyUpdate=null))}copyFrom(e){e.init(),Array.from(e.headers.keys()).forEach(n=>{this.headers.set(n,e.headers.get(n)),this.normalizedNames.set(n,e.normalizedNames.get(n))})}clone(e){const n=new Zt;return n.lazyInit=this.lazyInit&&this.lazyInit instanceof Zt?this.lazyInit:this,n.lazyUpdate=(this.lazyUpdate||[]).concat([e]),n}applyUpdate(e){const n=e.name.toLowerCase();switch(e.op){case"a":case"s":let r=e.value;if("string"==typeof r&&(r=[r]),0===r.length)return;this.maybeSetNormalizedName(e.name,n);const o=("a"===e.op?this.headers.get(n):void 0)||[];o.push(...r),this.headers.set(n,o);break;case"d":const i=e.value;if(i){let s=this.headers.get(n);if(!s)return;s=s.filter(a=>-1===i.indexOf(a)),0===s.length?(this.headers.delete(n),this.normalizedNames.delete(n)):this.headers.set(n,s)}else this.headers.delete(n),this.normalizedNames.delete(n)}}addHeaderEntry(e,n){const r=e.toLowerCase();this.maybeSetNormalizedName(e,r),this.headers.has(r)?this.headers.get(r).push(n):this.headers.set(r,[n])}setHeaderEntries(e,n){const r=(Array.isArray(n)?n:[n]).map(i=>i.toString()),o=e.toLowerCase();this.headers.set(o,r),this.maybeSetNormalizedName(e,o)}forEach(e){this.init(),Array.from(this.normalizedNames.keys()).forEach(n=>e(this.normalizedNames.get(n),this.headers.get(n)))}}class wY{map=new Map;set(e,n){return this.map.set(e,n),this}get(e){return this.map.has(e)||this.map.set(e,e.defaultValue()),this.map.get(e)}delete(e){return this.map.delete(e),this}has(e){return this.map.has(e)}keys(){return this.map.keys()}}class DY{encodeKey(e){return WO(e)}encodeValue(e){return WO(e)}decodeKey(e){return decodeURIComponent(e)}decodeValue(e){return decodeURIComponent(e)}}const AY=/%(\d[a-f0-9])/gi,bY={40:"@","3A":":",24:"$","2C":",","3B":";","3D":"=","3F":"?","2F":"/"};function WO(t){return encodeURIComponent(t).replace(AY,(e,n)=>bY[n]??e)}function $f(t){return`${t}`}class no{map;encoder;updates=null;cloneFrom=null;constructor(e={}){if(this.encoder=e.encoder||new DY,e.fromString){if(e.fromObject)throw new I(2805,!1);this.map=function SY(t,e){const n=new Map;return t.length>0&&t.replace(/^\?/,"").split("&").forEach(o=>{const i=o.indexOf("="),[s,a]=-1==i?[e.decodeKey(o),""]:[e.decodeKey(o.slice(0,i)),e.decodeValue(o.slice(i+1))],c=n.get(s)||[];c.push(a),n.set(s,c)}),n}(e.fromString,this.encoder)}else e.fromObject?(this.map=new Map,Object.keys(e.fromObject).forEach(n=>{const r=e.fromObject[n],o=Array.isArray(r)?r.map($f):[$f(r)];this.map.set(n,o)})):this.map=null}has(e){return this.init(),this.map.has(e)}get(e){this.init();const n=this.map.get(e);return n?n[0]:null}getAll(e){return this.init(),this.map.get(e)||null}keys(){return this.init(),Array.from(this.map.keys())}append(e,n){return this.clone({param:e,value:n,op:"a"})}appendAll(e){const n=[];return Object.keys(e).forEach(r=>{const o=e[r];Array.isArray(o)?o.forEach(i=>{n.push({param:r,value:i,op:"a"})}):n.push({param:r,value:o,op:"a"})}),this.clone(n)}set(e,n){return this.clone({param:e,value:n,op:"s"})}delete(e,n){return this.clone({param:e,value:n,op:"d"})}toString(){return this.init(),this.keys().map(e=>{const n=this.encoder.encodeKey(e);return this.map.get(e).map(r=>n+"="+this.encoder.encodeValue(r)).join("&")}).filter(e=>""!==e).join("&")}clone(e){const n=new no({encoder:this.encoder});return n.cloneFrom=this.cloneFrom||this,n.updates=(this.updates||[]).concat(e),n}init(){null===this.map&&(this.map=new Map),null!==this.cloneFrom&&(this.cloneFrom.init(),this.cloneFrom.keys().forEach(e=>this.map.set(e,this.cloneFrom.map.get(e))),this.updates.forEach(e=>{switch(e.op){case"a":case"s":const n=("a"===e.op?this.map.get(e.param):void 0)||[];n.push($f(e.value)),this.map.set(e.param,n);break;case"d":if(void 0===e.value){this.map.delete(e.param);break}{let r=this.map.get(e.param)||[];const o=r.indexOf($f(e.value));-1!==o&&r.splice(o,1),r.length>0?this.map.set(e.param,r):this.map.delete(e.param)}}}),this.cloneFrom=this.updates=null)}}function YO(t){return typeof ArrayBuffer<"u"&&t instanceof ArrayBuffer}function QO(t){return typeof Blob<"u"&&t instanceof Blob}function JO(t){return typeof FormData<"u"&&t instanceof FormData}const Wc="Content-Type",ZO="text/plain",XO="application/json",eP=`${XO}, ${ZO}, */*`;class Yc{url;body=null;headers;context;reportProgress=!1;withCredentials=!1;credentials;keepalive=!1;cache;priority;mode;redirect;referrer;integrity;referrerPolicy;responseType="json";method;params;urlWithParams;transferCache;timeout;constructor(e,n,r,o){let i;if(this.url=n,this.method=e.toUpperCase(),function kY(t){switch(t){case"DELETE":case"GET":case"HEAD":case"OPTIONS":case"JSONP":return!1;default:return!0}}(this.method)||o?(this.body=void 0!==r?r:null,i=o):i=r,i){if(this.reportProgress=!!i.reportProgress,this.withCredentials=!!i.withCredentials,this.keepalive=!!i.keepalive,i.responseType&&(this.responseType=i.responseType),i.headers&&(this.headers=i.headers),i.context&&(this.context=i.context),i.params&&(this.params=i.params),i.priority&&(this.priority=i.priority),i.cache&&(this.cache=i.cache),i.credentials&&(this.credentials=i.credentials),"number"==typeof i.timeout){if(i.timeout<1||!Number.isInteger(i.timeout))throw new I(2822,"");this.timeout=i.timeout}i.mode&&(this.mode=i.mode),i.redirect&&(this.redirect=i.redirect),i.integrity&&(this.integrity=i.integrity),i.referrer&&(this.referrer=i.referrer),i.referrerPolicy&&(this.referrerPolicy=i.referrerPolicy),this.transferCache=i.transferCache}if(this.headers??=new Zt,this.context??=new wY,this.params){const s=this.params.toString();if(0===s.length)this.urlWithParams=n;else{const a=n.indexOf("?");this.urlWithParams=n+(-1===a?"?":a<n.length-1?"&":"")+s}}else this.params=new no,this.urlWithParams=n}serializeBody(){return null===this.body?null:"string"==typeof this.body||YO(this.body)||QO(this.body)||JO(this.body)||function RY(t){return typeof URLSearchParams<"u"&&t instanceof URLSearchParams}(this.body)?this.body:this.body instanceof no?this.body.toString():"object"==typeof this.body||"boolean"==typeof this.body||Array.isArray(this.body)?JSON.stringify(this.body):this.body.toString()}detectContentTypeHeader(){return null===this.body||JO(this.body)?null:QO(this.body)?this.body.type||null:YO(this.body)?null:"string"==typeof this.body?ZO:this.body instanceof no?"application/x-www-form-urlencoded;charset=UTF-8":"object"==typeof this.body||"number"==typeof this.body||"boolean"==typeof this.body?XO:null}clone(e={}){const n=e.method||this.method,r=e.url||this.url,o=e.responseType||this.responseType,i=e.keepalive??this.keepalive,s=e.priority||this.priority,a=e.cache||this.cache,c=e.mode||this.mode,u=e.redirect||this.redirect,l=e.credentials||this.credentials,d=e.referrer||this.referrer,f=e.integrity||this.integrity,h=e.referrerPolicy||this.referrerPolicy,p=e.transferCache??this.transferCache,m=e.timeout??this.timeout,_=void 0!==e.body?e.body:this.body,C=e.withCredentials??this.withCredentials,v=e.reportProgress??this.reportProgress;let N=e.headers||this.headers,x=e.params||this.params;const H=e.context??this.context;return void 0!==e.setHeaders&&(N=Object.keys(e.setHeaders).reduce((Le,$e)=>Le.set($e,e.setHeaders[$e]),N)),e.setParams&&(x=Object.keys(e.setParams).reduce((Le,$e)=>Le.set($e,e.setParams[$e]),x)),new Yc(n,r,_,{params:x,headers:N,context:H,reportProgress:v,responseType:o,withCredentials:C,transferCache:p,keepalive:i,cache:a,priority:s,timeout:m,mode:c,redirect:u,credentials:l,referrer:d,integrity:f,referrerPolicy:h})}}var ro=function(t){return t[t.Sent=0]="Sent",t[t.UploadProgress=1]="UploadProgress",t[t.ResponseHeader=2]="ResponseHeader",t[t.DownloadProgress=3]="DownloadProgress",t[t.Response=4]="Response",t[t.User=5]="User",t}(ro||{});class Xv{headers;status;statusText;url;ok;type;redirected;responseType;constructor(e,n=200,r="OK"){this.headers=e.headers||new Zt,this.status=void 0!==e.status?e.status:n,this.statusText=e.statusText||r,this.url=e.url||null,this.redirected=e.redirected,this.responseType=e.responseType,this.ok=this.status>=200&&this.status<300}}class zf extends Xv{constructor(e={}){super(e)}type=ro.ResponseHeader;clone(e={}){return new zf({headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0})}}class Qc extends Xv{body;constructor(e={}){super(e),this.body=void 0!==e.body?e.body:null}type=ro.Response;clone(e={}){return new Qc({body:void 0!==e.body?e.body:this.body,headers:e.headers||this.headers,status:void 0!==e.status?e.status:this.status,statusText:e.statusText||this.statusText,url:e.url||this.url||void 0,redirected:e.redirected??this.redirected,responseType:e.responseType??this.responseType})}}class oo extends Xv{name="HttpErrorResponse";message;error;ok=!1;constructor(e){super(e,0,"Unknown Error"),this.message=this.status>=200&&this.status<300?`Http failure during parsing for ${e.url||"(unknown url)"}`:`Http failure response for ${e.url||"(unknown url)"}: ${e.status} ${e.statusText}`,this.error=e.error||null}}const nP=new S(""),FY=/^\)\]\}',?\n/;let rP=(()=>{class t{xhrFactory;tracingService=E(Qi,{optional:!0});constructor(n){this.xhrFactory=n}maybePropagateTrace(n){return this.tracingService?.propagate?this.tracingService.propagate(n):n}handle(n){if("JSONP"===n.method)throw new I(-2800,!1);const r=this.xhrFactory;return te(null).pipe(mn(()=>new Ge(i=>{const s=r.build();if(s.open(n.method,n.urlWithParams),n.withCredentials&&(s.withCredentials=!0),n.headers.forEach((_,C)=>s.setRequestHeader(_,C.join(","))),n.headers.has("Accept")||s.setRequestHeader("Accept",eP),!n.headers.has(Wc)){const _=n.detectContentTypeHeader();null!==_&&s.setRequestHeader(Wc,_)}if(n.timeout&&(s.timeout=n.timeout),n.responseType){const _=n.responseType.toLowerCase();s.responseType="json"!==_?_:"text"}const a=n.serializeBody();let c=null;const u=()=>{if(null!==c)return c;const _=s.statusText||"OK",C=new Zt(s.getAllResponseHeaders());return c=new zf({headers:C,status:s.status,statusText:_,url:s.responseURL||n.url}),c},l=this.maybePropagateTrace(()=>{let{headers:_,status:C,statusText:v,url:N}=u(),x=null;204!==C&&(x=typeof s.response>"u"?s.responseText:s.response),0===C&&(C=x?200:0);let H=C>=200&&C<300;if("json"===n.responseType&&"string"==typeof x){const Le=x;x=x.replace(FY,"");try{x=""!==x?JSON.parse(x):null}catch($e){x=Le,H&&(H=!1,x={error:$e,text:x})}}H?(i.next(new Qc({body:x,headers:_,status:C,statusText:v,url:N||void 0})),i.complete()):i.error(new oo({error:x,headers:_,status:C,statusText:v,url:N||void 0}))}),d=this.maybePropagateTrace(_=>{const{url:C}=u(),v=new oo({error:_,status:s.status||0,statusText:s.statusText||"Unknown Error",url:C||void 0});i.error(v)});let f=d;n.timeout&&(f=this.maybePropagateTrace(_=>{const{url:C}=u(),v=new oo({error:new DOMException("Request timed out","TimeoutError"),status:s.status||0,statusText:s.statusText||"Request timeout",url:C||void 0});i.error(v)}));let h=!1;const p=this.maybePropagateTrace(_=>{h||(i.next(u()),h=!0);let C={type:ro.DownloadProgress,loaded:_.loaded};_.lengthComputable&&(C.total=_.total),"text"===n.responseType&&s.responseText&&(C.partialText=s.responseText),i.next(C)}),m=this.maybePropagateTrace(_=>{let C={type:ro.UploadProgress,loaded:_.loaded};_.lengthComputable&&(C.total=_.total),i.next(C)});return s.addEventListener("load",l),s.addEventListener("error",d),s.addEventListener("timeout",f),s.addEventListener("abort",d),n.reportProgress&&(s.addEventListener("progress",p),null!==a&&s.upload&&s.upload.addEventListener("progress",m)),s.send(a),i.next({type:ro.Sent}),()=>{s.removeEventListener("error",d),s.removeEventListener("abort",d),s.removeEventListener("load",l),s.removeEventListener("timeout",f),n.reportProgress&&(s.removeEventListener("progress",p),null!==a&&s.upload&&s.upload.removeEventListener("progress",m)),s.readyState!==s.DONE&&s.abort()}})))}static \u0275fac=function(r){return new(r||t)(F(MT))};static \u0275prov=M({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();function oP(t,e){return e(t)}function LY(t,e){return(n,r)=>e.intercept(n,{handle:o=>t(o,r)})}const iP=new S(""),Jc=new S("",{factory:()=>[]}),HY=new S(""),sP=new S("",{factory:()=>!0});function BY(){let t=null;return(e,n)=>{null===t&&(t=(E(iP,{optional:!0})??[]).reduceRight(LY,oP));const r=E(dl);if(E(sP)){const i=r.add();return t(e,n).pipe(wv(i))}return t(e,n)}}let qf=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=M({token:t,factory:function(r){let o=null;return o=r?new(r||t):F(rP),o},providedIn:"root"})}return t})(),nC=(()=>{class t{backend;injector;chain=null;pendingTasks=E(dl);contributeToStability=E(sP);constructor(n,r){this.backend=n,this.injector=r}handle(n){if(null===this.chain){const r=Array.from(new Set([...this.injector.get(Jc),...this.injector.get(HY,[])]));this.chain=r.reduceRight((o,i)=>function UY(t,e,n){return(r,o)=>Dt(n,()=>e(r,i=>t(i,o)))}(o,i,this.injector),oP)}if(this.contributeToStability){const r=this.pendingTasks.add();return this.chain(n,o=>this.backend.handle(o)).pipe(wv(r))}return this.chain(n,r=>this.backend.handle(r))}static \u0275fac=function(r){return new(r||t)(F(qf),F(ot))};static \u0275prov=M({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),rC=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=M({token:t,factory:function(r){let o=null;return o=r?new(r||t):F(nC),o},providedIn:"root"})}return t})();function oC(t,e){return{body:e,headers:t.headers,context:t.context,observe:t.observe,params:t.params,reportProgress:t.reportProgress,responseType:t.responseType,withCredentials:t.withCredentials,credentials:t.credentials,transferCache:t.transferCache,timeout:t.timeout,keepalive:t.keepalive,priority:t.priority,cache:t.cache,mode:t.mode,redirect:t.redirect,integrity:t.integrity,referrer:t.referrer,referrerPolicy:t.referrerPolicy}}let aP=(()=>{class t{handler;constructor(n){this.handler=n}request(n,r,o={}){let i;if(n instanceof Yc)i=n;else{let c,u;c=o.headers instanceof Zt?o.headers:new Zt(o.headers),o.params&&(u=o.params instanceof no?o.params:new no({fromObject:o.params})),i=new Yc(n,r,void 0!==o.body?o.body:null,{headers:c,context:o.context,params:u,reportProgress:o.reportProgress,responseType:o.responseType||"json",withCredentials:o.withCredentials,transferCache:o.transferCache,keepalive:o.keepalive,priority:o.priority,cache:o.cache,mode:o.mode,redirect:o.redirect,credentials:o.credentials,referrer:o.referrer,referrerPolicy:o.referrerPolicy,integrity:o.integrity,timeout:o.timeout})}const s=te(i).pipe(Df(c=>this.handler.handle(c)));if(n instanceof Yc||"events"===o.observe)return s;const a=s.pipe(Zr(c=>c instanceof Qc));switch(o.observe||"body"){case"body":switch(i.responseType){case"arraybuffer":return a.pipe(Be(c=>{if(null!==c.body&&!(c.body instanceof ArrayBuffer))throw new I(2806,!1);return c.body}));case"blob":return a.pipe(Be(c=>{if(null!==c.body&&!(c.body instanceof Blob))throw new I(2807,!1);return c.body}));case"text":return a.pipe(Be(c=>{if(null!==c.body&&"string"!=typeof c.body)throw new I(2808,!1);return c.body}));default:return a.pipe(Be(c=>c.body))}case"response":return a;default:throw new I(2809,!1)}}delete(n,r={}){return this.request("DELETE",n,r)}get(n,r={}){return this.request("GET",n,r)}head(n,r={}){return this.request("HEAD",n,r)}jsonp(n,r){return this.request("JSONP",n,{params:(new no).append(r,"JSONP_CALLBACK"),observe:"body",responseType:"json"})}options(n,r={}){return this.request("OPTIONS",n,r)}patch(n,r,o={}){return this.request("PATCH",n,oC(o,r))}post(n,r,o={}){return this.request("POST",n,oC(o,r))}put(n,r,o={}){return this.request("PUT",n,oC(o,r))}static \u0275fac=function(r){return new(r||t)(F(rC))};static \u0275prov=M({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})();const uP=new S("",{factory:()=>!0}),lP=new S("",{factory:()=>"XSRF-TOKEN"}),dP=new S("",{factory:()=>"X-XSRF-TOKEN"});let qY=(()=>{class t{cookieName=E(lP);doc=E(kt);lastCookieString="";lastToken=null;parseCount=0;getToken(){const n=this.doc.cookie||"";return n!==this.lastCookieString&&(this.parseCount++,this.lastToken=RT(n,this.cookieName),this.lastCookieString=n),this.lastToken}static \u0275fac=function(r){return new(r||t)};static \u0275prov=M({token:t,factory:t.\u0275fac,providedIn:"root"})}return t})(),KY=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275prov=M({token:t,factory:function(r){let o=null;return o=r?new(r||t):F(qY),o},providedIn:"root"})}return t})();function WY(t,e){if(!E(uP)||"GET"===t.method||"HEAD"===t.method)return e(t);try{const o=E(fl).href,{origin:i}=new URL(o),{origin:s}=new URL(t.url,i);if(i!==s)return e(t)}catch{return e(t)}const n=E(KY).getToken(),r=E(dP);return null!=n&&!t.headers.has(r)&&(t=t.clone({headers:t.headers.set(r,n)})),e(t)}var io=function(t){return t[t.Interceptors=0]="Interceptors",t[t.LegacyInterceptors=1]="LegacyInterceptors",t[t.CustomXsrfConfiguration=2]="CustomXsrfConfiguration",t[t.NoXsrfProtection=3]="NoXsrfProtection",t[t.JsonpSupport=4]="JsonpSupport",t[t.RequestsMadeViaParent=5]="RequestsMadeViaParent",t[t.Fetch=6]="Fetch",t}(io||{});function YY(...t){const e=[aP,nC,{provide:rC,useExisting:nC},{provide:qf,useFactory:()=>E(nP,{optional:!0})??E(rP)},{provide:Jc,useValue:WY,multi:!0}];for(const n of t)e.push(...n.\u0275providers);return ga(e)}const fP=new S("");function QY(){return function ai(t,e){return{\u0275kind:t,\u0275providers:e}}(io.LegacyInterceptors,[{provide:fP,useFactory:BY},{provide:Jc,useExisting:fP,multi:!0}])}let JY=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=qr({type:t});static \u0275inj=sr({providers:[YY(QY())]})}return t})(),hP=(()=>{class t{_renderer;_elementRef;onChange=n=>{};onTouched=()=>{};constructor(n,r){this._renderer=n,this._elementRef=r}setProperty(n,r){this._renderer.setProperty(this._elementRef.nativeElement,n,r)}registerOnTouched(n){this.onTouched=n}registerOnChange(n){this.onChange=n}setDisabledState(n){this.setProperty("disabled",n)}static \u0275fac=function(r){return new(r||t)(A(yr),A(Qt))};static \u0275dir=z({type:t})}return t})(),ci=(()=>{class t extends hP{static \u0275fac=(()=>{let n;return function(o){return(n||(n=Qe(t)))(o||t)}})();static \u0275dir=z({type:t,features:[le]})}return t})();const Zn=new S(""),eQ={provide:Zn,useExisting:Ce(()=>Zc),multi:!0},nQ=new S("");let Zc=(()=>{class t extends hP{_compositionMode;_composing=!1;constructor(n,r,o){super(n,r),this._compositionMode=o,null==this._compositionMode&&(this._compositionMode=!function tQ(){const t=Hr()?Hr().getUserAgent():"";return/android (\d+)/.test(t.toLowerCase())}())}writeValue(n){this.setProperty("value",n??"")}_handleInput(n){(!this._compositionMode||this._compositionMode&&!this._composing)&&this.onChange(n)}_compositionStart(){this._composing=!0}_compositionEnd(n){this._composing=!1,this._compositionMode&&this.onChange(n)}static \u0275fac=function(r){return new(r||t)(A(yr),A(Qt),A(nQ,8))};static \u0275dir=z({type:t,selectors:[["input","formControlName","",3,"type","checkbox"],["textarea","formControlName",""],["input","formControl","",3,"type","checkbox"],["textarea","formControl",""],["input","ngModel","",3,"type","checkbox"],["textarea","ngModel",""],["","ngDefaultControl",""]],hostBindings:function(r,o){1&r&&at("input",function(s){return o._handleInput(s.target.value)})("blur",function(){return o.onTouched()})("compositionstart",function(){return o._compositionStart()})("compositionend",function(s){return o._compositionEnd(s.target.value)})},standalone:!1,features:[Me([eQ]),le]})}return t})();function iC(t){return null==t||0===function sC(t){return null==t?null:Array.isArray(t)||"string"==typeof t?t.length:t instanceof Set?t.size:null}(t)}const Ct=new S(""),so=new S("");function yP(t){return iC(t.value)?{required:!0}:null}function Kf(t){return null}function TP(t){return null!=t}function wP(t){return ac(t)?et(t):t}function DP(t){let e={};return t.forEach(n=>{e=null!=n?{...e,...n}:e}),0===Object.keys(e).length?null:e}function SP(t,e){return e.map(n=>n(t))}function AP(t){return t.map(e=>function oQ(t){return!t.validate}(e)?e:n=>e.validate(n))}function aC(t){return null!=t?function bP(t){if(!t)return null;const e=t.filter(TP);return 0==e.length?null:function(n){return DP(SP(n,e))}}(AP(t)):null}function cC(t){return null!=t?function kP(t){if(!t)return null;const e=t.filter(TP);return 0==e.length?null:function(n){return function ZY(...t){const e=MN(t),{args:n,keys:r}=NN(t),o=new Ge(i=>{const{length:s}=n;if(!s)return void i.complete();const a=new Array(s);let c=s,u=s;for(let l=0;l<s;l++){let d=!1;Wn(n[l]).subscribe(vt(i,f=>{d||(d=!0,u--),a[l]=f},()=>c--,void 0,()=>{(!c||!d)&&(u||i.next(r?PN(r,a):a),i.complete())}))}});return e?o.pipe(ON(e)):o}(SP(n,e).map(wP)).pipe(Be(DP))}}(AP(t)):null}function RP(t,e){return null===t?[e]:Array.isArray(t)?[...t,e]:[t,e]}function uC(t){return t?Array.isArray(t)?t:[t]:[]}function Wf(t,e){return Array.isArray(t)?t.includes(e):t===e}function OP(t,e){const n=uC(e);return uC(t).forEach(o=>{Wf(n,o)||n.push(o)}),n}function PP(t,e){return uC(e).filter(n=>!Wf(t,n))}class xP{get value(){return this.control?this.control.value:null}get valid(){return this.control?this.control.valid:null}get invalid(){return this.control?this.control.invalid:null}get pending(){return this.control?this.control.pending:null}get disabled(){return this.control?this.control.disabled:null}get enabled(){return this.control?this.control.enabled:null}get errors(){return this.control?this.control.errors:null}get pristine(){return this.control?this.control.pristine:null}get dirty(){return this.control?this.control.dirty:null}get touched(){return this.control?this.control.touched:null}get status(){return this.control?this.control.status:null}get untouched(){return this.control?this.control.untouched:null}get statusChanges(){return this.control?this.control.statusChanges:null}get valueChanges(){return this.control?this.control.valueChanges:null}get path(){return null}_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators=[];_rawAsyncValidators=[];_setValidators(e){this._rawValidators=e||[],this._composedValidatorFn=aC(this._rawValidators)}_setAsyncValidators(e){this._rawAsyncValidators=e||[],this._composedAsyncValidatorFn=cC(this._rawAsyncValidators)}get validator(){return this._composedValidatorFn||null}get asyncValidator(){return this._composedAsyncValidatorFn||null}_onDestroyCallbacks=[];_registerOnDestroy(e){this._onDestroyCallbacks.push(e)}_invokeOnDestroyCallbacks(){this._onDestroyCallbacks.forEach(e=>e()),this._onDestroyCallbacks=[]}reset(e=void 0){this.control&&this.control.reset(e)}hasError(e,n){return!!this.control&&this.control.hasError(e,n)}getError(e,n){return this.control?this.control.getError(e,n):null}}class Et extends xP{name;get formDirective(){return null}get path(){return null}}class ao extends xP{_parent=null;name=null;valueAccessor=null}class FP{_cd;constructor(e){this._cd=e}get isTouched(){return this._cd?.control?._touched?.(),!!this._cd?.control?.touched}get isUntouched(){return!!this._cd?.control?.untouched}get isPristine(){return this._cd?.control?._pristine?.(),!!this._cd?.control?.pristine}get isDirty(){return!!this._cd?.control?.dirty}get isValid(){return this._cd?.control?._status?.(),!!this._cd?.control?.valid}get isInvalid(){return!!this._cd?.control?.invalid}get isPending(){return!!this._cd?.control?.pending}get isSubmitted(){return this._cd?._submitted?.(),!!this._cd?.submitted}}let lC=(()=>{class t extends FP{constructor(n){super(n)}static \u0275fac=function(r){return new(r||t)(A(ao,2))};static \u0275dir=z({type:t,selectors:[["","formControlName",""],["","ngModel",""],["","formControl",""]],hostVars:14,hostBindings:function(r,o){2&r&&Qd("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)},standalone:!1,features:[le]})}return t})(),dC=(()=>{class t extends FP{constructor(n){super(n)}static \u0275fac=function(r){return new(r||t)(A(Et,10))};static \u0275dir=z({type:t,selectors:[["","formGroupName",""],["","formArrayName",""],["","ngModelGroup",""],["","formGroup",""],["","formArray",""],["form",3,"ngNoForm",""],["","ngForm",""]],hostVars:16,hostBindings:function(r,o){2&r&&Qd("ng-untouched",o.isUntouched)("ng-touched",o.isTouched)("ng-pristine",o.isPristine)("ng-dirty",o.isDirty)("ng-valid",o.isValid)("ng-invalid",o.isInvalid)("ng-pending",o.isPending)("ng-submitted",o.isSubmitted)},standalone:!1,features:[le]})}return t})();const Xc="VALID",Qf="INVALID",Os="PENDING",eu="DISABLED";class Ps{}class HP extends Ps{value;source;constructor(e,n){super(),this.value=e,this.source=n}}class pC extends Ps{pristine;source;constructor(e,n){super(),this.pristine=e,this.source=n}}class gC extends Ps{touched;source;constructor(e,n){super(),this.touched=e,this.source=n}}class Jf extends Ps{status;source;constructor(e,n){super(),this.status=e,this.source=n}}class BP extends Ps{source;constructor(e){super(),this.source=e}}class mC extends Ps{source;constructor(e){super(),this.source=e}}function yC(t){return(Zf(t)?t.validators:t)||null}function _C(t,e){return(Zf(e)?e.asyncValidators:t)||null}function Zf(t){return null!=t&&!Array.isArray(t)&&"object"==typeof t}class vC{_pendingDirty=!1;_hasOwnPendingAsyncValidator=null;_pendingTouched=!1;_onCollectionChange=()=>{};_updateOn;_parent=null;_asyncValidationSubscription;_composedValidatorFn;_composedAsyncValidatorFn;_rawValidators;_rawAsyncValidators;value;constructor(e,n){this._assignValidators(e),this._assignAsyncValidators(n)}get validator(){return this._composedValidatorFn}set validator(e){this._rawValidators=this._composedValidatorFn=e}get asyncValidator(){return this._composedAsyncValidatorFn}set asyncValidator(e){this._rawAsyncValidators=this._composedAsyncValidatorFn=e}get parent(){return this._parent}get status(){return fe(this.statusReactive)}set status(e){fe(()=>this.statusReactive.set(e))}_status=pn(()=>this.statusReactive());statusReactive=wn(void 0);get valid(){return this.status===Xc}get invalid(){return this.status===Qf}get pending(){return this.status==Os}get disabled(){return this.status===eu}get enabled(){return this.status!==eu}errors;get pristine(){return fe(this.pristineReactive)}set pristine(e){fe(()=>this.pristineReactive.set(e))}_pristine=pn(()=>this.pristineReactive());pristineReactive=wn(!0);get dirty(){return!this.pristine}get touched(){return fe(this.touchedReactive)}set touched(e){fe(()=>this.touchedReactive.set(e))}_touched=pn(()=>this.touchedReactive());touchedReactive=wn(!1);get untouched(){return!this.touched}_events=new rn;events=this._events.asObservable();valueChanges;statusChanges;get updateOn(){return this._updateOn?this._updateOn:this.parent?this.parent.updateOn:"change"}setValidators(e){this._assignValidators(e)}setAsyncValidators(e){this._assignAsyncValidators(e)}addValidators(e){this.setValidators(OP(e,this._rawValidators))}addAsyncValidators(e){this.setAsyncValidators(OP(e,this._rawAsyncValidators))}removeValidators(e){this.setValidators(PP(e,this._rawValidators))}removeAsyncValidators(e){this.setAsyncValidators(PP(e,this._rawAsyncValidators))}hasValidator(e){return Wf(this._rawValidators,e)}hasAsyncValidator(e){return Wf(this._rawAsyncValidators,e)}clearValidators(){this.validator=null}clearAsyncValidators(){this.asyncValidator=null}markAsTouched(e={}){const n=!1===this.touched;this.touched=!0;const r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsTouched({...e,sourceControl:r}),n&&!1!==e.emitEvent&&this._events.next(new gC(!0,r))}markAllAsDirty(e={}){this.markAsDirty({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsDirty(e))}markAllAsTouched(e={}){this.markAsTouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:this}),this._forEachChild(n=>n.markAllAsTouched(e))}markAsUntouched(e={}){const n=!0===this.touched;this.touched=!1,this._pendingTouched=!1;const r=e.sourceControl??this;this._forEachChild(o=>{o.markAsUntouched({onlySelf:!0,emitEvent:e.emitEvent,sourceControl:r})}),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,r),n&&!1!==e.emitEvent&&this._events.next(new gC(!1,r))}markAsDirty(e={}){const n=!0===this.pristine;this.pristine=!1;const r=e.sourceControl??this;this._parent&&!e.onlySelf&&this._parent.markAsDirty({...e,sourceControl:r}),n&&!1!==e.emitEvent&&this._events.next(new pC(!1,r))}markAsPristine(e={}){const n=!1===this.pristine;this.pristine=!0,this._pendingDirty=!1;const r=e.sourceControl??this;this._forEachChild(o=>{o.markAsPristine({onlySelf:!0,emitEvent:e.emitEvent})}),this._parent&&!e.onlySelf&&this._parent._updatePristine(e,r),n&&!1!==e.emitEvent&&this._events.next(new pC(!0,r))}markAsPending(e={}){this.status=Os;const n=e.sourceControl??this;!1!==e.emitEvent&&(this._events.next(new Jf(this.status,n)),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.markAsPending({...e,sourceControl:n})}disable(e={}){const n=this._parentMarkedDirty(e.onlySelf);this.status=eu,this.errors=null,this._forEachChild(o=>{o.disable({...e,onlySelf:!0})}),this._updateValue();const r=e.sourceControl??this;!1!==e.emitEvent&&(this._events.next(new HP(this.value,r)),this._events.next(new Jf(this.status,r)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._updateAncestors({...e,skipPristineCheck:n},this),this._onDisabledChange.forEach(o=>o(!0))}enable(e={}){const n=this._parentMarkedDirty(e.onlySelf);this.status=Xc,this._forEachChild(r=>{r.enable({...e,onlySelf:!0})}),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent}),this._updateAncestors({...e,skipPristineCheck:n},this),this._onDisabledChange.forEach(r=>r(!1))}_updateAncestors(e,n){this._parent&&!e.onlySelf&&(this._parent.updateValueAndValidity(e),e.skipPristineCheck||this._parent._updatePristine({},n),this._parent._updateTouched({},n))}setParent(e){this._parent=e}getRawValue(){return this.value}updateValueAndValidity(e={}){if(this._setInitialStatus(),this._updateValue(),this.enabled){const r=this._cancelExistingSubscription();this.errors=this._runValidator(),this.status=this._calculateStatus(),(this.status===Xc||this.status===Os)&&this._runAsyncValidator(r,e.emitEvent)}const n=e.sourceControl??this;!1!==e.emitEvent&&(this._events.next(new HP(this.value,n)),this._events.next(new Jf(this.status,n)),this.valueChanges.emit(this.value),this.statusChanges.emit(this.status)),this._parent&&!e.onlySelf&&this._parent.updateValueAndValidity({...e,sourceControl:n})}_updateTreeValidity(e={emitEvent:!0}){this._forEachChild(n=>n._updateTreeValidity(e)),this.updateValueAndValidity({onlySelf:!0,emitEvent:e.emitEvent})}_setInitialStatus(){this.status=this._allControlsDisabled()?eu:Xc}_runValidator(){return this.validator?this.validator(this):null}_runAsyncValidator(e,n){if(this.asyncValidator){this.status=Os,this._hasOwnPendingAsyncValidator={emitEvent:!1!==n,shouldHaveEmitted:!1!==e};const r=wP(this.asyncValidator(this));this._asyncValidationSubscription=r.subscribe(o=>{this._hasOwnPendingAsyncValidator=null,this.setErrors(o,{emitEvent:n,shouldHaveEmitted:e})})}}_cancelExistingSubscription(){if(this._asyncValidationSubscription){this._asyncValidationSubscription.unsubscribe();const e=(this._hasOwnPendingAsyncValidator?.emitEvent||this._hasOwnPendingAsyncValidator?.shouldHaveEmitted)??!1;return this._hasOwnPendingAsyncValidator=null,e}return!1}setErrors(e,n={}){this.errors=e,this._updateControlsErrors(!1!==n.emitEvent,this,n.shouldHaveEmitted)}get(e){let n=e;return null==n||(Array.isArray(n)||(n=n.split(".")),0===n.length)?null:n.reduce((r,o)=>r&&r._find(o),this)}getError(e,n){const r=n?this.get(n):this;return r&&r.errors?r.errors[e]:null}hasError(e,n){return!!this.getError(e,n)}get root(){let e=this;for(;e._parent;)e=e._parent;return e}_updateControlsErrors(e,n,r){this.status=this._calculateStatus(),e&&this.statusChanges.emit(this.status),(e||r)&&this._events.next(new Jf(this.status,n)),this._parent&&this._parent._updateControlsErrors(e,n,r)}_initObservables(){this.valueChanges=new qe,this.statusChanges=new qe}_calculateStatus(){return this._allControlsDisabled()?eu:this.errors?Qf:this._hasOwnPendingAsyncValidator||this._anyControlsHaveStatus(Os)?Os:this._anyControlsHaveStatus(Qf)?Qf:Xc}_anyControlsHaveStatus(e){return this._anyControls(n=>n.status===e)}_anyControlsDirty(){return this._anyControls(e=>e.dirty)}_anyControlsTouched(){return this._anyControls(e=>e.touched)}_updatePristine(e,n){const r=!this._anyControlsDirty(),o=this.pristine!==r;this.pristine=r,this._parent&&!e.onlySelf&&this._parent._updatePristine(e,n),o&&this._events.next(new pC(this.pristine,n))}_updateTouched(e={},n){this.touched=this._anyControlsTouched(),this._events.next(new gC(this.touched,n)),this._parent&&!e.onlySelf&&this._parent._updateTouched(e,n)}_onDisabledChange=[];_registerOnCollectionChange(e){this._onCollectionChange=e}_setUpdateStrategy(e){Zf(e)&&null!=e.updateOn&&(this._updateOn=e.updateOn)}_parentMarkedDirty(e){return!e&&!(!this._parent||!this._parent.dirty)&&!this._parent._anyControlsDirty()}_find(e){return null}_assignValidators(e){this._rawValidators=Array.isArray(e)?e.slice():e,this._composedValidatorFn=function dQ(t){return Array.isArray(t)?aC(t):t||null}(this._rawValidators)}_assignAsyncValidators(e){this._rawAsyncValidators=Array.isArray(e)?e.slice():e,this._composedAsyncValidatorFn=function fQ(t){return Array.isArray(t)?cC(t):t||null}(this._rawAsyncValidators)}}class CC extends vC{constructor(e,n,r){super(yC(n),_C(r,n)),this.controls=e,this._initObservables(),this._setUpdateStrategy(n),this._setUpControls(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator})}controls;registerControl(e,n){return this.controls[e]?this.controls[e]:(this.controls[e]=n,n.setParent(this),n._registerOnCollectionChange(this._onCollectionChange),n)}addControl(e,n,r={}){this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}removeControl(e,n={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],this.updateValueAndValidity({emitEvent:n.emitEvent}),this._onCollectionChange()}setControl(e,n,r={}){this.controls[e]&&this.controls[e]._registerOnCollectionChange(()=>{}),delete this.controls[e],n&&this.registerControl(e,n),this.updateValueAndValidity({emitEvent:r.emitEvent}),this._onCollectionChange()}contains(e){return this.controls.hasOwnProperty(e)&&this.controls[e].enabled}setValue(e,n={}){(function jP(t,e,n){t._forEachChild((r,o)=>{if(void 0===n[o])throw new I(1002,"")})})(this,0,e),Object.keys(e).forEach(r=>{(function VP(t,e,n){const r=t.controls;if(!(e?Object.keys(r):r).length)throw new I(1e3,"");if(!r[n])throw new I(1001,"")})(this,!0,r),this.controls[r].setValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n)}patchValue(e,n={}){null!=e&&(Object.keys(e).forEach(r=>{const o=this.controls[r];o&&o.patchValue(e[r],{onlySelf:!0,emitEvent:n.emitEvent})}),this.updateValueAndValidity(n))}reset(e={},n={}){this._forEachChild((r,o)=>{r.reset(e?e[o]:null,{...n,onlySelf:!0})}),this._updatePristine(n,this),this._updateTouched(n,this),this.updateValueAndValidity(n),!1!==n?.emitEvent&&this._events.next(new mC(this))}getRawValue(){return this._reduceChildren({},(e,n,r)=>(e[r]=n.getRawValue(),e))}_syncPendingControls(){let e=this._reduceChildren(!1,(n,r)=>!!r._syncPendingControls()||n);return e&&this.updateValueAndValidity({onlySelf:!0}),e}_forEachChild(e){Object.keys(this.controls).forEach(n=>{const r=this.controls[n];r&&e(r,n)})}_setUpControls(){this._forEachChild(e=>{e.setParent(this),e._registerOnCollectionChange(this._onCollectionChange)})}_updateValue(){this.value=this._reduceValue()}_anyControls(e){for(const[n,r]of Object.entries(this.controls))if(this.contains(n)&&e(r))return!0;return!1}_reduceValue(){return this._reduceChildren({},(n,r,o)=>((r.enabled||this.disabled)&&(n[o]=r.value),n))}_reduceChildren(e,n){let r=e;return this._forEachChild((o,i)=>{r=n(r,o,i)}),r}_allControlsDisabled(){for(const e of Object.keys(this.controls))if(this.controls[e].enabled)return!1;return Object.keys(this.controls).length>0||this.disabled}_find(e){return this.controls.hasOwnProperty(e)?this.controls[e]:null}}const xs=new S("",{factory:()=>Xf}),Xf="always";function tu(t,e,n=Xf){EC(t,e),e.valueAccessor.writeValue(t.value),(t.disabled||"always"===n)&&e.valueAccessor.setDisabledState?.(t.disabled),function gQ(t,e){e.valueAccessor.registerOnChange(n=>{t._pendingValue=n,t._pendingChange=!0,t._pendingDirty=!0,"change"===t.updateOn&&$P(t,e)})}(t,e),function yQ(t,e){const n=(r,o)=>{e.valueAccessor.writeValue(r),o&&e.viewToModelUpdate(r)};t.registerOnChange(n),e._registerOnDestroy(()=>{t._unregisterOnChange(n)})}(t,e),function mQ(t,e){e.valueAccessor.registerOnTouched(()=>{t._pendingTouched=!0,"blur"===t.updateOn&&t._pendingChange&&$P(t,e),"submit"!==t.updateOn&&t.markAsTouched()})}(t,e),function pQ(t,e){if(e.valueAccessor.setDisabledState){const n=r=>{e.valueAccessor.setDisabledState(r)};t.registerOnDisabledChange(n),e._registerOnDestroy(()=>{t._unregisterOnDisabledChange(n)})}}(t,e)}function nh(t,e){t.forEach(n=>{n.registerOnValidatorChange&&n.registerOnValidatorChange(e)})}function EC(t,e){const n=function MP(t){return t._rawValidators}(t);null!==e.validator?t.setValidators(RP(n,e.validator)):"function"==typeof n&&t.setValidators([n]);const r=function NP(t){return t._rawAsyncValidators}(t);null!==e.asyncValidator?t.setAsyncValidators(RP(r,e.asyncValidator)):"function"==typeof r&&t.setAsyncValidators([r]);const o=()=>t.updateValueAndValidity();nh(e._rawValidators,o),nh(e._rawAsyncValidators,o)}function $P(t,e){t._pendingDirty&&t.markAsDirty(),t.setValue(t._pendingValue,{emitModelToViewChange:!1}),e.viewToModelUpdate(t._pendingValue),t._pendingChange=!1}const IQ={provide:Et,useExisting:Ce(()=>Fs)},nu=Promise.resolve();let Fs=(()=>{class t extends Et{callSetDisabledState;get submitted(){return fe(this.submittedReactive)}_submitted=pn(()=>this.submittedReactive());submittedReactive=wn(!1);_directives=new Set;form;ngSubmit=new qe;options;constructor(n,r,o){super(),this.callSetDisabledState=o,this.form=new CC({},aC(n),cC(r))}ngAfterViewInit(){this._setUpdateStrategy()}get formDirective(){return this}get control(){return this.form}get path(){return[]}get controls(){return this.form.controls}addControl(n){nu.then(()=>{const r=this._findContainer(n.path);n.control=r.registerControl(n.name,n.control),tu(n.control,n,this.callSetDisabledState),n.control.updateValueAndValidity({emitEvent:!1}),this._directives.add(n)})}getControl(n){return this.form.get(n.path)}removeControl(n){nu.then(()=>{const r=this._findContainer(n.path);r&&r.removeControl(n.name),this._directives.delete(n)})}addFormGroup(n){nu.then(()=>{const r=this._findContainer(n.path),o=new CC({});(function GP(t,e){EC(t,e)})(o,n),r.registerControl(n.name,o),o.updateValueAndValidity({emitEvent:!1})})}removeFormGroup(n){nu.then(()=>{const r=this._findContainer(n.path);r&&r.removeControl(n.name)})}getFormGroup(n){return this.form.get(n.path)}updateModel(n,r){nu.then(()=>{this.form.get(n.path).setValue(r)})}setValue(n){this.control.setValue(n)}onSubmit(n){return this.submittedReactive.set(!0),function zP(t,e){t._syncPendingControls(),e.forEach(n=>{const r=n.control;"submit"===r.updateOn&&r._pendingChange&&(n.viewToModelUpdate(r._pendingValue),r._pendingChange=!1)})}(this.form,this._directives),this.ngSubmit.emit(n),this.form._events.next(new BP(this.control)),"dialog"===n?.target?.method}onReset(){this.resetForm()}resetForm(n=void 0){this.form.reset(n),this.submittedReactive.set(!1)}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.form._updateOn=this.options.updateOn)}_findContainer(n){return n.pop(),n.length?this.form.get(n):this.form}static \u0275fac=function(r){return new(r||t)(A(Ct,10),A(so,10),A(xs,8))};static \u0275dir=z({type:t,selectors:[["form",3,"ngNoForm","",3,"formGroup","",3,"formArray",""],["ng-form"],["","ngForm",""]],hostBindings:function(r,o){1&r&&at("submit",function(s){return o.onSubmit(s)})("reset",function(){return o.onReset()})},inputs:{options:[0,"ngFormOptions","options"]},outputs:{ngSubmit:"ngSubmit"},exportAs:["ngForm"],standalone:!1,features:[Me([IQ]),le]})}return t})();function qP(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}function KP(t){return"object"==typeof t&&null!==t&&2===Object.keys(t).length&&"value"in t&&"disabled"in t}const WP=class extends vC{defaultValue=null;_onChange=[];_pendingValue;_pendingChange=!1;constructor(e=null,n,r){super(yC(n),_C(r,n)),this._applyFormState(e),this._setUpdateStrategy(n),this._initObservables(),this.updateValueAndValidity({onlySelf:!0,emitEvent:!!this.asyncValidator}),Zf(n)&&(n.nonNullable||n.initialValueIsDefault)&&(this.defaultValue=KP(e)?e.value:e)}setValue(e,n={}){this.value=this._pendingValue=e,this._onChange.length&&!1!==n.emitModelToViewChange&&this._onChange.forEach(r=>r(this.value,!1!==n.emitViewToModelChange)),this.updateValueAndValidity(n)}patchValue(e,n={}){this.setValue(e,n)}reset(e=this.defaultValue,n={}){this._applyFormState(e),this.markAsPristine(n),this.markAsUntouched(n),this.setValue(this.value,n),n.overwriteDefaultValue&&(this.defaultValue=this.value),this._pendingChange=!1,!1!==n?.emitEvent&&this._events.next(new mC(this))}_updateValue(){}_anyControls(e){return!1}_allControlsDisabled(){return this.disabled}registerOnChange(e){this._onChange.push(e)}_unregisterOnChange(e){qP(this._onChange,e)}registerOnDisabledChange(e){this._onDisabledChange.push(e)}_unregisterOnDisabledChange(e){qP(this._onDisabledChange,e)}_forEachChild(e){}_syncPendingControls(){return!("submit"!==this.updateOn||(this._pendingDirty&&this.markAsDirty(),this._pendingTouched&&this.markAsTouched(),!this._pendingChange)||(this.setValue(this._pendingValue,{onlySelf:!0,emitModelToViewChange:!1}),0))}_applyFormState(e){KP(e)?(this.value=this._pendingValue=e.value,e.disabled?this.disable({onlySelf:!0,emitEvent:!1}):this.enable({onlySelf:!0,emitEvent:!1})):this.value=this._pendingValue=e}},AQ={provide:ao,useExisting:Ce(()=>sh)},YP=Promise.resolve();let sh=(()=>{class t extends ao{_changeDetectorRef;callSetDisabledState;control=new WP;static ngAcceptInputType_isDisabled;_registered=!1;viewModel;name="";isDisabled;model;options;update=new qe;constructor(n,r,o,i,s,a){super(),this._changeDetectorRef=s,this.callSetDisabledState=a,this._parent=n,this._setValidators(r),this._setAsyncValidators(o),this.valueAccessor=function wC(t,e){if(!e)return null;let n,r,o;return Array.isArray(e),e.forEach(i=>{i.constructor===Zc?n=i:function CQ(t){return Object.getPrototypeOf(t.constructor)===ci}(i)?r=i:o=i}),o||r||n||null}(0,i)}ngOnChanges(n){if(this._checkForErrors(),!this._registered||"name"in n){if(this._registered&&(this._checkName(),this.formDirective)){const r=n.name.previousValue;this.formDirective.removeControl({name:r,path:this._getPath(r)})}this._setUpControl()}"isDisabled"in n&&this._updateDisabled(n),function TC(t,e){if(!t.hasOwnProperty("model"))return!1;const n=t.model;return!!n.isFirstChange()||!Object.is(e,n.currentValue)}(n,this.viewModel)&&(this._updateValue(this.model),this.viewModel=this.model)}ngOnDestroy(){this.formDirective&&this.formDirective.removeControl(this)}get path(){return this._getPath(this.name)}get formDirective(){return this._parent?this._parent.formDirective:null}viewToModelUpdate(n){this.viewModel=n,this.update.emit(n)}_setUpControl(){this._setUpdateStrategy(),this._isStandalone()?this._setUpStandalone():this.formDirective.addControl(this),this._registered=!0}_setUpdateStrategy(){this.options&&null!=this.options.updateOn&&(this.control._updateOn=this.options.updateOn)}_isStandalone(){return!this._parent||!(!this.options||!this.options.standalone)}_setUpStandalone(){tu(this.control,this,this.callSetDisabledState),this.control.updateValueAndValidity({emitEvent:!1})}_checkForErrors(){this._checkName()}_checkName(){this.options&&this.options.name&&(this.name=this.options.name),this._isStandalone()}_updateValue(n){YP.then(()=>{this.control.setValue(n,{emitViewToModelChange:!1}),this._changeDetectorRef?.markForCheck()})}_updateDisabled(n){const r=n.isDisabled.currentValue,o=0!==r&&Ts(r);YP.then(()=>{o&&!this.control.disabled?this.control.disable():!o&&this.control.disabled&&this.control.enable(),this._changeDetectorRef?.markForCheck()})}_getPath(n){return this._parent?function eh(t,e){return[...e.path,t]}(n,this._parent):[n]}static \u0275fac=function(r){return new(r||t)(A(Et,9),A(Ct,10),A(so,10),A(Zn,10),A(Tc,8),A(xs,8))};static \u0275dir=z({type:t,selectors:[["","ngModel","",3,"formControlName","",3,"formControl",""]],inputs:{name:"name",isDisabled:[0,"disabled","isDisabled"],model:[0,"ngModel","model"],options:[0,"ngModelOptions","options"]},outputs:{update:"ngModelChange"},exportAs:["ngModel"],standalone:!1,features:[Me([AQ]),le,Dn]})}return t})(),DC=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275dir=z({type:t,selectors:[["form",3,"ngNoForm","",3,"ngNativeValidate",""]],hostAttrs:["novalidate",""],standalone:!1})}return t})(),ui=(()=>{class t{_validator=Kf;_onChange;_enabled;ngOnChanges(n){if(this.inputName in n){const r=this.normalizeInput(n[this.inputName].currentValue);this._enabled=this.enabled(r),this._validator=this._enabled?this.createValidator(r):Kf,this._onChange&&this._onChange()}}validate(n){return this._validator(n)}registerOnValidatorChange(n){this._onChange=n}enabled(n){return null!=n}static \u0275fac=function(r){return new(r||t)};static \u0275dir=z({type:t,features:[Dn]})}return t})();const KQ={provide:Ct,useExisting:Ce(()=>uh),multi:!0};let uh=(()=>{class t extends ui{required;inputName="required";normalizeInput=Ts;createValidator=n=>yP;enabled(n){return n}static \u0275fac=(()=>{let n;return function(o){return(n||(n=Qe(t)))(o||t)}})();static \u0275dir=z({type:t,selectors:[["","required","","formControlName","",3,"type","checkbox"],["","required","","formControl","",3,"type","checkbox"],["","required","","ngModel","",3,"type","checkbox"]],hostVars:1,hostBindings:function(r,o){2&r&&Kn("required",o._enabled?"":null)},inputs:{required:"required"},standalone:!1,features:[Me([KQ]),le]})}return t})(),XQ=(()=>{class t{static \u0275fac=function(r){return new(r||t)};static \u0275mod=qr({type:t});static \u0275inj=sr({})}return t})(),bC=(()=>{class t{static withConfig(n){return{ngModule:t,providers:[{provide:xs,useValue:n.callSetDisabledState??Xf}]}}static \u0275fac=function(r){return new(r||t)};static \u0275mod=qr({type:t});static \u0275inj=sr({imports:[XQ]})}return t})();const T={LIBRARY_NAME:"MSAL.JS",SKU:"msal.js.common",CACHE_PREFIX:"msal",DEFAULT_AUTHORITY:"https://login.microsoftonline.com/common/",DEFAULT_AUTHORITY_HOST:"login.microsoftonline.com",DEFAULT_COMMON_TENANT:"common",ADFS:"adfs",DSTS:"dstsv2",AAD_INSTANCE_DISCOVERY_ENDPT:"https://login.microsoftonline.com/common/discovery/instance?api-version=1.1&authorization_endpoint=",CIAM_AUTH_URL:".ciamlogin.com",AAD_TENANT_DOMAIN_SUFFIX:".onmicrosoft.com",RESOURCE_DELIM:"|",NO_ACCOUNT:"NO_ACCOUNT",CLAIMS:"claims",CONSUMER_UTID:"9188040d-6c67-4c5b-b112-36a304b66dad",OPENID_SCOPE:"openid",PROFILE_SCOPE:"profile",OFFLINE_ACCESS_SCOPE:"offline_access",EMAIL_SCOPE:"email",CODE_RESPONSE_TYPE:"code",CODE_GRANT_TYPE:"authorization_code",RT_GRANT_TYPE:"refresh_token",FRAGMENT_RESPONSE_MODE:"fragment",S256_CODE_CHALLENGE_METHOD:"S256",URL_FORM_CONTENT_TYPE:"application/x-www-form-urlencoded;charset=utf-8",AUTHORIZATION_PENDING:"authorization_pending",NOT_DEFINED:"not_defined",EMPTY_STRING:"",NOT_APPLICABLE:"N/A",NOT_AVAILABLE:"Not Available",FORWARD_SLASH:"/",IMDS_ENDPOINT:"http://169.254.169.254/metadata/instance/compute/location",IMDS_VERSION:"2020-06-01",IMDS_TIMEOUT:2e3,AZURE_REGION_AUTO_DISCOVER_FLAG:"TryAutoDetect",REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX:"login.microsoft.com",KNOWN_PUBLIC_CLOUDS:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"],TOKEN_RESPONSE_TYPE:"token",ID_TOKEN_RESPONSE_TYPE:"id_token",SHR_NONCE_VALIDITY:240,INVALID_INSTANCE:"invalid_instance"},Ls=[T.OPENID_SCOPE,T.PROFILE_SCOPE,T.OFFLINE_ACCESS_SCOPE],y0=[...Ls,T.EMAIL_SCOPE],ct={ID_TOKEN:"idtoken",CLIENT_INFO:"client.info",ADAL_ID_TOKEN:"adal.idtoken",ERROR:"error",ERROR_DESC:"error.description",ACTIVE_ACCOUNT:"active-account",ACTIVE_ACCOUNT_FILTERS:"active-account-filters"},ut={LOGIN:"login",SELECT_ACCOUNT:"select_account",CONSENT:"consent",NONE:"none",CREATE:"create",NO_SESSION:"no_session"},_0={PLAIN:"plain",S256:"S256"},ou={QUERY:"query",FRAGMENT:"fragment"},e9={...ou,FORM_POST:"form_post"},J={ID_TOKEN:"IdToken",ACCESS_TOKEN:"AccessToken",ACCESS_TOKEN_WITH_AUTH_SCHEME:"AccessToken_With_AuthScheme",REFRESH_TOKEN:"RefreshToken"},kC="appmetadata",pt={SCHEMA_VERSION:5,MAX_CUR_HEADER_BYTES:80,MAX_LAST_HEADER_BYTES:330,MAX_CACHED_ERRORS:50,CACHE_KEY:"server-telemetry",CATEGORY_SEPARATOR:"|",VALUE_SEPARATOR:",",OVERFLOW_TRUE:"1",OVERFLOW_FALSE:"0",UNKNOWN_ERROR:"unknown_error"},ve={BEARER:"Bearer",POP:"pop",SSH:"ssh-cert"};var xe=function(t){return t[t.Error=0]="Error",t[t.Warning=1]="Warning",t[t.Info=2]="Info",t[t.Verbose=3]="Verbose",t[t.Trace=4]="Trace",t}(xe||{});class lo{constructor(e,n,r){this.level=xe.Info;const i=e||lo.createDefaultLoggerOptions();this.localCallback=i.loggerCallback||(()=>{}),this.piiLoggingEnabled=i.piiLoggingEnabled||!1,this.level="number"==typeof i.logLevel?i.logLevel:xe.Info,this.correlationId=i.correlationId||T.EMPTY_STRING,this.packageName=n||T.EMPTY_STRING,this.packageVersion=r||T.EMPTY_STRING}static createDefaultLoggerOptions(){return{loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:xe.Info}}clone(e,n,r){return new lo({loggerCallback:this.localCallback,piiLoggingEnabled:this.piiLoggingEnabled,logLevel:this.level,correlationId:r||this.correlationId},e,n)}logMessage(e,n){if(n.logLevel>this.level||!this.piiLoggingEnabled&&n.containsPii)return;const i=`[${(new Date).toUTCString()}] : [${n.correlationId||this.correlationId||""}] : ${this.packageName}@${this.packageVersion} : ${xe[n.logLevel]} - ${e}`;this.executeCallback(n.logLevel,i,n.containsPii||!1)}executeCallback(e,n,r){this.localCallback&&this.localCallback(e,n,r)}error(e,n){this.logMessage(e,{logLevel:xe.Error,containsPii:!1,correlationId:n||T.EMPTY_STRING})}errorPii(e,n){this.logMessage(e,{logLevel:xe.Error,containsPii:!0,correlationId:n||T.EMPTY_STRING})}warning(e,n){this.logMessage(e,{logLevel:xe.Warning,containsPii:!1,correlationId:n||T.EMPTY_STRING})}warningPii(e,n){this.logMessage(e,{logLevel:xe.Warning,containsPii:!0,correlationId:n||T.EMPTY_STRING})}info(e,n){this.logMessage(e,{logLevel:xe.Info,containsPii:!1,correlationId:n||T.EMPTY_STRING})}infoPii(e,n){this.logMessage(e,{logLevel:xe.Info,containsPii:!0,correlationId:n||T.EMPTY_STRING})}verbose(e,n){this.logMessage(e,{logLevel:xe.Verbose,containsPii:!1,correlationId:n||T.EMPTY_STRING})}verbosePii(e,n){this.logMessage(e,{logLevel:xe.Verbose,containsPii:!0,correlationId:n||T.EMPTY_STRING})}trace(e,n){this.logMessage(e,{logLevel:xe.Trace,containsPii:!1,correlationId:n||T.EMPTY_STRING})}tracePii(e,n){this.logMessage(e,{logLevel:xe.Trace,containsPii:!0,correlationId:n||T.EMPTY_STRING})}isPiiLoggingEnabled(){return this.piiLoggingEnabled||!1}}const au="unexpected_error",NC="post_request_failed",gh={[au]:"Unexpected error in authentication.",[NC]:"Post request failed from the network, could be a 4xx/5xx or a network unavailability. Please check the exact error code for details."};class Ne extends Error{constructor(e,n,r){super(n?`${e}: ${n}`:e),Object.setPrototypeOf(this,Ne.prototype),this.errorCode=e||T.EMPTY_STRING,this.errorMessage=n||T.EMPTY_STRING,this.subError=r||T.EMPTY_STRING,this.name="AuthError"}setCorrelationId(e){this.correlationId=e}}function I0(t,e){return new Ne(t,e?`${gh[t]} ${e}`:gh[t])}const cu="client_info_decoding_error",mh="client_info_empty_error",uu="token_parsing_error",yh="null_or_empty_token",On="endpoints_resolution_error",_h="network_error",vh="openid_config_error",Ch="hash_not_deserialized",fo="invalid_state",Eh="state_mismatch",Hs="state_not_found",Ih="nonce_mismatch",lu="auth_time_not_found",Th="max_age_transpired",OC="multiple_matching_tokens",PC="multiple_matching_accounts",wh="multiple_matching_appMetadata",Dh="request_cannot_be_made",Sh="cannot_remove_empty_scope",Ah="cannot_append_scopeset",du="empty_input_scopeset",xC="device_code_polling_cancelled",FC="device_code_expired",LC="device_code_unknown_error",fu="no_account_in_silent_request",bh="invalid_cache_record",hu="invalid_cache_environment",pu="no_account_found",gu="no_crypto_object",mu="unexpected_credential_type",UC="invalid_assertion",HC="invalid_client_credential",Pn="token_refresh_required",BC="user_timeout_reached",kh="token_claims_cnf_required_for_signedjwt",Rh="authorization_code_missing_from_server_response",VC="binding_key_not_removed",Mh="end_session_endpoint_not_supported",yu="key_id_missing",jC="no_network_connectivity",$C="user_canceled",GC="missing_tenant_id_error",ne="method_not_implemented",zC="nested_app_auth_bridge_disabled",Z={[cu]:"The client info could not be parsed/decoded correctly",[mh]:"The client info was empty",[uu]:"Token cannot be parsed",[yh]:"The token is null or empty",[On]:"Endpoints cannot be resolved",[_h]:"Network request failed",[vh]:"Could not retrieve endpoints. Check your authority and verify the .well-known/openid-configuration endpoint returns the required endpoints.",[Ch]:"The hash parameters could not be deserialized",[fo]:"State was not the expected format",[Eh]:"State mismatch error",[Hs]:"State not found",[Ih]:"Nonce mismatch error",[lu]:"Max Age was requested and the ID token is missing the auth_time variable. auth_time is an optional claim and is not enabled by default - it must be enabled. See https://aka.ms/msaljs/optional-claims for more information.",[Th]:"Max Age is set to 0, or too much time has elapsed since the last end-user authentication.",[OC]:"The cache contains multiple tokens satisfying the requirements. Call AcquireToken again providing more requirements such as authority or account.",[PC]:"The cache contains multiple accounts satisfying the given parameters. Please pass more info to obtain the correct account",[wh]:"The cache contains multiple appMetadata satisfying the given parameters. Please pass more info to obtain the correct appMetadata",[Dh]:"Token request cannot be made without authorization code or refresh token.",[Sh]:"Cannot remove null or empty scope from ScopeSet",[Ah]:"Cannot append ScopeSet",[du]:"Empty input ScopeSet cannot be processed",[xC]:"Caller has cancelled token endpoint polling during device code flow by setting DeviceCodeRequest.cancel = true.",[FC]:"Device code is expired.",[LC]:"Device code stopped polling for unknown reasons.",[fu]:"Please pass an account object, silent flow is not supported without account information",[bh]:"Cache record object was null or undefined.",[hu]:"Invalid environment when attempting to create cache entry",[pu]:"No account found in cache for given key.",[gu]:"No crypto object detected.",[mu]:"Unexpected credential type.",[UC]:"Client assertion must meet requirements described in https://tools.ietf.org/html/rfc7515",[HC]:"Client credential (secret, certificate, or assertion) must not be empty when creating a confidential client. An application should at most have one credential",[Pn]:"Cannot return token from cache because it must be refreshed. This may be due to one of the following reasons: forceRefresh parameter is set to true, claims have been requested, there is no cached access token or it is expired.",[BC]:"User defined timeout for device code polling reached",[kh]:"Cannot generate a POP jwt if the token_claims are not populated",[Rh]:"Server response does not contain an authorization code to proceed",[VC]:"Could not remove the credential's binding key from storage.",[Mh]:"The provided authority does not support logout",[yu]:"A keyId value is missing from the requested bound token's cache record and is required to match the token to it's stored binding key.",[jC]:"No network connectivity. Check your internet connection.",[$C]:"User cancelled the flow.",[GC]:"A tenant id - not common, organizations, or consumers - must be specified when using the client_credentials flow.",[ne]:"This method has not been implemented",[zC]:"The nested app auth bridge is disabled"};class Nh extends Ne{constructor(e,n){super(e,n?`${Z[e]}: ${n}`:Z[e]),this.name="ClientAuthError",Object.setPrototypeOf(this,Nh.prototype)}}function b(t,e){return new Nh(t,e)}const Oh={createNewGuid:()=>{throw b(ne)},base64Decode:()=>{throw b(ne)},base64Encode:()=>{throw b(ne)},base64UrlEncode:()=>{throw b(ne)},encodeKid:()=>{throw b(ne)},getPublicKeyThumbprint:()=>y(function*(){throw b(ne)})(),removeTokenBindingKey:()=>y(function*(){throw b(ne)})(),clearKeystore:()=>y(function*(){throw b(ne)})(),signJwt:()=>y(function*(){throw b(ne)})(),hashString:()=>y(function*(){throw b(ne)})()},T0="@azure/msal-common",qC="14.16.1";function li(t,e){const n=function o9(t){if(!t)throw b(yh);const n=/^([^\.\s]*)\.([^\.\s]+)\.([^\.\s]*)$/.exec(t);if(!n||n.length<4)throw b(uu);return n[2]}(t);try{const r=e(n);return JSON.parse(r)}catch{throw b(uu)}}function w0(t,e){if(0===e||Date.now()-3e5>t+e)throw b(Th)}function Xn(){return Math.round((new Date).getTime()/1e3)}function KC(t,e){const n=Number(t)||0;return Xn()+e>n}function Bs(t){return[s9(t),a9(t),c9(t),u9(t),l9(t)].join("-").toLowerCase()}function Ph(t,e,n,r,o){return{credentialType:J.ID_TOKEN,homeAccountId:t,environment:e,clientId:r,secret:n,realm:o}}function xh(t,e,n,r,o,i,s,a,c,u,l,d,f,h,p){const m={homeAccountId:t,credentialType:J.ACCESS_TOKEN,secret:n,cachedAt:Xn().toString(),expiresOn:s.toString(),extendedExpiresOn:a.toString(),environment:e,clientId:r,realm:o,target:i,tokenType:l||ve.BEARER};if(d&&(m.userAssertionHash=d),u&&(m.refreshOn=u.toString()),h&&(m.requestedClaims=h,m.requestedClaimsHash=p),m.tokenType?.toLowerCase()!==ve.BEARER.toLowerCase())switch(m.credentialType=J.ACCESS_TOKEN_WITH_AUTH_SCHEME,m.tokenType){case ve.POP:const _=li(n,c);if(!_?.cnf?.kid)throw b(kh);m.keyId=_.cnf.kid;break;case ve.SSH:m.keyId=f}return m}function D0(t,e,n,r,o,i,s){const a={credentialType:J.REFRESH_TOKEN,homeAccountId:t,environment:e,clientId:r,secret:n};return i&&(a.userAssertionHash=i),o&&(a.familyId=o),s&&(a.expiresOn=s.toString()),a}function WC(t){return t.hasOwnProperty("homeAccountId")&&t.hasOwnProperty("environment")&&t.hasOwnProperty("credentialType")&&t.hasOwnProperty("clientId")&&t.hasOwnProperty("secret")}function S0(t){return!!t&&WC(t)&&t.hasOwnProperty("realm")&&t.hasOwnProperty("target")&&(t.credentialType===J.ACCESS_TOKEN||t.credentialType===J.ACCESS_TOKEN_WITH_AUTH_SCHEME)}function A0(t){return!!t&&WC(t)&&t.hasOwnProperty("realm")&&t.credentialType===J.ID_TOKEN}function b0(t){return!!t&&WC(t)&&t.credentialType===J.REFRESH_TOKEN}function s9(t){return[t.homeAccountId,t.environment].join("-").toLowerCase()}function a9(t){return[t.credentialType,t.credentialType===J.REFRESH_TOKEN&&t.familyId||t.clientId,t.realm||""].join("-").toLowerCase()}function c9(t){return(t.target||"").toLowerCase()}function u9(t){return(t.requestedClaimsHash||"").toLowerCase()}function l9(t){return t.tokenType&&t.tokenType.toLowerCase()!==ve.BEARER.toLowerCase()?t.tokenType.toLowerCase():""}function k0(){return Xn()+86400}function Fh(t,e,n){t.authorization_endpoint=e.authorization_endpoint,t.token_endpoint=e.token_endpoint,t.end_session_endpoint=e.end_session_endpoint,t.issuer=e.issuer,t.endpointsFromNetwork=n,t.jwks_uri=e.jwks_uri}function YC(t,e,n){t.aliases=e.aliases,t.preferred_cache=e.preferred_cache,t.preferred_network=e.preferred_network,t.aliasesFromNetwork=n}function R0(t){return t.expiresAt<=Xn()}const Lh="redirect_uri_empty",QC="claims_request_parsing_error",Uh="authority_uri_insecure",di="url_parse_error",Hh="empty_url_error",Bh="empty_input_scopes_error",Vh="invalid_prompt_value",_u="invalid_claims",jh="token_request_empty",$h="logout_request_empty",Gh="invalid_code_challenge_method",vu="pkce_params_missing",Cu="invalid_cloud_discovery_metadata",zh="invalid_authority_metadata",qh="untrusted_authority",Vs="missing_ssh_jwk",Kh="missing_ssh_kid",JC="missing_nonce_authentication_header",ZC="invalid_authentication_header",Wh="cannot_set_OIDCOptions",Yh="cannot_allow_native_broker",Qh="authority_mismatch",Fe={[Lh]:"A redirect URI is required for all calls, and none has been set.",[QC]:"Could not parse the given claims request object.",[Uh]:"Authority URIs must use https.  Please see here for valid authority configuration options: https://docs.microsoft.com/en-us/azure/active-directory/develop/msal-js-initializing-client-applications#configuration-options",[di]:"URL could not be parsed into appropriate segments.",[Hh]:"URL was empty or null.",[Bh]:"Scopes cannot be passed as null, undefined or empty array because they are required to obtain an access token.",[Vh]:"Please see here for valid configuration options: https://azuread.github.io/microsoft-authentication-library-for-js/ref/modules/_azure_msal_common.html#commonauthorizationurlrequest",[_u]:"Given claims parameter must be a stringified JSON object.",[jh]:"Token request was empty and not found in cache.",[$h]:"The logout request was null or undefined.",[Gh]:'code_challenge_method passed is invalid. Valid values are "plain" and "S256".',[vu]:"Both params: code_challenge and code_challenge_method are to be passed if to be sent in the request",[Cu]:"Invalid cloudDiscoveryMetadata provided. Must be a stringified JSON object containing tenant_discovery_endpoint and metadata fields",[zh]:"Invalid authorityMetadata provided. Must by a stringified JSON object containing authorization_endpoint, token_endpoint, issuer fields.",[qh]:"The provided authority is not a trusted authority. Please include this authority in the knownAuthorities config parameter.",[Vs]:"Missing sshJwk in SSH certificate request. A stringified JSON Web Key is required when using the SSH authentication scheme.",[Kh]:"Missing sshKid in SSH certificate request. A string that uniquely identifies the public SSH key is required when using the SSH authentication scheme.",[JC]:"Unable to find an authentication header containing server nonce. Either the Authentication-Info or WWW-Authenticate headers must be present in order to obtain a server nonce.",[ZC]:"Invalid authentication header provided",[Wh]:"Cannot set OIDCOptions parameter. Please change the protocol mode to OIDC or use a non-Microsoft authority.",[Yh]:"Cannot set allowNativeBroker parameter to true when not in AAD protocol mode.",[Qh]:"Authority mismatch error. Authority provided in login request or PublicClientApplication config does not match the environment of the provided account. Please use a matching account or make an interactive request to login to this authority."};class XC extends Ne{constructor(e){super(e,Fe[e]),this.name="ClientConfigurationError",Object.setPrototypeOf(this,XC.prototype)}}function we(t){return new XC(t)}class xn{static isEmptyObj(e){if(e)try{const n=JSON.parse(e);return 0===Object.keys(n).length}catch{}return!0}static startsWith(e,n){return 0===e.indexOf(n)}static endsWith(e,n){return e.length>=n.length&&e.lastIndexOf(n)===e.length-n.length}static queryStringToObject(e){const n={},r=e.split("&"),o=i=>decodeURIComponent(i.replace(/\+/g," "));return r.forEach(i=>{if(i.trim()){const[s,a]=i.split(/=(.+)/g,2);s&&a&&(n[o(s)]=o(a))}}),n}static trimArrayEntries(e){return e.map(n=>n.trim())}static removeEmptyStringsFromArray(e){return e.filter(n=>!!n)}static jsonParseHelper(e){try{return JSON.parse(e)}catch{return null}}static matchPattern(e,n){return new RegExp(e.replace(/\\/g,"\\\\").replace(/\*/g,"[^ ]*").replace(/\?/g,"\\?")).test(n)}}class We{constructor(e){const n=e?xn.trimArrayEntries([...e]):[],r=n?xn.removeEmptyStringsFromArray(n):[];this.validateInputScopes(r),this.scopes=new Set,r.forEach(o=>this.scopes.add(o))}static fromString(e){const r=(e||T.EMPTY_STRING).split(" ");return new We(r)}static createSearchScopes(e){const n=new We(e);return n.containsOnlyOIDCScopes()?n.removeScope(T.OFFLINE_ACCESS_SCOPE):n.removeOIDCScopes(),n}validateInputScopes(e){if(!e||e.length<1)throw we(Bh)}containsScope(e){const n=this.printScopesLowerCase().split(" "),r=new We(n);return!!e&&r.scopes.has(e.toLowerCase())}containsScopeSet(e){return!(!e||e.scopes.size<=0)&&this.scopes.size>=e.scopes.size&&e.asArray().every(n=>this.containsScope(n))}containsOnlyOIDCScopes(){let e=0;return y0.forEach(n=>{this.containsScope(n)&&(e+=1)}),this.scopes.size===e}appendScope(e){e&&this.scopes.add(e.trim())}appendScopes(e){try{e.forEach(n=>this.appendScope(n))}catch{throw b(Ah)}}removeScope(e){if(!e)throw b(Sh);this.scopes.delete(e.trim())}removeOIDCScopes(){y0.forEach(e=>{this.scopes.delete(e)})}unionScopeSets(e){if(!e)throw b(du);const n=new Set;return e.scopes.forEach(r=>n.add(r.toLowerCase())),this.scopes.forEach(r=>n.add(r.toLowerCase())),n}intersectingScopeSets(e){if(!e)throw b(du);e.containsOnlyOIDCScopes()||e.removeOIDCScopes();const n=this.unionScopeSets(e),r=e.getScopeCount(),o=this.getScopeCount();return n.size<o+r}getScopeCount(){return this.scopes.size}asArray(){const e=[];return this.scopes.forEach(n=>e.push(n)),e}printScopes(){return this.scopes?this.asArray().join(" "):T.EMPTY_STRING}printScopesLowerCase(){return this.printScopes().toLowerCase()}}function Jh(t,e){if(!t)throw b(mh);try{const n=e(t);return JSON.parse(n)}catch{throw b(cu)}}function js(t){if(!t)throw b(cu);const e=t.split(".",2);return{uid:e[0],utid:e.length<2?T.EMPTY_STRING:e[1]}}function Zh(t,e){return!!t&&!!e&&t===e.split(".")[1]}function eE(t,e,n,r){if(r){const{oid:o,sub:i,tid:s,name:a,tfp:c,acr:u}=r,l=s||c||u||"";return{tenantId:l,localAccountId:o||i||"",name:a,isHomeTenant:Zh(l,t)}}return{tenantId:n,localAccountId:e,isHomeTenant:Zh(n,t)}}function tE(t,e,n,r){let o=t;if(e){const{isHomeTenant:i,...s}=e;o={...t,...s}}if(n){const{isHomeTenant:i,...s}=eE(t.homeAccountId,t.localAccountId,t.tenantId,n);return o={...o,...s,idTokenClaims:n,idToken:r},o}return o}function M0(t){return t&&(t.tid||t.tfp||t.acr)||null}class rt{generateAccountId(){return[this.homeAccountId,this.environment].join("-").toLowerCase()}generateAccountKey(){return rt.generateAccountCacheKey({homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId})}getAccountInfo(){return{homeAccountId:this.homeAccountId,environment:this.environment,tenantId:this.realm,username:this.username,localAccountId:this.localAccountId,name:this.name,nativeAccountId:this.nativeAccountId,authorityType:this.authorityType,tenantProfiles:new Map((this.tenantProfiles||[]).map(e=>[e.tenantId,e]))}}isSingleTenant(){return!this.tenantProfiles}static generateAccountCacheKey(e){const n=e.homeAccountId.split(".")[1];return[e.homeAccountId,e.environment||"",n||e.tenantId||""].join("-").toLowerCase()}static createAccount(e,n,r){const o=new rt;let i;o.authorityType=1===n.authorityType?"ADFS":"AAD"===n.protocolMode?"MSSTS":"Generic",e.clientInfo&&r&&(i=Jh(e.clientInfo,r)),o.clientInfo=e.clientInfo,o.homeAccountId=e.homeAccountId,o.nativeAccountId=e.nativeAccountId;const s=e.environment||n&&n.getPreferredCache();if(!s)throw b(hu);if(o.environment=s,o.realm=i?.utid||M0(e.idTokenClaims)||"",o.localAccountId=i?.uid||e.idTokenClaims?.oid||e.idTokenClaims?.sub||"",o.username=e.idTokenClaims?.preferred_username||e.idTokenClaims?.upn||(e.idTokenClaims?.emails?e.idTokenClaims.emails[0]:null)||"",o.name=e.idTokenClaims?.name||"",o.cloudGraphHostName=e.cloudGraphHostName,o.msGraphHost=e.msGraphHost,e.tenantProfiles)o.tenantProfiles=e.tenantProfiles;else{const u=eE(e.homeAccountId,o.localAccountId,o.realm,e.idTokenClaims);o.tenantProfiles=[u]}return o}static createFromAccountInfo(e,n,r){const o=new rt;return o.authorityType=e.authorityType||"Generic",o.homeAccountId=e.homeAccountId,o.localAccountId=e.localAccountId,o.nativeAccountId=e.nativeAccountId,o.realm=e.tenantId,o.environment=e.environment,o.username=e.username,o.name=e.name,o.cloudGraphHostName=n,o.msGraphHost=r,o.tenantProfiles=Array.from(e.tenantProfiles?.values()||[]),o}static generateHomeAccountId(e,n,r,o,i){if(1!==n&&2!==n){if(e)try{const s=Jh(e,o.base64Decode);if(s.uid&&s.utid)return`${s.uid}.${s.utid}`}catch{}r.warning("No client info in response")}return i?.sub||""}static isAccountEntity(e){return!!e&&e.hasOwnProperty("homeAccountId")&&e.hasOwnProperty("environment")&&e.hasOwnProperty("realm")&&e.hasOwnProperty("localAccountId")&&e.hasOwnProperty("username")&&e.hasOwnProperty("authorityType")}static accountInfoIsEqual(e,n,r){if(!e||!n)return!1;let o=!0;if(r){const i=e.idTokenClaims||{},s=n.idTokenClaims||{};o=i.iat===s.iat&&i.nonce===s.nonce}return e.homeAccountId===n.homeAccountId&&e.localAccountId===n.localAccountId&&e.username===n.username&&e.tenantId===n.tenantId&&e.environment===n.environment&&e.nativeAccountId===n.nativeAccountId&&o}}function N0(t){return t.startsWith("#/")?t.substring(2):t.startsWith("#")||t.startsWith("?")?t.substring(1):t}function Xh(t){if(!t||t.indexOf("=")<0)return null;try{const e=N0(t),n=Object.fromEntries(new URLSearchParams(e));if(n.code||n.error||n.error_description||n.state)return n}catch{throw b(Ch)}return null}class se{get urlString(){return this._urlString}constructor(e){if(this._urlString=e,!this._urlString)throw we(Hh);e.includes("#")||(this._urlString=se.canonicalizeUri(e))}static canonicalizeUri(e){if(e){let n=e.toLowerCase();return xn.endsWith(n,"?")?n=n.slice(0,-1):xn.endsWith(n,"?/")&&(n=n.slice(0,-2)),xn.endsWith(n,"/")||(n+="/"),n}return e}validateAsUri(){let e;try{e=this.getUrlComponents()}catch{throw we(di)}if(!e.HostNameAndPort||!e.PathSegments)throw we(di);if(!e.Protocol||"https:"!==e.Protocol.toLowerCase())throw we(Uh)}static appendQueryString(e,n){return n?e.indexOf("?")<0?`${e}?${n}`:`${e}&${n}`:e}static removeHashFromUrl(e){return se.canonicalizeUri(e.split("#")[0])}replaceTenantPath(e){const n=this.getUrlComponents(),r=n.PathSegments;return e&&0!==r.length&&("common"===r[0]||"organizations"===r[0])&&(r[0]=e),se.constructAuthorityUriFromObject(n)}getUrlComponents(){const e=RegExp("^(([^:/?#]+):)?(//([^/?#]*))?([^?#]*)(\\?([^#]*))?(#(.*))?"),n=this.urlString.match(e);if(!n)throw we(di);const r={Protocol:n[1],HostNameAndPort:n[4],AbsolutePath:n[5],QueryString:n[7]};let o=r.AbsolutePath.split("/");return o=o.filter(i=>i&&i.length>0),r.PathSegments=o,r.QueryString&&r.QueryString.endsWith("/")&&(r.QueryString=r.QueryString.substring(0,r.QueryString.length-1)),r}static getDomainFromUrl(e){const n=RegExp("^([^:/?#]+://)?([^/?#]*)"),r=e.match(n);if(!r)throw we(di);return r[2]}static getAbsoluteUrl(e,n){if(e[0]===T.FORWARD_SLASH){const o=new se(n).getUrlComponents();return o.Protocol+"//"+o.HostNameAndPort+e}return e}static constructAuthorityUriFromObject(e){return new se(e.Protocol+"//"+e.HostNameAndPort+"/"+e.PathSegments.join("/"))}static hashContainsKnownProperties(e){return!!Xh(e)}}const P0={"login.microsoftonline.com":{token_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.com/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.com/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.com/{tenantid}/oauth2/v2.0/logout"},"login.chinacloudapi.cn":{token_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.chinacloudapi.cn/{tenantid}/discovery/v2.0/keys",issuer:"https://login.partner.microsoftonline.cn/{tenantid}/v2.0",authorization_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.chinacloudapi.cn/{tenantid}/oauth2/v2.0/logout"},"login.microsoftonline.us":{token_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/token",jwks_uri:"https://login.microsoftonline.us/{tenantid}/discovery/v2.0/keys",issuer:"https://login.microsoftonline.us/{tenantid}/v2.0",authorization_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/authorize",end_session_endpoint:"https://login.microsoftonline.us/{tenantid}/oauth2/v2.0/logout"}},nE={tenant_discovery_endpoint:"https://{canonicalAuthority}/v2.0/.well-known/openid-configuration",metadata:[{preferred_network:"login.microsoftonline.com",preferred_cache:"login.windows.net",aliases:["login.microsoftonline.com","login.windows.net","login.microsoft.com","sts.windows.net"]},{preferred_network:"login.partner.microsoftonline.cn",preferred_cache:"login.partner.microsoftonline.cn",aliases:["login.partner.microsoftonline.cn","login.chinacloudapi.cn"]},{preferred_network:"login.microsoftonline.de",preferred_cache:"login.microsoftonline.de",aliases:["login.microsoftonline.de"]},{preferred_network:"login.microsoftonline.us",preferred_cache:"login.microsoftonline.us",aliases:["login.microsoftonline.us","login.usgovcloudapi.net"]},{preferred_network:"login-us.microsoftonline.com",preferred_cache:"login-us.microsoftonline.com",aliases:["login-us.microsoftonline.com"]}]},x0=new Set;function F0(t,e,n,r){if(r?.trace(`getAliasesFromMetadata called with source: ${n}`),t&&e){const o=ep(e,t);if(o)return r?.trace(`getAliasesFromMetadata: found cloud discovery metadata in ${n}, returning aliases`),o.aliases;r?.trace(`getAliasesFromMetadata: did not find cloud discovery metadata in ${n}`)}return null}function ep(t,e){for(let n=0;n<t.length;n++){const r=t[n];if(r.aliases.includes(e))return r}return null}nE.metadata.forEach(t=>{t.aliases.forEach(e=>{x0.add(e)})});const rE="cache_quota_exceeded",oE="cache_error_unknown",iE={[rE]:"Exceeded cache storage capacity.",[oE]:"Unexpected error occurred when using cache storage."};class $s extends Error{constructor(e,n){const r=n||(iE[e]?iE[e]:iE[oE]);super(`${e}: ${r}`),Object.setPrototypeOf(this,$s.prototype),this.name="CacheError",this.errorCode=e,this.errorMessage=r}}function L0(t){return t instanceof Error?"QuotaExceededError"===t.name||"NS_ERROR_DOM_QUOTA_REACHED"===t.name||t.message.includes("exceeded the quota")?new $s(rE):new $s(t.name,t.message):new $s(oE)}class Gs{constructor(e,n,r,o){this.clientId=e,this.cryptoImpl=n,this.commonLogger=r.clone(T0,qC),this.staticAuthorityOptions=o}getAllAccounts(e,n){return this.buildTenantProfiles(this.getAccountsFilteredBy(n||{},e),e,n)}getAccountInfoFilteredBy(e,n){const r=this.getAllAccounts(n,e);return r.length>1?r.sort(i=>i.idTokenClaims?-1:1)[0]:1===r.length?r[0]:null}getBaseAccountInfo(e,n){const r=this.getAccountsFilteredBy(e,n);return r.length>0?r[0].getAccountInfo():null}buildTenantProfiles(e,n,r){return e.flatMap(o=>this.getTenantProfilesFromAccountEntity(o,n,r?.tenantId,r))}getTenantedAccountInfoByFilter(e,n,r,o,i){let a,s=null;if(i&&!this.tenantProfileMatchesFilter(r,i))return null;const c=this.getIdToken(e,o,n,r.tenantId);return c&&(a=li(c.secret,this.cryptoImpl.base64Decode),!this.idTokenClaimsMatchTenantProfileFilter(a,i))?null:(s=tE(e,r,a,c?.secret),s)}getTenantProfilesFromAccountEntity(e,n,r,o){const i=e.getAccountInfo();let s=i.tenantProfiles||new Map;const a=this.getTokenKeys();if(r){const u=s.get(r);if(!u)return[];s=new Map([[r,u]])}const c=[];return s.forEach(u=>{const l=this.getTenantedAccountInfoByFilter(i,a,u,n,o);l&&c.push(l)}),c}tenantProfileMatchesFilter(e,n){return!(n.localAccountId&&!this.matchLocalAccountIdFromTenantProfile(e,n.localAccountId)||n.name&&e.name!==n.name||void 0!==n.isHomeTenant&&e.isHomeTenant!==n.isHomeTenant)}idTokenClaimsMatchTenantProfileFilter(e,n){return!(n&&(n.localAccountId&&!this.matchLocalAccountIdFromTokenClaims(e,n.localAccountId)||n.loginHint&&!this.matchLoginHintFromTokenClaims(e,n.loginHint)||n.username&&!this.matchUsername(e.preferred_username,n.username)||n.name&&!this.matchName(e,n.name)||n.sid&&!this.matchSid(e,n.sid)))}saveCacheRecord(e,n,r){var o=this;return y(function*(){if(!e)throw b(bh);try{e.account&&o.setAccount(e.account,n),e.idToken&&!1!==r?.idToken&&o.setIdTokenCredential(e.idToken,n),e.accessToken&&!1!==r?.accessToken&&(yield o.saveAccessToken(e.accessToken,n)),e.refreshToken&&!1!==r?.refreshToken&&o.setRefreshTokenCredential(e.refreshToken,n),e.appMetadata&&o.setAppMetadata(e.appMetadata,n)}catch(i){throw o.commonLogger?.error("CacheManager.saveCacheRecord: failed"),i instanceof Ne?i:L0(i)}})()}saveAccessToken(e,n){var r=this;return y(function*(){const o={clientId:e.clientId,credentialType:e.credentialType,environment:e.environment,homeAccountId:e.homeAccountId,realm:e.realm,tokenType:e.tokenType,requestedClaimsHash:e.requestedClaimsHash},i=r.getTokenKeys(),s=We.fromString(e.target);i.accessToken.forEach(a=>{if(!r.accessTokenKeyMatchesFilter(a,o,!1))return;const c=r.getAccessTokenCredential(a,n);c&&r.credentialMatchesFilter(c,o)&&We.fromString(c.target).intersectingScopeSets(s)&&r.removeAccessToken(a,n)}),r.setAccessTokenCredential(e,n)})()}getAccountsFilteredBy(e,n){const r=this.getAccountKeys(),o=[];return r.forEach(i=>{if(!this.isAccountKey(i,e.homeAccountId))return;const s=this.getAccount(i,n,this.commonLogger);if(!s||e.homeAccountId&&!this.matchHomeAccountId(s,e.homeAccountId)||e.username&&!this.matchUsername(s.username,e.username)||e.environment&&!this.matchEnvironment(s,e.environment)||e.realm&&!this.matchRealm(s,e.realm)||e.nativeAccountId&&!this.matchNativeAccountId(s,e.nativeAccountId)||e.authorityType&&!this.matchAuthorityType(s,e.authorityType))return;const a={localAccountId:e?.localAccountId,name:e?.name},c=s.tenantProfiles?.filter(u=>this.tenantProfileMatchesFilter(u,a));c&&0===c.length||o.push(s)}),o}isAccountKey(e,n,r){return!(e.split("-").length<3||n&&!e.toLowerCase().includes(n.toLowerCase())||r&&!e.toLowerCase().includes(r.toLowerCase()))}isCredentialKey(e){if(e.split("-").length<6)return!1;const n=e.toLowerCase();if(-1===n.indexOf(J.ID_TOKEN.toLowerCase())&&-1===n.indexOf(J.ACCESS_TOKEN.toLowerCase())&&-1===n.indexOf(J.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase())&&-1===n.indexOf(J.REFRESH_TOKEN.toLowerCase()))return!1;if(n.indexOf(J.REFRESH_TOKEN.toLowerCase())>-1){const o=`${J.REFRESH_TOKEN}-1-`;if(-1===n.indexOf(`${J.REFRESH_TOKEN}-${this.clientId}-`.toLowerCase())&&-1===n.indexOf(o.toLowerCase()))return!1}else if(-1===n.indexOf(this.clientId.toLowerCase()))return!1;return!0}credentialMatchesFilter(e,n){return!(n.clientId&&!this.matchClientId(e,n.clientId)||n.userAssertionHash&&!this.matchUserAssertionHash(e,n.userAssertionHash)||"string"==typeof n.homeAccountId&&!this.matchHomeAccountId(e,n.homeAccountId)||n.environment&&!this.matchEnvironment(e,n.environment)||n.realm&&!this.matchRealm(e,n.realm)||n.credentialType&&!this.matchCredentialType(e,n.credentialType)||n.familyId&&!this.matchFamilyId(e,n.familyId)||n.target&&!this.matchTarget(e,n.target)||(n.requestedClaimsHash||e.requestedClaimsHash)&&e.requestedClaimsHash!==n.requestedClaimsHash||e.credentialType===J.ACCESS_TOKEN_WITH_AUTH_SCHEME&&(n.tokenType&&!this.matchTokenType(e,n.tokenType)||n.tokenType===ve.SSH&&n.keyId&&!this.matchKeyId(e,n.keyId)))}getAppMetadataFilteredBy(e){const n=this.getKeys(),r={};return n.forEach(o=>{if(!this.isAppMetadata(o))return;const i=this.getAppMetadata(o);i&&(e.environment&&!this.matchEnvironment(i,e.environment)||e.clientId&&!this.matchClientId(i,e.clientId)||(r[o]=i))}),r}getAuthorityMetadataByAlias(e){const n=this.getAuthorityMetadataKeys();let r=null;return n.forEach(o=>{if(!this.isAuthorityMetadata(o)||-1===o.indexOf(this.clientId))return;const i=this.getAuthorityMetadata(o);i&&-1!==i.aliases.indexOf(e)&&(r=i)}),r}removeAllAccounts(e){var n=this;return y(function*(){const r=n.getAccountKeys(),o=[];r.forEach(i=>{o.push(n.removeAccount(i,e))}),yield Promise.all(o)})()}removeAccount(e,n){var r=this;return y(function*(){const o=r.getAccount(e,n,r.commonLogger);o&&(yield r.removeAccountContext(o,n),r.removeItem(e,n))})()}removeAccountContext(e,n){var r=this;return y(function*(){const o=r.getTokenKeys(),i=e.generateAccountId();o.idToken.forEach(s=>{0===s.indexOf(i)&&r.removeIdToken(s,n)}),o.accessToken.forEach(s=>{0===s.indexOf(i)&&r.removeAccessToken(s,n)}),o.refreshToken.forEach(s=>{0===s.indexOf(i)&&r.removeRefreshToken(s,n)}),r.getKeys().forEach(s=>{s.includes(i)&&r.removeItem(s,n)})})()}updateOutdatedCachedAccount(e,n,r,o){if(n&&n.isSingleTenant()){this.commonLogger?.verbose("updateOutdatedCachedAccount: Found a single-tenant (outdated) account entity in the cache, migrating to multi-tenant account entity");const i=this.getAccountKeys().filter(l=>l.startsWith(n.homeAccountId)),s=[];i.forEach(l=>{const d=this.getCachedAccountEntity(l,r);d&&s.push(d)});const a=s.find(l=>Zh(l.realm,l.homeAccountId))||s[0];a.tenantProfiles=s.map(l=>({tenantId:l.realm,localAccountId:l.localAccountId,name:l.name,isHomeTenant:Zh(l.realm,l.homeAccountId)}));const c=Gs.toObject(new rt,{...a}),u=c.generateAccountKey();return i.forEach(l=>{l!==u&&this.removeOutdatedAccount(e,r)}),this.setAccount(c,r),o?.verbose("Updated an outdated account entity in the cache"),c}return n}removeAccessToken(e,n){const r=this.getAccessTokenCredential(e,n);if(this.removeItem(e,n),!r||r.credentialType.toLowerCase()!==J.ACCESS_TOKEN_WITH_AUTH_SCHEME.toLowerCase()||r.tokenType!==ve.POP)return;const o=r.keyId;o&&this.cryptoImpl.removeTokenBindingKey(o).catch(()=>{this.commonLogger.error("Binding key could not be removed")})}removeAppMetadata(e){return this.getKeys().forEach(r=>{this.isAppMetadata(r)&&this.removeItem(r,e)}),!0}readAccountFromCache(e,n){const r=rt.generateAccountCacheKey(e);return this.getAccount(r,n,this.commonLogger)}getIdToken(e,n,r,o,i){this.commonLogger.trace("CacheManager - getIdToken called");const a=this.getIdTokensByFilter({homeAccountId:e.homeAccountId,environment:e.environment,credentialType:J.ID_TOKEN,clientId:this.clientId,realm:o},n,r),c=a.size;if(c<1)return this.commonLogger.info("CacheManager:getIdToken - No token found"),null;if(c>1){let u=a;if(!o){const l=new Map;a.forEach((f,h)=>{f.realm===e.tenantId&&l.set(h,f)});const d=l.size;if(d<1)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account but none match account entity tenant id, returning first result"),a.values().next().value;if(1===d)return this.commonLogger.info("CacheManager:getIdToken - Multiple ID tokens found for account, defaulting to home tenant profile"),l.values().next().value;u=l}return this.commonLogger.info("CacheManager:getIdToken - Multiple matching ID tokens found, clearing them"),u.forEach((l,d)=>{this.removeIdToken(d,n)}),i&&n&&i.addFields({multiMatchedID:a.size},n),null}return this.commonLogger.info("CacheManager:getIdToken - Returning ID token"),a.values().next().value}getIdTokensByFilter(e,n,r){const o=r&&r.idToken||this.getTokenKeys().idToken,i=new Map;return o.forEach(s=>{if(!this.idTokenKeyMatchesFilter(s,{clientId:this.clientId,...e}))return;const a=this.getIdTokenCredential(s,n);a&&this.credentialMatchesFilter(a,e)&&i.set(s,a)}),i}idTokenKeyMatchesFilter(e,n){const r=e.toLowerCase();return!(n.clientId&&-1===r.indexOf(n.clientId.toLowerCase())||n.homeAccountId&&-1===r.indexOf(n.homeAccountId.toLowerCase()))}removeIdToken(e,n){this.removeItem(e,n)}removeRefreshToken(e,n){this.removeItem(e,n)}getAccessToken(e,n,r,o,i){this.commonLogger.trace("CacheManager - getAccessToken called");const s=We.createSearchScopes(n.scopes),a=n.authenticationScheme||ve.BEARER,c=a&&a.toLowerCase()!==ve.BEARER.toLowerCase()?J.ACCESS_TOKEN_WITH_AUTH_SCHEME:J.ACCESS_TOKEN,u={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:c,clientId:this.clientId,realm:o||e.tenantId,target:s,tokenType:a,keyId:n.sshKid,requestedClaimsHash:n.requestedClaimsHash},l=r&&r.accessToken||this.getTokenKeys().accessToken,d=[];l.forEach(h=>{if(this.accessTokenKeyMatchesFilter(h,u,!0)){const p=this.getAccessTokenCredential(h,n.correlationId);p&&this.credentialMatchesFilter(p,u)&&d.push(p)}});const f=d.length;return f<1?(this.commonLogger.info("CacheManager:getAccessToken - No token found"),null):f>1?(this.commonLogger.info("CacheManager:getAccessToken - Multiple access tokens found, clearing them"),d.forEach(h=>{this.removeAccessToken(Bs(h),n.correlationId)}),i&&n.correlationId&&i.addFields({multiMatchedAT:d.length},n.correlationId),null):(this.commonLogger.info("CacheManager:getAccessToken - Returning access token"),d[0])}accessTokenKeyMatchesFilter(e,n,r){const o=e.toLowerCase();if(n.clientId&&-1===o.indexOf(n.clientId.toLowerCase())||n.homeAccountId&&-1===o.indexOf(n.homeAccountId.toLowerCase())||n.realm&&-1===o.indexOf(n.realm.toLowerCase())||n.requestedClaimsHash&&-1===o.indexOf(n.requestedClaimsHash.toLowerCase()))return!1;if(n.target){const i=n.target.asArray();for(let s=0;s<i.length;s++){if(r&&!o.includes(i[s].toLowerCase()))return!1;if(!r&&o.includes(i[s].toLowerCase()))return!0}}return!0}getAccessTokensByFilter(e,n){const r=this.getTokenKeys(),o=[];return r.accessToken.forEach(i=>{if(!this.accessTokenKeyMatchesFilter(i,e,!0))return;const s=this.getAccessTokenCredential(i,n);s&&this.credentialMatchesFilter(s,e)&&o.push(s)}),o}getRefreshToken(e,n,r,o,i){this.commonLogger.trace("CacheManager - getRefreshToken called");const a={homeAccountId:e.homeAccountId,environment:e.environment,credentialType:J.REFRESH_TOKEN,clientId:this.clientId,familyId:n?"1":void 0},c=o&&o.refreshToken||this.getTokenKeys().refreshToken,u=[];c.forEach(d=>{if(this.refreshTokenKeyMatchesFilter(d,a)){const f=this.getRefreshTokenCredential(d,r);f&&this.credentialMatchesFilter(f,a)&&u.push(f)}});const l=u.length;return l<1?(this.commonLogger.info("CacheManager:getRefreshToken - No refresh token found."),null):(l>1&&i&&r&&i.addFields({multiMatchedRT:l},r),this.commonLogger.info("CacheManager:getRefreshToken - returning refresh token"),u[0])}refreshTokenKeyMatchesFilter(e,n){const r=e.toLowerCase();return!(n.familyId&&-1===r.indexOf(n.familyId.toLowerCase())||!n.familyId&&n.clientId&&-1===r.indexOf(n.clientId.toLowerCase())||n.homeAccountId&&-1===r.indexOf(n.homeAccountId.toLowerCase()))}readAppMetadataFromCache(e){const r=this.getAppMetadataFilteredBy({environment:e,clientId:this.clientId}),o=Object.keys(r).map(s=>r[s]),i=o.length;if(i<1)return null;if(i>1)throw b(wh);return o[0]}isAppMetadataFOCI(e){const n=this.readAppMetadataFromCache(e);return!(!n||"1"!==n.familyId)}matchHomeAccountId(e,n){return"string"==typeof e.homeAccountId&&n===e.homeAccountId}matchLocalAccountIdFromTokenClaims(e,n){return n===(e.oid||e.sub)}matchLocalAccountIdFromTenantProfile(e,n){return e.localAccountId===n}matchName(e,n){return n.toLowerCase()===e.name?.toLowerCase()}matchUsername(e,n){return!(!e||"string"!=typeof e||n?.toLowerCase()!==e.toLowerCase())}matchUserAssertionHash(e,n){return!(!e.userAssertionHash||n!==e.userAssertionHash)}matchEnvironment(e,n){if(this.staticAuthorityOptions){const o=function m9(t,e){let n;const r=t.canonicalAuthority;if(r){const o=new se(r).getUrlComponents().HostNameAndPort;n=F0(o,t.cloudDiscoveryMetadata?.metadata,"config",e)||F0(o,nE.metadata,"hardcoded_values",e)||t.knownAuthorities}return n||[]}(this.staticAuthorityOptions,this.commonLogger);if(o.includes(n)&&o.includes(e.environment))return!0}const r=this.getAuthorityMetadataByAlias(n);return!!(r&&r.aliases.indexOf(e.environment)>-1)}matchCredentialType(e,n){return e.credentialType&&n.toLowerCase()===e.credentialType.toLowerCase()}matchClientId(e,n){return!(!e.clientId||n!==e.clientId)}matchFamilyId(e,n){return!(!e.familyId||n!==e.familyId)}matchRealm(e,n){return e.realm?.toLowerCase()===n.toLowerCase()}matchNativeAccountId(e,n){return!(!e.nativeAccountId||n!==e.nativeAccountId)}matchLoginHintFromTokenClaims(e,n){return e.login_hint===n||e.preferred_username===n||e.upn===n}matchSid(e,n){return e.sid===n}matchAuthorityType(e,n){return!(!e.authorityType||n.toLowerCase()!==e.authorityType.toLowerCase())}matchTarget(e,n){return!(e.credentialType!==J.ACCESS_TOKEN&&e.credentialType!==J.ACCESS_TOKEN_WITH_AUTH_SCHEME||!e.target)&&We.fromString(e.target).containsScopeSet(n)}matchTokenType(e,n){return!(!e.tokenType||e.tokenType!==n)}matchKeyId(e,n){return!(!e.keyId||e.keyId!==n)}isAppMetadata(e){return-1!==e.indexOf(kC)}isAuthorityMetadata(e){return-1!==e.indexOf("authority-metadata")}generateAuthorityMetadataCacheKey(e){return`authority-metadata-${this.clientId}-${e}`}static toObject(e,n){for(const r in n)e[r]=n[r];return e}}class _9 extends Gs{setAccount(){throw b(ne)}getAccount(){throw b(ne)}getCachedAccountEntity(){throw b(ne)}setIdTokenCredential(){throw b(ne)}getIdTokenCredential(){throw b(ne)}setAccessTokenCredential(){throw b(ne)}getAccessTokenCredential(){throw b(ne)}setRefreshTokenCredential(){throw b(ne)}getRefreshTokenCredential(){throw b(ne)}setAppMetadata(){throw b(ne)}getAppMetadata(){throw b(ne)}setServerTelemetry(){throw b(ne)}getServerTelemetry(){throw b(ne)}setAuthorityMetadata(){throw b(ne)}getAuthorityMetadata(){throw b(ne)}getAuthorityMetadataKeys(){throw b(ne)}setThrottlingCache(){throw b(ne)}getThrottlingCache(){throw b(ne)}removeItem(){throw b(ne)}getKeys(){throw b(ne)}getAccountKeys(){throw b(ne)}getTokenKeys(){throw b(ne)}updateCredentialCacheKey(){throw b(ne)}removeOutdatedAccount(){throw b(ne)}}const U0={tokenRenewalOffsetSeconds:300,preventCorsPreflight:!1},v9={loggerCallback:()=>{},piiLoggingEnabled:!1,logLevel:xe.Info,correlationId:T.EMPTY_STRING},C9={claimsBasedCachingEnabled:!1},E9={sendGetRequestAsync:()=>y(function*(){throw b(ne)})(),sendPostRequestAsync:()=>y(function*(){throw b(ne)})()},I9={sku:T.SKU,version:qC,cpu:T.EMPTY_STRING,os:T.EMPTY_STRING},T9={clientSecret:T.EMPTY_STRING,clientAssertion:void 0},w9={azureCloudInstance:"none",tenant:`${T.DEFAULT_COMMON_TENANT}`},D9={application:{appName:"",appVersion:""}};function A9(t){return{clientCapabilities:[],azureCloudOptions:w9,skipAuthorityMetadataCache:!1,instanceAware:!1,...t}}function sE(t){return"OIDC"===t.authOptions.authority.options.protocolMode}const b9={sendGetRequestAsync:()=>Promise.reject(b(ne)),sendPostRequestAsync:()=>Promise.reject(b(ne))};class H0{startMeasurement(){}endMeasurement(){}flushMeasurement(){return null}}class R9{generateId(){return"callback-id"}startMeasurement(e,n){return{end:()=>null,discard:()=>{},add:()=>{},increment:()=>{},event:{eventId:this.generateId(),status:1,authority:"",libraryName:"",libraryVersion:"",clientId:"",name:e,startTimeMs:Date.now(),correlationId:n||""},measurement:new H0}}startPerformanceMeasurement(){return new H0}calculateQueuedTime(){return 0}addQueueMeasurement(){}setPreQueueTime(){}endMeasurement(){return null}discardMeasurements(){}removePerformanceCallback(){return!0}addPerformanceCallback(){return""}emitEvents(){}addFields(){}incrementFields(){}cacheEventByCorrelationId(){}}const zs_CHANNEL_ID="53ee284d-920a-4b59-9d30-a60315b26836";var L=function(t){return t.Redirect="redirect",t.Popup="popup",t.Silent="silent",t.None="none",t}(L||{});const V0={scopes:Ls},aE="msal.db",N9=`${aE}.keys`,O9=[0,5,4];class np{navigateInternal(e,n){return np.defaultNavigateWindow(e,n)}navigateExternal(e,n){return np.defaultNavigateWindow(e,n)}static defaultNavigateWindow(e,n){return n.noHistory?window.location.replace(e):window.location.assign(e),new Promise(r=>{setTimeout(()=>{r(!0)},n.timeout)})}}class rp extends Ne{constructor(e,n,r){super(e.errorCode,e.errorMessage,e.subError),Object.setPrototypeOf(this,rp.prototype),this.name="NetworkError",this.error=e,this.httpStatus=n,this.responseHeaders=r}}function $0(t,e,n){return new rp(t,e,n)}const Eu="pkce_not_created",Iu="crypto_nonexistent",qs="empty_navigate_uri",op="hash_empty_error",Tu="no_state_in_hash",ip="hash_does_not_contain_known_properties",sp="unable_to_parse_state",ap="state_interaction_type_mismatch",cp="interaction_in_progress",up="popup_window_error",lp="empty_window_error",br="user_cancelled",cE="monitor_popup_timeout",dp="monitor_window_timeout",fp="redirect_in_iframe",hp="block_iframe_reload",pp="block_nested_popups",uE="iframe_closed_prematurely",Ks="silent_logout_unsupported",gp="no_account_error",lE="silent_prompt_value_error",mp="no_token_request_cache_error",yp="unable_to_parse_token_request_cache_error",wu="no_cached_authority_error",dE="auth_request_not_set_error",fE="invalid_cache_type",Ws="non_browser_environment",ho="database_not_open",Ys="no_network_connectivity",_p="post_request_failed",vp="get_request_failed",Du="failed_to_parse_response",Cp="unable_to_load_token",Su="crypto_key_not_found",Ep="auth_code_required",Ip="auth_code_or_nativeAccountId_required",Tp="spa_code_and_nativeAccountId_present",Au="database_unavailable",wp="unable_to_acquire_token_from_native_platform",Dp="native_handshake_timeout",Sp="native_extension_not_installed",hi="native_connection_not_established",Ap="uninitialized_public_client_application",bp="native_prompt_not_supported",kp="invalid_base64_string",Rp="invalid_pop_token_request",G0="failed_to_build_headers",z0="failed_to_parse_headers",kr="For more visit: aka.ms/msaljs/browser-errors",W={[Eu]:"The PKCE code challenge and verifier could not be generated.",[Iu]:"The crypto object or function is not available.",[qs]:"Navigation URI is empty. Please check stack trace for more info.",[op]:`Hash value cannot be processed because it is empty. Please verify that your redirectUri is not clearing the hash. ${kr}`,[Tu]:"Hash does not contain state. Please verify that the request originated from msal.",[ip]:`Hash does not contain known properites. Please verify that your redirectUri is not changing the hash.  ${kr}`,[sp]:"Unable to parse state. Please verify that the request originated from msal.",[ap]:"Hash contains state but the interaction type does not match the caller.",[cp]:`Interaction is currently in progress. Please ensure that this interaction has been completed before calling an interactive API.   ${kr}`,[up]:"Error opening popup window. This can happen if you are using IE or if popups are blocked in the browser.",[lp]:"window.open returned null or undefined window object.",[br]:"User cancelled the flow.",[cE]:`Token acquisition in popup failed due to timeout.  ${kr}`,[dp]:`Token acquisition in iframe failed due to timeout.  ${kr}`,[fp]:"Redirects are not supported for iframed or brokered applications. Please ensure you are using MSAL.js in a top frame of the window if using the redirect APIs, or use the popup APIs.",[hp]:`Request was blocked inside an iframe because MSAL detected an authentication response.  ${kr}`,[pp]:"Request was blocked inside a popup because MSAL detected it was running in a popup.",[uE]:"The iframe being monitored was closed prematurely.",[Ks]:"Silent logout not supported. Please call logoutRedirect or logoutPopup instead.",[gp]:"No account object provided to acquireTokenSilent and no active account has been set. Please call setActiveAccount or provide an account on the request.",[lE]:"The value given for the prompt value is not valid for silent requests - must be set to 'none' or 'no_session'.",[mp]:"No token request found in cache.",[yp]:"The cached token request could not be parsed.",[wu]:"No cached authority found.",[dE]:"Auth Request not set. Please ensure initiateAuthRequest was called from the InteractionHandler",[fE]:"Invalid cache type",[Ws]:"Login and token requests are not supported in non-browser environments.",[ho]:"Database is not open!",[Ys]:"No network connectivity. Check your internet connection.",[_p]:"Network request failed: If the browser threw a CORS error, check that the redirectUri is registered in the Azure App Portal as type 'SPA'",[vp]:"Network request failed. Please check the network trace to determine root cause.",[Du]:"Failed to parse network response. Check network trace.",[Cp]:"Error loading token to cache.",[Su]:"Cryptographic Key or Keypair not found in browser storage.",[Ep]:"An authorization code must be provided (as the `code` property on the request) to this flow.",[Ip]:"An authorization code or nativeAccountId must be provided to this flow.",[Tp]:"Request cannot contain both spa code and native account id.",[Au]:"IndexedDB, which is required for persistent cryptographic key storage, is unavailable. This may be caused by browser privacy features which block persistent storage in third-party contexts.",[wp]:`Unable to acquire token from native platform.  ${kr}`,[Dp]:"Timed out while attempting to establish connection to browser extension",[Sp]:"Native extension is not installed. If you think this is a mistake call the initialize function.",[hi]:`Connection to native platform has not been established. Please install a compatible browser extension and run initialize().  ${kr}`,[Ap]:`You must call and await the initialize function before attempting to call any other MSAL API.  ${kr}`,[bp]:"The provided prompt is not supported by the native platform. This request should be routed to the web based flow.",[kp]:"Invalid base64 encoded string.",[Rp]:"Invalid PoP token request. The request should not have both a popKid value and signPopToken set to true.",[G0]:"Failed to build request headers object.",[z0]:"Failed to parse response headers"};class bu extends Ne{constructor(e,n){super(e,W[e],n),Object.setPrototypeOf(this,bu.prototype),this.name="BrowserAuthError"}}function O(t,e){return new bu(t,e)}class F9{sendGetRequestAsync(e,n){return y(function*(){let r,o={},i=0;const s=q0(n);try{r=yield fetch(e,{method:"GET",headers:s})}catch{throw O(window.navigator.onLine?vp:Ys)}o=K0(r.headers);try{return i=r.status,{headers:o,body:yield r.json(),status:i}}catch{throw $0(O(Du),i,o)}})()}sendPostRequestAsync(e,n){return y(function*(){const r=n&&n.body||"",o=q0(n);let i,s=0,a={};try{i=yield fetch(e,{method:"POST",headers:o,body:r})}catch{throw O(window.navigator.onLine?_p:Ys)}a=K0(i.headers);try{return s=i.status,{headers:a,body:yield i.json(),status:s}}catch{throw $0(O(Du),s,a)}})()}}function q0(t){try{const e=new Headers;return t&&t.headers?(Object.entries(t.headers).forEach(([r,o])=>{e.append(r,o)}),e):e}catch{throw O(G0)}}function K0(t){try{const e={};return t.forEach((n,r)=>{e[r]=n}),e}catch{throw O(z0)}}function Mp(t){return encodeURIComponent(hE(t).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_"))}function Np(t){return W0(t).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function hE(t){return W0((new TextEncoder).encode(t))}function W0(t){const e=Array.from(t,n=>String.fromCodePoint(n)).join("");return btoa(e)}const Y0="SHA-256",H9=new Uint8Array([1,0,1]),Q0="0123456789abcdef",J0=new Uint32Array(1),pE={name:"RSASSA-PKCS1-v1_5",hash:Y0,modulusLength:2048,publicExponent:H9};function Z0(t,e,n){return gE.apply(this,arguments)}function gE(){return(gE=y(function*(t,e,n){e?.addQueueMeasurement("sha256Digest",n);const o=(new TextEncoder).encode(t);return window.crypto.subtle.digest(Y0,o)})).apply(this,arguments)}function j9(t){return window.crypto.getRandomValues(t)}function mE(){return window.crypto.getRandomValues(J0),J0[0]}function er(){const t=Date.now(),e=1024*mE()+(1023&mE()),n=new Uint8Array(16),r=Math.trunc(e/2**30),o=e&2**30-1,i=mE();n[0]=t/2**40,n[1]=t/2**32,n[2]=t/2**24,n[3]=t/65536,n[4]=t/256,n[5]=t,n[6]=112|r>>>8,n[7]=r,n[8]=128|o>>>24,n[9]=o>>>16,n[10]=o>>>8,n[11]=o,n[12]=i>>>24,n[13]=i>>>16,n[14]=i>>>8,n[15]=i;let s="";for(let a=0;a<n.length;a++)s+=Q0.charAt(n[a]>>>4),s+=Q0.charAt(15&n[a]),(3===a||5===a||7===a||9===a)&&(s+="-");return s}function yE(){return(yE=y(function*(t,e){return window.crypto.subtle.generateKey(pE,t,e)})).apply(this,arguments)}function _E(t){return vE.apply(this,arguments)}function vE(){return(vE=y(function*(t){return window.crypto.subtle.exportKey("jwk",t)})).apply(this,arguments)}function CE(){return(CE=y(function*(t,e,n){return window.crypto.subtle.importKey("jwk",t,pE,e,n)})).apply(this,arguments)}function EE(){return(EE=y(function*(t,e){return window.crypto.subtle.sign(pE,t,e)})).apply(this,arguments)}function X0(t){return IE.apply(this,arguments)}function IE(){return(IE=y(function*(t){const e=yield Z0(t);return Np(new Uint8Array(e))})).apply(this,arguments)}const ku="storage_not_supported",TE="stubbed_public_client_application_called",Op="in_mem_redirect_unavailable",Pp={[ku]:"Given storage configuration option was not supported.",[TE]:"Stub instance of Public Client Application was called. If using msal-react, please ensure context is not used without a provider. For more visit: aka.ms/msaljs/browser-errors",[Op]:"Redirect cannot be supported. In-memory storage was selected and storeAuthStateInCookie=false, which would cause the library to be unable to handle the incoming hash. If you would like to use the redirect API, please use session/localStorage or set storeAuthStateInCookie=true."};class wE extends Ne{constructor(e,n){super(e,n),this.name="BrowserConfigurationAuthError",Object.setPrototypeOf(this,wE.prototype)}}function DE(t){return new wE(t,Pp[t])}function SE(){return window.parent!==window}function Rr(){return typeof window<"u"&&window.location?window.location.href.split("?")[0].split("#")[0]:""}function ex(){if(typeof window>"u")throw O(Ws)}function tx(t){if(!t)throw O(Ap)}function AE(t){ex(),function Q9(){if(se.hashContainsKnownProperties(window.location.hash)&&SE())throw O(hp)}(),function Z9(){if(function W9(){return typeof window<"u"&&!!window.opener&&window.opener!==window&&"string"==typeof window.name&&0===window.name.indexOf("msal.")}())throw O(pp)}(),tx(t)}function nx(t,e){if(AE(t),function J9(t){if(SE()&&!t)throw O(fp)}(e.system.allowRedirectInIframe),"memoryStorage"===e.cache.cacheLocation&&!e.cache.storeAuthStateInCookie)throw DE(Op)}function rx(t){const e=document.createElement("link");e.rel="preconnect",e.href=new URL(t).origin,e.crossOrigin="anonymous",document.head.appendChild(e),window.setTimeout(()=>{try{document.head.removeChild(e)}catch{}},1e4)}const Qs="3.30.0";class kE{static loggerCallback(e,n){switch(e){case xe.Error:return void console.error(n);case xe.Info:return void console.info(n);case xe.Verbose:return void console.debug(n);case xe.Warning:return void console.warn(n);default:return void console.log(n)}}constructor(e){let n;this.browserEnvironment=typeof window<"u",this.config=function r7({auth:t,cache:e,system:n,telemetry:r},o){const i={clientId:T.EMPTY_STRING,authority:`${T.DEFAULT_AUTHORITY}`,knownAuthorities:[],cloudDiscoveryMetadata:T.EMPTY_STRING,authorityMetadata:T.EMPTY_STRING,redirectUri:typeof window<"u"?Rr():"",postLogoutRedirectUri:T.EMPTY_STRING,navigateToLoginRequestUrl:!0,clientCapabilities:[],protocolMode:"AAD",OIDCOptions:{serverResponseType:ou.FRAGMENT,defaultScopes:[T.OPENID_SCOPE,T.PROFILE_SCOPE,T.OFFLINE_ACCESS_SCOPE]},azureCloudOptions:{azureCloudInstance:"none",tenant:T.EMPTY_STRING},skipAuthorityMetadataCache:!1,supportsNestedAppAuth:!1,instanceAware:!1},s={cacheLocation:"sessionStorage",temporaryCacheLocation:"sessionStorage",storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!(!e||"localStorage"!==e.cacheLocation),claimsBasedCachingEnabled:!1},a={loggerCallback:()=>{},logLevel:xe.Info,piiLoggingEnabled:!1},u={...{...U0,loggerOptions:a,networkClient:o?new F9:b9,navigationClient:new np,loadFrameTimeout:0,windowHashTimeout:n?.loadFrameTimeout||6e4,iframeHashTimeout:n?.loadFrameTimeout||1e4,navigateFrameWait:0,redirectNavigationTimeout:3e4,asyncPopups:!1,allowRedirectInIframe:!1,allowNativeBroker:!1,nativeBrokerHandshakeTimeout:n?.nativeBrokerHandshakeTimeout||2e3,pollIntervalMilliseconds:30},...n,loggerOptions:n?.loggerOptions||a},l={application:{appName:T.EMPTY_STRING,appVersion:T.EMPTY_STRING},client:new R9};if("OIDC"!==t?.protocolMode&&t?.OIDCOptions&&new lo(u.loggerOptions).warning(JSON.stringify(we(Wh))),t?.protocolMode&&"AAD"!==t.protocolMode&&u?.allowNativeBroker)throw we(Yh);return{auth:{...i,...t,OIDCOptions:{...i.OIDCOptions,...t?.OIDCOptions}},cache:{...s,...e},system:u,telemetry:{...l,...r}}}(e,this.browserEnvironment);try{n=window.sessionStorage}catch{}const r=n?.getItem("msal.browser.log.level"),o=n?.getItem("msal.browser.log.pii")?.toLowerCase(),i="true"===o||"false"!==o&&void 0,s={...this.config.system.loggerOptions},a=r&&Object.keys(xe).includes(r)?xe[r]:void 0;a&&(s.loggerCallback=kE.loggerCallback,s.logLevel=a),void 0!==i&&(s.piiLoggingEnabled=i),this.logger=new lo(s,"@azure/msal-browser",Qs),this.available=!1}getConfig(){return this.config}getLogger(){return this.logger}isAvailable(){return this.available}isBrowserEnvironment(){return this.browserEnvironment}}let ox=(()=>{class t extends kE{getModuleName(){return t.MODULE_NAME}getId(){return t.ID}initialize(){var n=this;return y(function*(){return n.available=typeof window<"u",n.available})()}}return t.MODULE_NAME="",t.ID="StandardOperatingContext",t})();const ix="missing_kid_error",sx="missing_alg_error",i7={[ix]:"The JOSE Header for the requested JWT, JWS or JWK object requires a keyId to be configured as the 'kid' header claim. No 'kid' value was provided.",[sx]:"The JOSE Header for the requested JWT, JWS or JWK object requires an algorithm to be specified as the 'alg' header claim. No 'alg' value was provided."};class RE extends Ne{constructor(e,n){super(e,n),this.name="JoseHeaderError",Object.setPrototypeOf(this,RE.prototype)}}function ax(t){return new RE(t,i7[t])}class ME{constructor(e){this.typ=e.typ,this.alg=e.alg,this.kid=e.kid}static getShrHeaderString(e){if(!e.kid)throw ax(ix);if(!e.alg)throw ax(sx);const n=new ME({typ:e.typ||"pop",kid:e.kid,alg:e.alg});return JSON.stringify(n)}}function tr(t){return(new TextDecoder).decode(function s7(t){let e=t.replace(/-/g,"+").replace(/_/g,"/");switch(e.length%4){case 0:break;case 2:e+="==";break;case 3:e+="=";break;default:throw O(kp)}const n=atob(e);return Uint8Array.from(n,r=>r.codePointAt(0)||0)}(t))}class a7{constructor(){this.dbName=aE,this.version=1,this.tableName=N9,this.dbOpen=!1}open(){var e=this;return y(function*(){return new Promise((n,r)=>{const o=window.indexedDB.open(e.dbName,e.version);o.addEventListener("upgradeneeded",i=>{i.target.result.createObjectStore(e.tableName)}),o.addEventListener("success",i=>{e.db=i.target.result,e.dbOpen=!0,n()}),o.addEventListener("error",()=>r(O(Au)))})})()}closeConnection(){const e=this.db;e&&this.dbOpen&&(e.close(),this.dbOpen=!1)}validateDbIsOpen(){var e=this;return y(function*(){if(!e.dbOpen)return e.open()})()}getItem(e){var n=this;return y(function*(){return yield n.validateDbIsOpen(),new Promise((r,o)=>{if(!n.db)return o(O(ho));const a=n.db.transaction([n.tableName],"readonly").objectStore(n.tableName).get(e);a.addEventListener("success",c=>{const u=c;n.closeConnection(),r(u.target.result)}),a.addEventListener("error",c=>{n.closeConnection(),o(c)})})})()}setItem(e,n){var r=this;return y(function*(){return yield r.validateDbIsOpen(),new Promise((o,i)=>{if(!r.db)return i(O(ho));const c=r.db.transaction([r.tableName],"readwrite").objectStore(r.tableName).put(n,e);c.addEventListener("success",()=>{r.closeConnection(),o()}),c.addEventListener("error",u=>{r.closeConnection(),i(u)})})})()}removeItem(e){var n=this;return y(function*(){return yield n.validateDbIsOpen(),new Promise((r,o)=>{if(!n.db)return o(O(ho));const a=n.db.transaction([n.tableName],"readwrite").objectStore(n.tableName).delete(e);a.addEventListener("success",()=>{n.closeConnection(),r()}),a.addEventListener("error",c=>{n.closeConnection(),o(c)})})})()}getKeys(){var e=this;return y(function*(){return yield e.validateDbIsOpen(),new Promise((n,r)=>{if(!e.db)return r(O(ho));const s=e.db.transaction([e.tableName],"readonly").objectStore(e.tableName).getAllKeys();s.addEventListener("success",a=>{const c=a;e.closeConnection(),n(c.target.result)}),s.addEventListener("error",a=>{e.closeConnection(),r(a)})})})()}containsKey(e){var n=this;return y(function*(){return yield n.validateDbIsOpen(),new Promise((r,o)=>{if(!n.db)return o(O(ho));const a=n.db.transaction([n.tableName],"readonly").objectStore(n.tableName).count(e);a.addEventListener("success",c=>{const u=c;n.closeConnection(),r(1===u.target.result)}),a.addEventListener("error",c=>{n.closeConnection(),o(c)})})})()}deleteDatabase(){var e=this;return y(function*(){return e.db&&e.dbOpen&&e.closeConnection(),new Promise((n,r)=>{const o=window.indexedDB.deleteDatabase(aE),i=setTimeout(()=>r(!1),200);o.addEventListener("success",()=>(clearTimeout(i),n(!0))),o.addEventListener("blocked",()=>(clearTimeout(i),n(!0))),o.addEventListener("error",()=>(clearTimeout(i),r(!1)))})})()}}class NE{constructor(){this.cache=new Map}getItem(e){return this.cache.get(e)||null}setItem(e,n){this.cache.set(e,n)}removeItem(e){this.cache.delete(e)}getKeys(){const e=[];return this.cache.forEach((n,r)=>{e.push(r)}),e}containsKey(e){return this.cache.has(e)}clear(){this.cache.clear()}}class c7{constructor(e){this.inMemoryCache=new NE,this.indexedDBCache=new a7,this.logger=e}handleDatabaseAccessError(e){if(!(e instanceof bu&&e.errorCode===Au))throw e;this.logger.error("Could not access persistent storage. This may be caused by browser privacy features which block persistent storage in third-party contexts.")}getItem(e){var n=this;return y(function*(){const r=n.inMemoryCache.getItem(e);if(!r)try{return n.logger.verbose("Queried item not found in in-memory cache, now querying persistent storage."),yield n.indexedDBCache.getItem(e)}catch(o){n.handleDatabaseAccessError(o)}return r})()}setItem(e,n){var r=this;return y(function*(){r.inMemoryCache.setItem(e,n);try{yield r.indexedDBCache.setItem(e,n)}catch(o){r.handleDatabaseAccessError(o)}})()}removeItem(e){var n=this;return y(function*(){n.inMemoryCache.removeItem(e);try{yield n.indexedDBCache.removeItem(e)}catch(r){n.handleDatabaseAccessError(r)}})()}getKeys(){var e=this;return y(function*(){const n=e.inMemoryCache.getKeys();if(0===n.length)try{return e.logger.verbose("In-memory cache is empty, now querying persistent storage."),yield e.indexedDBCache.getKeys()}catch(r){e.handleDatabaseAccessError(r)}return n})()}containsKey(e){var n=this;return y(function*(){const r=n.inMemoryCache.containsKey(e);if(!r)try{return n.logger.verbose("Key not found in in-memory cache, now querying persistent storage."),yield n.indexedDBCache.containsKey(e)}catch(o){n.handleDatabaseAccessError(o)}return r})()}clearInMemory(){this.logger.verbose("Deleting in-memory keystore"),this.inMemoryCache.clear(),this.logger.verbose("In-memory keystore deleted")}clearPersistent(){var e=this;return y(function*(){try{e.logger.verbose("Deleting persistent keystore");const n=yield e.indexedDBCache.deleteDatabase();return n&&e.logger.verbose("Persistent keystore deleted"),n}catch(n){return e.handleDatabaseAccessError(n),!1}})()}}let u7=(()=>{class t{constructor(n,r,o){this.logger=n,function V9(t){if(!window)throw O(Ws);if(!window.crypto)throw O(Iu);if(!t&&!window.crypto.subtle)throw O(Iu,"crypto_subtle_undefined")}(o??!1),this.cache=new c7(this.logger),this.performanceClient=r}createNewGuid(){return er()}base64Encode(n){return hE(n)}base64Decode(n){return tr(n)}base64UrlEncode(n){return Mp(n)}encodeKid(n){return this.base64UrlEncode(JSON.stringify({kid:n}))}getPublicKeyThumbprint(n){var r=this;return y(function*(){const o=r.performanceClient?.startMeasurement("cryptoOptsGetPublicKeyThumbprint",n.correlationId),i=yield function $9(t,e){return yE.apply(this,arguments)}(t.EXTRACTABLE,t.POP_KEY_USAGES),s=yield _E(i.publicKey),c=cx({e:s.e,kty:s.kty,n:s.n}),u=yield r.hashString(c),l=yield _E(i.privateKey),d=yield function G9(t,e,n){return CE.apply(this,arguments)}(l,!1,["sign"]);return yield r.cache.setItem(u,{privateKey:d,publicKey:i.publicKey,requestMethod:n.resourceRequestMethod,requestUri:n.resourceRequestUri}),o&&o.end({success:!0}),u})()}removeTokenBindingKey(n){var r=this;return y(function*(){return yield r.cache.removeItem(n),!(yield r.cache.containsKey(n))})()}clearKeystore(){var n=this;return y(function*(){n.cache.clearInMemory();try{return yield n.cache.clearPersistent(),!0}catch(r){return r instanceof Error?n.logger.error(`Clearing keystore failed with error: ${r.message}`):n.logger.error("Clearing keystore failed with unknown error"),!1}})()}signJwt(n,r,o,i){var s=this;return y(function*(){const a=s.performanceClient?.startMeasurement("cryptoOptsSignJwt",i),c=yield s.cache.getItem(r);if(!c)throw O(Su);const u=yield _E(c.publicKey),l=cx(u),d=Mp(JSON.stringify({kid:r})),h=Mp(ME.getShrHeaderString({...o?.header,alg:u.alg,kid:d}));n.cnf={jwk:JSON.parse(l)};const m=`${h}.${Mp(JSON.stringify(n))}`,C=(new TextEncoder).encode(m),v=yield function z9(t,e){return EE.apply(this,arguments)}(c.privateKey,C),x=`${m}.${Np(new Uint8Array(v))}`;return a&&a.end({success:!0}),x})()}hashString(n){return y(function*(){return X0(n)})()}}return t.POP_KEY_USAGES=["sign","verify"],t.EXTRACTABLE=!0,t})();function cx(t){return JSON.stringify(t,Object.keys(t).sort())}const pi=(t,e,n,r,o)=>(...i)=>{n.trace(`Executing function ${e}`);const s=r?.startMeasurement(e,o);if(o){const a=e+"CallCount";r?.incrementFields({[a]:1},o)}try{const a=t(...i);return s?.end({success:!0}),n.trace(`Returning result from ${e}`),a}catch(a){n.trace(`Error occurred in ${e}`);try{n.trace(JSON.stringify(a))}catch{n.trace("Unable to print error message.")}throw s?.end({success:!1},a),a}},k=(t,e,n,r,o)=>(...i)=>{n.trace(`Executing function ${e}`);const s=r?.startMeasurement(e,o);if(o){const a=e+"CallCount";r?.incrementFields({[a]:1},o)}return r?.setPreQueueTime(e,o),t(...i).then(a=>(n.trace(`Returning result from ${e}`),s?.end({success:!0}),a)).catch(a=>{n.trace(`Error occurred in ${e}`);try{n.trace(JSON.stringify(a))}catch{n.trace("Unable to print error message.")}throw s?.end({success:!1},a),a})};let h7=(()=>{class t{constructor(n,r,o,i){this.networkInterface=n,this.logger=r,this.performanceClient=o,this.correlationId=i}detectRegion(n,r){var o=this;return y(function*(){o.performanceClient?.addQueueMeasurement("regionDiscoveryDetectRegion",o.correlationId);let i=n;if(i)r.region_source="3";else{const s=t.IMDS_OPTIONS;try{const a=yield k(o.getRegionFromIMDS.bind(o),"regionDiscoveryGetRegionFromIMDS",o.logger,o.performanceClient,o.correlationId)(T.IMDS_VERSION,s);if(200===a.status&&(i=a.body,r.region_source="4"),400===a.status){const c=yield k(o.getCurrentVersion.bind(o),"regionDiscoveryGetCurrentVersion",o.logger,o.performanceClient,o.correlationId)(s);if(!c)return r.region_source="1",null;const u=yield k(o.getRegionFromIMDS.bind(o),"regionDiscoveryGetRegionFromIMDS",o.logger,o.performanceClient,o.correlationId)(c,s);200===u.status&&(i=u.body,r.region_source="4")}}catch{return r.region_source="1",null}}return i||(r.region_source="1"),i||null})()}getRegionFromIMDS(n,r){var o=this;return y(function*(){return o.performanceClient?.addQueueMeasurement("regionDiscoveryGetRegionFromIMDS",o.correlationId),o.networkInterface.sendGetRequestAsync(`${T.IMDS_ENDPOINT}?api-version=${n}&format=text`,r,T.IMDS_TIMEOUT)})()}getCurrentVersion(n){var r=this;return y(function*(){r.performanceClient?.addQueueMeasurement("regionDiscoveryGetCurrentVersion",r.correlationId);try{const o=yield r.networkInterface.sendGetRequestAsync(`${T.IMDS_ENDPOINT}?format=json`,n);return 400===o.status&&o.body&&o.body["newest-versions"]&&o.body["newest-versions"].length>0?o.body["newest-versions"][0]:null}catch{return null}})()}}return t.IMDS_OPTIONS={headers:{Metadata:"true"}},t})();class Tt{constructor(e,n,r,o,i,s,a,c){this.canonicalAuthority=e,this._canonicalAuthority.validateAsUri(),this.networkInterface=n,this.cacheManager=r,this.authorityOptions=o,this.regionDiscoveryMetadata={region_used:void 0,region_source:void 0,region_outcome:void 0},this.logger=i,this.performanceClient=a,this.correlationId=s,this.managedIdentity=c||!1,this.regionDiscovery=new h7(n,this.logger,this.performanceClient,this.correlationId)}getAuthorityType(e){if(e.HostNameAndPort.endsWith(T.CIAM_AUTH_URL))return 3;const n=e.PathSegments;if(n.length)switch(n[0].toLowerCase()){case T.ADFS:return 1;case T.DSTS:return 2}return 0}get authorityType(){return this.getAuthorityType(this.canonicalAuthorityUrlComponents)}get protocolMode(){return this.authorityOptions.protocolMode}get options(){return this.authorityOptions}get canonicalAuthority(){return this._canonicalAuthority.urlString}set canonicalAuthority(e){this._canonicalAuthority=new se(e),this._canonicalAuthority.validateAsUri(),this._canonicalAuthorityUrlComponents=null}get canonicalAuthorityUrlComponents(){return this._canonicalAuthorityUrlComponents||(this._canonicalAuthorityUrlComponents=this._canonicalAuthority.getUrlComponents()),this._canonicalAuthorityUrlComponents}get hostnameAndPort(){return this.canonicalAuthorityUrlComponents.HostNameAndPort.toLowerCase()}get tenant(){return this.canonicalAuthorityUrlComponents.PathSegments[0]}get authorizationEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.authorization_endpoint);throw b(On)}get tokenEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint);throw b(On)}get deviceCodeEndpoint(){if(this.discoveryComplete())return this.replacePath(this.metadata.token_endpoint.replace("/token","/devicecode"));throw b(On)}get endSessionEndpoint(){if(this.discoveryComplete()){if(!this.metadata.end_session_endpoint)throw b(Mh);return this.replacePath(this.metadata.end_session_endpoint)}throw b(On)}get selfSignedJwtAudience(){if(this.discoveryComplete())return this.replacePath(this.metadata.issuer);throw b(On)}get jwksUri(){if(this.discoveryComplete())return this.replacePath(this.metadata.jwks_uri);throw b(On)}canReplaceTenant(e){return 1===e.PathSegments.length&&!Tt.reservedTenantDomains.has(e.PathSegments[0])&&0===this.getAuthorityType(e)&&"AAD"===this.protocolMode}replaceTenant(e){return e.replace(/{tenant}|{tenantid}/g,this.tenant)}replacePath(e){let n=e;const o=new se(this.metadata.canonical_authority).getUrlComponents(),i=o.PathSegments;return this.canonicalAuthorityUrlComponents.PathSegments.forEach((a,c)=>{let u=i[c];if(0===c&&this.canReplaceTenant(o)){const l=new se(this.metadata.authorization_endpoint).getUrlComponents().PathSegments[0];u!==l&&(this.logger.verbose(`Replacing tenant domain name ${u} with id ${l}`),u=l)}a!==u&&(n=n.replace(`/${u}/`,`/${a}/`))}),this.replaceTenant(n)}get defaultOpenIdConfigurationEndpoint(){const e=this.hostnameAndPort;return this.canonicalAuthority.endsWith("v2.0/")||1===this.authorityType||"AAD"!==this.protocolMode&&!this.isAliasOfKnownMicrosoftAuthority(e)?`${this.canonicalAuthority}.well-known/openid-configuration`:`${this.canonicalAuthority}v2.0/.well-known/openid-configuration`}discoveryComplete(){return!!this.metadata}resolveEndpointsAsync(){var e=this;return y(function*(){e.performanceClient?.addQueueMeasurement("authorityResolveEndpointsAsync",e.correlationId);const n=e.getCurrentMetadataEntity(),r=yield k(e.updateCloudDiscoveryMetadata.bind(e),"authorityUpdateCloudDiscoveryMetadata",e.logger,e.performanceClient,e.correlationId)(n);e.canonicalAuthority=e.canonicalAuthority.replace(e.hostnameAndPort,n.preferred_network);const o=yield k(e.updateEndpointMetadata.bind(e),"authorityUpdateEndpointMetadata",e.logger,e.performanceClient,e.correlationId)(n);e.updateCachedMetadata(n,r,{source:o}),e.performanceClient?.addFields({cloudDiscoverySource:r,authorityEndpointSource:o},e.correlationId)})()}getCurrentMetadataEntity(){let e=this.cacheManager.getAuthorityMetadataByAlias(this.hostnameAndPort);return e||(e={aliases:[],preferred_cache:this.hostnameAndPort,preferred_network:this.hostnameAndPort,canonical_authority:this.canonicalAuthority,authorization_endpoint:"",token_endpoint:"",end_session_endpoint:"",issuer:"",aliasesFromNetwork:!1,endpointsFromNetwork:!1,expiresAt:k0(),jwks_uri:""}),e}updateCachedMetadata(e,n,r){"cache"!==n&&"cache"!==r?.source&&(e.expiresAt=k0(),e.canonical_authority=this.canonicalAuthority);const o=this.cacheManager.generateAuthorityMetadataCacheKey(e.preferred_cache);this.cacheManager.setAuthorityMetadata(o,e),this.metadata=e}updateEndpointMetadata(e){var n=this;return y(function*(){n.performanceClient?.addQueueMeasurement("authorityUpdateEndpointMetadata",n.correlationId);const r=n.updateEndpointMetadataFromLocalSources(e);if(r){if("hardcoded_values"===r.source&&n.authorityOptions.azureRegionConfiguration?.azureRegion&&r.metadata){const i=yield k(n.updateMetadataWithRegionalInformation.bind(n),"authorityUpdateMetadataWithRegionalInformation",n.logger,n.performanceClient,n.correlationId)(r.metadata);Fh(e,i,!1),e.canonical_authority=n.canonicalAuthority}return r.source}let o=yield k(n.getEndpointMetadataFromNetwork.bind(n),"authorityGetEndpointMetadataFromNetwork",n.logger,n.performanceClient,n.correlationId)();if(o)return n.authorityOptions.azureRegionConfiguration?.azureRegion&&(o=yield k(n.updateMetadataWithRegionalInformation.bind(n),"authorityUpdateMetadataWithRegionalInformation",n.logger,n.performanceClient,n.correlationId)(o)),Fh(e,o,!0),"network";throw b(vh,n.defaultOpenIdConfigurationEndpoint)})()}updateEndpointMetadataFromLocalSources(e){this.logger.verbose("Attempting to get endpoint metadata from authority configuration");const n=this.getEndpointMetadataFromConfig();if(n)return this.logger.verbose("Found endpoint metadata in authority configuration"),Fh(e,n,!1),{source:"config"};if(this.logger.verbose("Did not find endpoint metadata in the config... Attempting to get endpoint metadata from the hardcoded values."),this.authorityOptions.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get endpoint metadata from the network metadata cache.");else{const o=this.getEndpointMetadataFromHardcodedValues();if(o)return Fh(e,o,!1),{source:"hardcoded_values",metadata:o};this.logger.verbose("Did not find endpoint metadata in hardcoded values... Attempting to get endpoint metadata from the network metadata cache.")}const r=R0(e);return this.isAuthoritySameType(e)&&e.endpointsFromNetwork&&!r?(this.logger.verbose("Found endpoint metadata in the cache."),{source:"cache"}):(r&&this.logger.verbose("The metadata entity is expired."),null)}isAuthoritySameType(e){return new se(e.canonical_authority).getUrlComponents().PathSegments.length===this.canonicalAuthorityUrlComponents.PathSegments.length}getEndpointMetadataFromConfig(){if(this.authorityOptions.authorityMetadata)try{return JSON.parse(this.authorityOptions.authorityMetadata)}catch{throw we(zh)}return null}getEndpointMetadataFromNetwork(){var e=this;return y(function*(){e.performanceClient?.addQueueMeasurement("authorityGetEndpointMetadataFromNetwork",e.correlationId);const n={},r=e.defaultOpenIdConfigurationEndpoint;e.logger.verbose(`Authority.getEndpointMetadataFromNetwork: attempting to retrieve OAuth endpoints from ${r}`);try{const o=yield e.networkInterface.sendGetRequestAsync(r,n);return function l7(t){return t.hasOwnProperty("authorization_endpoint")&&t.hasOwnProperty("token_endpoint")&&t.hasOwnProperty("issuer")&&t.hasOwnProperty("jwks_uri")}(o.body)?o.body:(e.logger.verbose("Authority.getEndpointMetadataFromNetwork: could not parse response as OpenID configuration"),null)}catch(o){return e.logger.verbose(`Authority.getEndpointMetadataFromNetwork: ${o}`),null}})()}getEndpointMetadataFromHardcodedValues(){return this.hostnameAndPort in P0?P0[this.hostnameAndPort]:null}updateMetadataWithRegionalInformation(e){var n=this;return y(function*(){n.performanceClient?.addQueueMeasurement("authorityUpdateMetadataWithRegionalInformation",n.correlationId);const r=n.authorityOptions.azureRegionConfiguration?.azureRegion;if(r){if(r!==T.AZURE_REGION_AUTO_DISCOVER_FLAG)return n.regionDiscoveryMetadata.region_outcome="2",n.regionDiscoveryMetadata.region_used=r,Tt.replaceWithRegionalInformation(e,r);const o=yield k(n.regionDiscovery.detectRegion.bind(n.regionDiscovery),"regionDiscoveryDetectRegion",n.logger,n.performanceClient,n.correlationId)(n.authorityOptions.azureRegionConfiguration?.environmentRegion,n.regionDiscoveryMetadata);if(o)return n.regionDiscoveryMetadata.region_outcome="4",n.regionDiscoveryMetadata.region_used=o,Tt.replaceWithRegionalInformation(e,o);n.regionDiscoveryMetadata.region_outcome="5"}return e})()}updateCloudDiscoveryMetadata(e){var n=this;return y(function*(){n.performanceClient?.addQueueMeasurement("authorityUpdateCloudDiscoveryMetadata",n.correlationId);const r=n.updateCloudDiscoveryMetadataFromLocalSources(e);if(r)return r;const o=yield k(n.getCloudDiscoveryMetadataFromNetwork.bind(n),"authorityGetCloudDiscoveryMetadataFromNetwork",n.logger,n.performanceClient,n.correlationId)();if(o)return YC(e,o,!0),"network";throw we(qh)})()}updateCloudDiscoveryMetadataFromLocalSources(e){this.logger.verbose("Attempting to get cloud discovery metadata  from authority configuration"),this.logger.verbosePii(`Known Authorities: ${this.authorityOptions.knownAuthorities||T.NOT_APPLICABLE}`),this.logger.verbosePii(`Authority Metadata: ${this.authorityOptions.authorityMetadata||T.NOT_APPLICABLE}`),this.logger.verbosePii(`Canonical Authority: ${e.canonical_authority||T.NOT_APPLICABLE}`);const n=this.getCloudDiscoveryMetadataFromConfig();if(n)return this.logger.verbose("Found cloud discovery metadata in authority configuration"),YC(e,n,!1),"config";if(this.logger.verbose("Did not find cloud discovery metadata in the config... Attempting to get cloud discovery metadata from the hardcoded values."),this.options.skipAuthorityMetadataCache)this.logger.verbose("Skipping hardcoded cloud discovery metadata cache since skipAuthorityMetadataCache is set to true. Attempting to get cloud discovery metadata from the network metadata cache.");else{const o=function y9(t){return ep(nE.metadata,t)}(this.hostnameAndPort);if(o)return this.logger.verbose("Found cloud discovery metadata from hardcoded values."),YC(e,o,!1),"hardcoded_values";this.logger.verbose("Did not find cloud discovery metadata in hardcoded values... Attempting to get cloud discovery metadata from the network metadata cache.")}const r=R0(e);return this.isAuthoritySameType(e)&&e.aliasesFromNetwork&&!r?(this.logger.verbose("Found cloud discovery metadata in the cache."),"cache"):(r&&this.logger.verbose("The metadata entity is expired."),null)}getCloudDiscoveryMetadataFromConfig(){if(3===this.authorityType)return this.logger.verbose("CIAM authorities do not support cloud discovery metadata, generate the aliases from authority host."),Tt.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort);if(this.authorityOptions.cloudDiscoveryMetadata){this.logger.verbose("The cloud discovery metadata has been provided as a network response, in the config.");try{this.logger.verbose("Attempting to parse the cloud discovery metadata.");const n=ep(JSON.parse(this.authorityOptions.cloudDiscoveryMetadata).metadata,this.hostnameAndPort);if(this.logger.verbose("Parsed the cloud discovery metadata."),n)return this.logger.verbose("There is returnable metadata attached to the parsed cloud discovery metadata."),n;this.logger.verbose("There is no metadata attached to the parsed cloud discovery metadata.")}catch{throw this.logger.verbose("Unable to parse the cloud discovery metadata. Throwing Invalid Cloud Discovery Metadata Error."),we(Cu)}}return this.isInKnownAuthorities()?(this.logger.verbose("The host is included in knownAuthorities. Creating new cloud discovery metadata from the host."),Tt.createCloudDiscoveryMetadataFromHost(this.hostnameAndPort)):null}getCloudDiscoveryMetadataFromNetwork(){var e=this;return y(function*(){e.performanceClient?.addQueueMeasurement("authorityGetCloudDiscoveryMetadataFromNetwork",e.correlationId);const n=`${T.AAD_INSTANCE_DISCOVERY_ENDPT}${e.canonicalAuthority}oauth2/v2.0/authorize`,r={};let o=null;try{const i=yield e.networkInterface.sendGetRequestAsync(n,r);let s,a;if(function d7(t){return t.hasOwnProperty("tenant_discovery_endpoint")&&t.hasOwnProperty("metadata")}(i.body))s=i.body,a=s.metadata,e.logger.verbosePii(`tenant_discovery_endpoint is: ${s.tenant_discovery_endpoint}`);else{if(!function f7(t){return t.hasOwnProperty("error")&&t.hasOwnProperty("error_description")}(i.body))return e.logger.error("AAD did not return a CloudInstanceDiscoveryResponse or CloudInstanceDiscoveryErrorResponse"),null;if(e.logger.warning(`A CloudInstanceDiscoveryErrorResponse was returned. The cloud instance discovery network request's status code is: ${i.status}`),s=i.body,s.error===T.INVALID_INSTANCE)return e.logger.error("The CloudInstanceDiscoveryErrorResponse error is invalid_instance."),null;e.logger.warning(`The CloudInstanceDiscoveryErrorResponse error is ${s.error}`),e.logger.warning(`The CloudInstanceDiscoveryErrorResponse error description is ${s.error_description}`),e.logger.warning("Setting the value of the CloudInstanceDiscoveryMetadata (returned from the network) to []"),a=[]}e.logger.verbose("Attempting to find a match between the developer's authority and the CloudInstanceDiscoveryMetadata returned from the network request."),o=ep(a,e.hostnameAndPort)}catch(i){return e.logger.error(i instanceof Ne?`There was a network error while attempting to get the cloud discovery instance metadata.\nError: ${i.errorCode}\nError Description: ${i.errorMessage}`:`A non-MSALJS error was thrown while attempting to get the cloud instance discovery metadata.\nError: ${i.name}\nError Description: ${i.message}`),null}return o||(e.logger.warning("The developer's authority was not found within the CloudInstanceDiscoveryMetadata returned from the network request."),e.logger.verbose("Creating custom Authority for custom domain scenario."),o=Tt.createCloudDiscoveryMetadataFromHost(e.hostnameAndPort)),o})()}isInKnownAuthorities(){return this.authorityOptions.knownAuthorities.filter(n=>n&&se.getDomainFromUrl(n).toLowerCase()===this.hostnameAndPort).length>0}static generateAuthority(e,n){let r;return n&&"none"!==n.azureCloudInstance&&(r=`${n.azureCloudInstance}/${n.tenant?n.tenant:T.DEFAULT_COMMON_TENANT}/`),r||e}static createCloudDiscoveryMetadataFromHost(e){return{preferred_network:e,preferred_cache:e,aliases:[e]}}getPreferredCache(){if(this.managedIdentity)return T.DEFAULT_AUTHORITY_HOST;if(this.discoveryComplete())return this.metadata.preferred_cache;throw b(On)}isAlias(e){return this.metadata.aliases.indexOf(e)>-1}isAliasOfKnownMicrosoftAuthority(e){return x0.has(e)}static isPublicCloudAuthority(e){return T.KNOWN_PUBLIC_CLOUDS.indexOf(e)>=0}static buildRegionalAuthorityString(e,n,r){const o=new se(e);o.validateAsUri();const i=o.getUrlComponents();let s=`${n}.${i.HostNameAndPort}`;this.isPublicCloudAuthority(i.HostNameAndPort)&&(s=`${n}.${T.REGIONAL_AUTH_PUBLIC_CLOUD_SUFFIX}`);const a=se.constructAuthorityUriFromObject({...o.getUrlComponents(),HostNameAndPort:s}).urlString;return r?`${a}?${r}`:a}static replaceWithRegionalInformation(e,n){const r={...e};return r.authorization_endpoint=Tt.buildRegionalAuthorityString(r.authorization_endpoint,n),r.token_endpoint=Tt.buildRegionalAuthorityString(r.token_endpoint,n),r.end_session_endpoint&&(r.end_session_endpoint=Tt.buildRegionalAuthorityString(r.end_session_endpoint,n)),r}static transformCIAMAuthority(e){let n=e;const o=new se(e).getUrlComponents();return 0===o.PathSegments.length&&o.HostNameAndPort.endsWith(T.CIAM_AUTH_URL)&&(n=`${n}${o.HostNameAndPort.split(".")[0]}${T.AAD_TENANT_DOMAIN_SUFFIX}`),n}}function ux(t){return t.endsWith(T.FORWARD_SLASH)?t:`${t}${T.FORWARD_SLASH}`}Tt.reservedTenantDomains=new Set(["{tenant}","{tenantid}","common","consumers","organizations"]);const Js="no_tokens_found",xp="native_account_unavailable",OE="refresh_token_expired",Zs="bad_token",lx=["interaction_required","consent_required","login_required",Zs],v7=["message_only","additional_action","basic_action","user_password_expired","consent_required","bad_token"],Fp={[Js]:"No refresh token found in the cache. Please sign-in.",[xp]:"The requested account is not available in the native broker. It may have been deleted or logged out. Please sign-in again using an interactive API.",[OE]:"Refresh token has expired.",[Zs]:"Identity provider returned bad_token due to an expired or invalid refresh token. Please invoke an interactive API to resolve."};class Ln extends Ne{constructor(e,n,r,o,i,s,a,c){super(e,n,r),Object.setPrototypeOf(this,Ln.prototype),this.timestamp=o||T.EMPTY_STRING,this.traceId=i||T.EMPTY_STRING,this.correlationId=s||T.EMPTY_STRING,this.claims=a||T.EMPTY_STRING,this.name="InteractionRequiredAuthError",this.errorNo=c}}function dx(t,e,n){const r=!!t&&lx.indexOf(t)>-1,o=!!n&&v7.indexOf(n)>-1,i=!!e&&lx.some(s=>e.indexOf(s)>-1);return r||i||o}function PE(t){return new Ln(t,Fp[t])}class Un{static setRequestState(e,n,r){const o=Un.generateLibraryState(e,r);return n?`${o}${T.RESOURCE_DELIM}${n}`:o}static generateLibraryState(e,n){if(!e)throw b(gu);const r={id:e.createNewGuid()};n&&(r.meta=n);const o=JSON.stringify(r);return e.base64Encode(o)}static parseRequestState(e,n){if(!e)throw b(gu);if(!n)throw b(fo);try{const r=n.split(T.RESOURCE_DELIM),o=r[0],i=r.length>1?r.slice(1).join(T.RESOURCE_DELIM):T.EMPTY_STRING,s=e.base64Decode(o),a=JSON.parse(s);return{userRequestState:i||T.EMPTY_STRING,libraryState:a}}catch{throw b(fo)}}}class C7{constructor(){if(!window.localStorage)throw DE(ku)}getItem(e){return window.localStorage.getItem(e)}setItem(e,n){window.localStorage.setItem(e,n)}removeItem(e){window.localStorage.removeItem(e)}getKeys(){return Object.keys(window.localStorage)}containsKey(e){return window.localStorage.hasOwnProperty(e)}}class E7{constructor(){if(!window.sessionStorage)throw DE(ku)}getItem(e){return window.sessionStorage.getItem(e)}setItem(e,n){window.sessionStorage.setItem(e,n)}removeItem(e){window.sessionStorage.removeItem(e)}getKeys(){return Object.keys(window.sessionStorage)}containsKey(e){return window.sessionStorage.hasOwnProperty(e)}}function fx(t,e){if(!e)return null;try{return Un.parseRequestState(t,e).libraryState.meta}catch{throw b(fo)}}class T7{getItem(e){const n=`${encodeURIComponent(e)}`,r=document.cookie.split(";");for(let o=0;o<r.length;o++){const i=r[o],[s,...a]=decodeURIComponent(i).trim().split("="),c=a.join("=");if(s===n)return c}return""}setItem(e,n,r,o=!0){let i=`${encodeURIComponent(e)}=${encodeURIComponent(n)};path=/;SameSite=Lax;`;if(r){i+=`expires=${function w7(t){return new Date((new Date).getTime()+864e5*t).toUTCString()}(r)};`}o&&(i+="Secure;"),document.cookie=i}removeItem(e){this.setItem(e,"",-1)}getKeys(){const e=document.cookie.split(";"),n=[];return e.forEach(r=>{const o=decodeURIComponent(r).trim().split("=");n.push(o[0])}),n}containsKey(e){return this.getKeys().includes(e)}}class xE extends Gs{constructor(e,n,r,o,i,s){super(e,r,o,i),this.cacheConfig=n,this.logger=o,this.internalStorage=new NE,this.browserStorage=this.setupBrowserStorage(this.cacheConfig.cacheLocation),this.temporaryCacheStorage=this.setupBrowserStorage(this.cacheConfig.temporaryCacheLocation),this.cookieStorage=new T7,n.cacheMigrationEnabled&&(this.migrateCacheEntries(),this.createKeyMaps()),this.performanceClient=s}setupBrowserStorage(e){try{switch(e){case"localStorage":return new C7;case"sessionStorage":return new E7}}catch(n){this.logger.error(n)}return this.cacheConfig.cacheLocation="memoryStorage",new NE}migrateCacheEntries(){const e=this.browserStorage.getItem("msal.version");e&&this.logger.info(`MSAL.js was last initialized with version ${e}`),e!==Qs&&this.browserStorage.setItem("msal.version",Qs);const r=`${T.CACHE_PREFIX}.${ct.CLIENT_INFO}`,o=`${T.CACHE_PREFIX}.${ct.ERROR}`,i=`${T.CACHE_PREFIX}.${ct.ERROR_DESC}`,l=[this.browserStorage.getItem(`${T.CACHE_PREFIX}.${ct.ID_TOKEN}`),this.browserStorage.getItem(r),this.browserStorage.getItem(o),this.browserStorage.getItem(i)];[ct.ID_TOKEN,ct.CLIENT_INFO,ct.ERROR,ct.ERROR_DESC].forEach((f,h)=>{const p=l[h];p&&this.setTemporaryCache(f,p,!0)})}createKeyMaps(){this.logger.trace("BrowserCacheManager - createKeyMaps called.");const e=this.cryptoImpl.createNewGuid(),n=this.getItem("msal.account.keys"),r=this.getItem(`msal.token.keys.${this.clientId}`);n&&r?this.logger.verbose("BrowserCacheManager:createKeyMaps - account and token key maps already exist, skipping migration."):this.browserStorage.getKeys().forEach(i=>{if(this.isCredentialKey(i)){const s=this.getItem(i);if(s){const a=this.validateAndParseJson(s);if(a&&a.hasOwnProperty("credentialType"))switch(a.credentialType){case J.ID_TOKEN:if(A0(a)){this.logger.trace("BrowserCacheManager:createKeyMaps - idToken found, saving key to token key map"),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - idToken with key: ${i} found, saving key to token key map`);const u=this.updateCredentialCacheKey(i,a,e);return void this.addTokenKey(u,J.ID_TOKEN,e)}this.logger.trace("BrowserCacheManager:createKeyMaps - key found matching idToken schema with value containing idToken credentialType field but value failed IdTokenEntity validation, skipping."),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - failed idToken validation on key: ${i}`);break;case J.ACCESS_TOKEN:case J.ACCESS_TOKEN_WITH_AUTH_SCHEME:if(S0(a)){this.logger.trace("BrowserCacheManager:createKeyMaps - accessToken found, saving key to token key map"),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - accessToken with key: ${i} found, saving key to token key map`);const u=this.updateCredentialCacheKey(i,a,e);return void this.addTokenKey(u,J.ACCESS_TOKEN,e)}this.logger.trace("BrowserCacheManager:createKeyMaps - key found matching accessToken schema with value containing accessToken credentialType field but value failed AccessTokenEntity validation, skipping."),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - failed accessToken validation on key: ${i}`);break;case J.REFRESH_TOKEN:if(b0(a)){this.logger.trace("BrowserCacheManager:createKeyMaps - refreshToken found, saving key to token key map"),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - refreshToken with key: ${i} found, saving key to token key map`);const u=this.updateCredentialCacheKey(i,a,e);return void this.addTokenKey(u,J.REFRESH_TOKEN,e)}this.logger.trace("BrowserCacheManager:createKeyMaps - key found matching refreshToken schema with value containing refreshToken credentialType field but value failed RefreshTokenEntity validation, skipping."),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - failed refreshToken validation on key: ${i}`)}}}if(this.isAccountKey(i)){const s=this.getItem(i);if(s){const a=this.validateAndParseJson(s);a&&rt.isAccountEntity(a)&&(this.logger.trace("BrowserCacheManager:createKeyMaps - account found, saving key to account key map"),this.logger.tracePii(`BrowserCacheManager:createKeyMaps - account with key: ${i} found, saving key to account key map`),this.addAccountKeyToMap(i,e))}}})}validateAndParseJson(e){try{const n=JSON.parse(e);return n&&"object"==typeof n?n:null}catch{return null}}getItem(e){return this.browserStorage.getItem(e)}setItem(e,n,r){let o=[];for(let s=0;s<=20;s++)try{this.browserStorage.setItem(e,n),s>0&&this.removeAccessTokenKeys(o.slice(0,s),r);break}catch(a){const c=L0(a);if(!(c.errorCode===rE&&s<20))throw c;if(o.length||(o=e===`msal.token.keys.${this.clientId}`?JSON.parse(n).accessToken:this.getTokenKeys().accessToken),o.length<=s)throw c;this.removeAccessToken(o[s],r,!1)}}getAccount(e,n,r){this.logger.trace("BrowserCacheManager.getAccount called");const o=this.getCachedAccountEntity(e,n);return this.updateOutdatedCachedAccount(e,o,n,r)}getCachedAccountEntity(e,n){const r=this.getItem(e);if(!r)return this.removeAccountKeyFromMap(e,n),null;const o=this.validateAndParseJson(r);return o&&rt.isAccountEntity(o)?Gs.toObject(new rt,o):null}setAccount(e,n){this.logger.trace("BrowserCacheManager.setAccount called");const r=e.generateAccountKey();e.lastUpdatedAt=Date.now().toString(),this.setItem(r,JSON.stringify(e),n),this.addAccountKeyToMap(r,n)}getAccountKeys(){this.logger.trace("BrowserCacheManager.getAccountKeys called");const e=this.getItem("msal.account.keys");return e?JSON.parse(e):(this.logger.verbose("BrowserCacheManager.getAccountKeys - No account keys found"),[])}addAccountKeyToMap(e,n){this.logger.trace("BrowserCacheManager.addAccountKeyToMap called"),this.logger.tracePii(`BrowserCacheManager.addAccountKeyToMap called with key: ${e}`);const r=this.getAccountKeys();-1===r.indexOf(e)?(r.push(e),this.setItem("msal.account.keys",JSON.stringify(r),n),this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key added")):this.logger.verbose("BrowserCacheManager.addAccountKeyToMap account key already exists in map")}removeAccountKeyFromMap(e,n){this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap called"),this.logger.tracePii(`BrowserCacheManager.removeAccountKeyFromMap called with key: ${e}`);const r=this.getAccountKeys(),o=r.indexOf(e);if(o>-1){if(r.splice(o,1),0===r.length)return void this.removeItem("msal.account.keys");this.setItem("msal.account.keys",JSON.stringify(r),n),this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap account key removed")}else this.logger.trace("BrowserCacheManager.removeAccountKeyFromMap key not found in existing map")}removeAccount(e,n){var r=()=>super.removeAccount,o=this;return y(function*(){r().call(o,e,n),o.removeAccountKeyFromMap(e,n)})()}removeOutdatedAccount(e,n){this.removeItem(e),this.removeAccountKeyFromMap(e,n)}removeIdToken(e,n){super.removeIdToken(e,n),this.removeTokenKey(e,J.ID_TOKEN,n)}removeAccessToken(e,n,r=!0){super.removeAccessToken(e,n),this.performanceClient?.incrementFields({accessTokensRemoved:1},n),r&&this.removeTokenKey(e,J.ACCESS_TOKEN,n)}removeAccessTokenKeys(e,n){this.logger.trace("removeAccessTokenKey called");const r=this.getTokenKeys();let o=0;if(e.forEach(i=>{const s=r.accessToken.indexOf(i);s>-1&&(r.accessToken.splice(s,1),o++)}),o>0)return this.logger.info(`removed ${o} accessToken keys from tokenKeys map`),void this.setTokenKeys(r,n)}removeRefreshToken(e,n){super.removeRefreshToken(e,n),this.removeTokenKey(e,J.REFRESH_TOKEN,n)}getTokenKeys(){this.logger.trace("BrowserCacheManager.getTokenKeys called");const e=this.getItem(`msal.token.keys.${this.clientId}`);if(e){const n=this.validateAndParseJson(e);if(n&&n.hasOwnProperty("idToken")&&n.hasOwnProperty("accessToken")&&n.hasOwnProperty("refreshToken"))return n;this.logger.error("BrowserCacheManager.getTokenKeys - Token keys found but in an unknown format. Returning empty key map.")}else this.logger.verbose("BrowserCacheManager.getTokenKeys - No token keys found");return{idToken:[],accessToken:[],refreshToken:[]}}setTokenKeys(e,n){0!==e.idToken.length||0!==e.accessToken.length||0!==e.refreshToken.length?this.setItem(`msal.token.keys.${this.clientId}`,JSON.stringify(e),n):this.removeItem(`msal.token.keys.${this.clientId}`)}addTokenKey(e,n,r){this.logger.trace("BrowserCacheManager addTokenKey called");const o=this.getTokenKeys();switch(n){case J.ID_TOKEN:-1===o.idToken.indexOf(e)&&(this.logger.info("BrowserCacheManager: addTokenKey - idToken added to map"),o.idToken.push(e));break;case J.ACCESS_TOKEN:const i=o.accessToken.indexOf(e);-1!==i&&o.accessToken.splice(i,1),this.logger.trace(`access token ${-1===i?"added to":"updated in"} map`),o.accessToken.push(e);break;case J.REFRESH_TOKEN:-1===o.refreshToken.indexOf(e)&&(this.logger.info("BrowserCacheManager: addTokenKey - refreshToken added to map"),o.refreshToken.push(e));break;default:throw this.logger.error(`BrowserCacheManager:addTokenKey - CredentialType provided invalid. CredentialType: ${n}`),b(mu)}this.setTokenKeys(o,r)}removeTokenKey(e,n,r,o=this.getTokenKeys()){switch(this.logger.trace("BrowserCacheManager removeTokenKey called"),n){case J.ID_TOKEN:this.logger.infoPii(`BrowserCacheManager: removeTokenKey - attempting to remove idToken with key: ${e} from map`);const i=o.idToken.indexOf(e);i>-1?(this.logger.info("BrowserCacheManager: removeTokenKey - idToken removed from map"),o.idToken.splice(i,1)):this.logger.info("BrowserCacheManager: removeTokenKey - idToken does not exist in map. Either it was previously removed or it was never added.");break;case J.ACCESS_TOKEN:this.logger.infoPii(`BrowserCacheManager: removeTokenKey - attempting to remove accessToken with key: ${e} from map`);const s=o.accessToken.indexOf(e);s>-1?(this.logger.info("BrowserCacheManager: removeTokenKey - accessToken removed from map"),o.accessToken.splice(s,1)):this.logger.info("BrowserCacheManager: removeTokenKey - accessToken does not exist in map. Either it was previously removed or it was never added.");break;case J.REFRESH_TOKEN:this.logger.infoPii(`BrowserCacheManager: removeTokenKey - attempting to remove refreshToken with key: ${e} from map`);const a=o.refreshToken.indexOf(e);a>-1?(this.logger.info("BrowserCacheManager: removeTokenKey - refreshToken removed from map"),o.refreshToken.splice(a,1)):this.logger.info("BrowserCacheManager: removeTokenKey - refreshToken does not exist in map. Either it was previously removed or it was never added.");break;default:throw this.logger.error(`BrowserCacheManager:removeTokenKey - CredentialType provided invalid. CredentialType: ${n}`),b(mu)}this.setTokenKeys(o,r)}getIdTokenCredential(e,n){const r=this.getItem(e);if(!r)return this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),this.removeIdToken(e,n),null;const o=this.validateAndParseJson(r);return o&&A0(o)?(this.logger.trace("BrowserCacheManager.getIdTokenCredential: cache hit"),o):(this.logger.trace("BrowserCacheManager.getIdTokenCredential: called, no cache hit"),null)}setIdTokenCredential(e,n){this.logger.trace("BrowserCacheManager.setIdTokenCredential called");const r=Bs(e);e.lastUpdatedAt=Date.now().toString(),this.setItem(r,JSON.stringify(e),n),this.addTokenKey(r,J.ID_TOKEN,n)}getAccessTokenCredential(e,n){const r=this.getItem(e);if(!r)return this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),this.removeTokenKey(e,J.ACCESS_TOKEN,n),null;const o=this.validateAndParseJson(r);return o&&S0(o)?(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: cache hit"),o):(this.logger.trace("BrowserCacheManager.getAccessTokenCredential: called, no cache hit"),null)}setAccessTokenCredential(e,n){this.logger.trace("BrowserCacheManager.setAccessTokenCredential called");const r=Bs(e);e.lastUpdatedAt=Date.now().toString(),this.setItem(r,JSON.stringify(e),n),this.addTokenKey(r,J.ACCESS_TOKEN,n)}getRefreshTokenCredential(e,n){const r=this.getItem(e);if(!r)return this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),this.removeTokenKey(e,J.REFRESH_TOKEN,n),null;const o=this.validateAndParseJson(r);return o&&b0(o)?(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: cache hit"),o):(this.logger.trace("BrowserCacheManager.getRefreshTokenCredential: called, no cache hit"),null)}setRefreshTokenCredential(e,n){this.logger.trace("BrowserCacheManager.setRefreshTokenCredential called");const r=Bs(e);e.lastUpdatedAt=Date.now().toString(),this.setItem(r,JSON.stringify(e),n),this.addTokenKey(r,J.REFRESH_TOKEN,n)}getAppMetadata(e){const n=this.getItem(e);if(!n)return this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null;const r=this.validateAndParseJson(n);return r&&function p9(t,e){return!!e&&0===t.indexOf(kC)&&e.hasOwnProperty("clientId")&&e.hasOwnProperty("environment")}(e,r)?(this.logger.trace("BrowserCacheManager.getAppMetadata: cache hit"),r):(this.logger.trace("BrowserCacheManager.getAppMetadata: called, no cache hit"),null)}setAppMetadata(e,n){this.logger.trace("BrowserCacheManager.setAppMetadata called");const r=function h9({environment:t,clientId:e}){return[kC,t,e].join("-").toLowerCase()}(e);this.setItem(r,JSON.stringify(e),n)}getServerTelemetry(e){const n=this.getItem(e);if(!n)return this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null;const r=this.validateAndParseJson(n);return r&&function d9(t,e){const n=0===t.indexOf(pt.CACHE_KEY);let r=!0;return e&&(r=e.hasOwnProperty("failedRequests")&&e.hasOwnProperty("errors")&&e.hasOwnProperty("cacheHits")),n&&r}(e,r)?(this.logger.trace("BrowserCacheManager.getServerTelemetry: cache hit"),r):(this.logger.trace("BrowserCacheManager.getServerTelemetry: called, no cache hit"),null)}setServerTelemetry(e,n,r){this.logger.trace("BrowserCacheManager.setServerTelemetry called"),this.setItem(e,JSON.stringify(n),r)}getAuthorityMetadata(e){const n=this.internalStorage.getItem(e);if(!n)return this.logger.trace("BrowserCacheManager.getAuthorityMetadata: called, no cache hit"),null;const r=this.validateAndParseJson(n);return r&&function g9(t,e){return!!e&&0===t.indexOf("authority-metadata")&&e.hasOwnProperty("aliases")&&e.hasOwnProperty("preferred_cache")&&e.hasOwnProperty("preferred_network")&&e.hasOwnProperty("canonical_authority")&&e.hasOwnProperty("authorization_endpoint")&&e.hasOwnProperty("token_endpoint")&&e.hasOwnProperty("issuer")&&e.hasOwnProperty("aliasesFromNetwork")&&e.hasOwnProperty("endpointsFromNetwork")&&e.hasOwnProperty("expiresAt")&&e.hasOwnProperty("jwks_uri")}(e,r)?(this.logger.trace("BrowserCacheManager.getAuthorityMetadata: cache hit"),r):null}getAuthorityMetadataKeys(){return this.internalStorage.getKeys().filter(n=>this.isAuthorityMetadata(n))}setWrapperMetadata(e,n){this.internalStorage.setItem("wrapper.sku",e),this.internalStorage.setItem("wrapper.version",n)}getWrapperMetadata(){return[this.internalStorage.getItem("wrapper.sku")||T.EMPTY_STRING,this.internalStorage.getItem("wrapper.version")||T.EMPTY_STRING]}setAuthorityMetadata(e,n){this.logger.trace("BrowserCacheManager.setAuthorityMetadata called"),this.internalStorage.setItem(e,JSON.stringify(n))}getActiveAccount(e){const n=this.generateCacheKey(ct.ACTIVE_ACCOUNT_FILTERS),r=this.getItem(n);if(!r){this.logger.trace("BrowserCacheManager.getActiveAccount: No active account filters cache schema found, looking for legacy schema");const i=this.generateCacheKey(ct.ACTIVE_ACCOUNT),s=this.getItem(i);if(!s)return this.logger.trace("BrowserCacheManager.getActiveAccount: No active account found"),null;const a=this.getAccountInfoFilteredBy({localAccountId:s},e);return a?(this.logger.trace("BrowserCacheManager.getActiveAccount: Legacy active account cache schema found"),this.logger.trace("BrowserCacheManager.getActiveAccount: Adding active account filters cache schema"),this.setActiveAccount(a,e),a):null}const o=this.validateAndParseJson(r);return o?(this.logger.trace("BrowserCacheManager.getActiveAccount: Active account filters schema found"),this.getAccountInfoFilteredBy({homeAccountId:o.homeAccountId,localAccountId:o.localAccountId,tenantId:o.tenantId},e)):(this.logger.trace("BrowserCacheManager.getActiveAccount: No active account found"),null)}setActiveAccount(e,n){const r=this.generateCacheKey(ct.ACTIVE_ACCOUNT_FILTERS),o=this.generateCacheKey(ct.ACTIVE_ACCOUNT);if(e){this.logger.verbose("setActiveAccount: Active account set");const i={homeAccountId:e.homeAccountId,localAccountId:e.localAccountId,tenantId:e.tenantId,lastUpdatedAt:Date.now().toString()};this.setItem(r,JSON.stringify(i),n),this.setItem(o,e.localAccountId,n)}else this.logger.verbose("setActiveAccount: No account passed, active account not set"),this.browserStorage.removeItem(r),this.browserStorage.removeItem(o)}getThrottlingCache(e){const n=this.getItem(e);if(!n)return this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null;const r=this.validateAndParseJson(n);return r&&function f9(t,e){let n=!1;t&&(n=0===t.indexOf("throttling"));let r=!0;return e&&(r=e.hasOwnProperty("throttleTime")),n&&r}(e,r)?(this.logger.trace("BrowserCacheManager.getThrottlingCache: cache hit"),r):(this.logger.trace("BrowserCacheManager.getThrottlingCache: called, no cache hit"),null)}setThrottlingCache(e,n,r){this.logger.trace("BrowserCacheManager.setThrottlingCache called"),this.setItem(e,JSON.stringify(n),r)}getTemporaryCache(e,n){const r=n?this.generateCacheKey(e):e;if(this.cacheConfig.storeAuthStateInCookie){const i=this.cookieStorage.getItem(r);if(i)return this.logger.trace("BrowserCacheManager.getTemporaryCache: storeAuthStateInCookies set to true, retrieving from cookies"),i}const o=this.temporaryCacheStorage.getItem(r);if(!o){if("localStorage"===this.cacheConfig.cacheLocation){const i=this.browserStorage.getItem(r);if(i)return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item found in local storage"),i}return this.logger.trace("BrowserCacheManager.getTemporaryCache: No cache item found in local storage"),null}return this.logger.trace("BrowserCacheManager.getTemporaryCache: Temporary cache item returned"),o}setTemporaryCache(e,n,r){const o=r?this.generateCacheKey(e):e;this.temporaryCacheStorage.setItem(o,n),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.setTemporaryCache: storeAuthStateInCookie set to true, setting item cookie"),this.cookieStorage.setItem(o,n,void 0,this.cacheConfig.secureCookies))}removeItem(e){this.browserStorage.removeItem(e)}removeTemporaryItem(e){this.temporaryCacheStorage.removeItem(e),this.cacheConfig.storeAuthStateInCookie&&(this.logger.trace("BrowserCacheManager.removeItem: storeAuthStateInCookie is true, clearing item cookie"),this.cookieStorage.removeItem(e))}getKeys(){return this.browserStorage.getKeys()}clear(e){var n=this;return y(function*(){yield n.removeAllAccounts(e),n.removeAppMetadata(e),n.temporaryCacheStorage.getKeys().forEach(r=>{(-1!==r.indexOf(T.CACHE_PREFIX)||-1!==r.indexOf(n.clientId))&&n.removeTemporaryItem(r)}),n.browserStorage.getKeys().forEach(r=>{(-1!==r.indexOf(T.CACHE_PREFIX)||-1!==r.indexOf(n.clientId))&&n.browserStorage.removeItem(r)}),n.internalStorage.clear()})()}clearTokensAndKeysWithClaims(e,n){var r=this;return y(function*(){e.addQueueMeasurement("clearTokensAndKeysWithClaims",n);const o=r.getTokenKeys();let i=0;o.accessToken.forEach(s=>{const a=r.getAccessTokenCredential(s,n);a?.requestedClaimsHash&&s.includes(a.requestedClaimsHash.toLowerCase())&&(r.removeAccessToken(s,n),i++)}),i>0&&r.logger.warning(`${i} access tokens with claims in the cache keys have been removed from the cache.`)})()}generateCacheKey(e){return this.validateAndParseJson(e)?JSON.stringify(e):xn.startsWith(e,T.CACHE_PREFIX)||xn.startsWith(e,ct.ADAL_ID_TOKEN)?e:`${T.CACHE_PREFIX}.${this.clientId}.${e}`}generateAuthorityKey(e){const{libraryState:{id:n}}=Un.parseRequestState(this.cryptoImpl,e);return this.generateCacheKey(`authority.${n}`)}generateNonceKey(e){const{libraryState:{id:n}}=Un.parseRequestState(this.cryptoImpl,e);return this.generateCacheKey(`nonce.id_token.${n}`)}generateStateKey(e){const{libraryState:{id:n}}=Un.parseRequestState(this.cryptoImpl,e);return this.generateCacheKey(`request.state.${n}`)}getCachedAuthority(e){const n=this.generateStateKey(e),r=this.getTemporaryCache(n);if(!r)return null;const o=this.generateAuthorityKey(r);return this.getTemporaryCache(o)}updateCacheEntries(e,n,r,o,i){this.logger.trace("BrowserCacheManager.updateCacheEntries called");const s=this.generateStateKey(e);this.setTemporaryCache(s,e,!1);const a=this.generateNonceKey(e);this.setTemporaryCache(a,n,!1);const c=this.generateAuthorityKey(e);this.setTemporaryCache(c,r,!1),i?this.setTemporaryCache("ccs.credential",JSON.stringify({credential:i.homeAccountId,type:"home_account_id"}),!0):o&&this.setTemporaryCache("ccs.credential",JSON.stringify({credential:o,type:"UPN"}),!0)}resetRequestCache(e){this.logger.trace("BrowserCacheManager.resetRequestCache called"),e&&(this.temporaryCacheStorage.getKeys().forEach(n=>{-1!==n.indexOf(e)&&this.removeTemporaryItem(n)}),this.removeTemporaryItem(this.generateStateKey(e)),this.removeTemporaryItem(this.generateNonceKey(e)),this.removeTemporaryItem(this.generateAuthorityKey(e))),this.removeTemporaryItem(this.generateCacheKey("request.params")),this.removeTemporaryItem(this.generateCacheKey("request.origin")),this.removeTemporaryItem(this.generateCacheKey("urlHash")),this.removeTemporaryItem(this.generateCacheKey("request.correlationId")),this.removeTemporaryItem(this.generateCacheKey("ccs.credential")),this.removeTemporaryItem(this.generateCacheKey("request.native")),this.setInteractionInProgress(!1)}cleanRequestByState(e){if(this.logger.trace("BrowserCacheManager.cleanRequestByState called"),e){const n=this.generateStateKey(e),r=this.temporaryCacheStorage.getItem(n);this.logger.infoPii(`BrowserCacheManager.cleanRequestByState: Removing temporary cache items for state: ${r}`),this.resetRequestCache(r||T.EMPTY_STRING)}}cleanRequestByInteractionType(e){this.logger.trace("BrowserCacheManager.cleanRequestByInteractionType called"),this.temporaryCacheStorage.getKeys().forEach(n=>{if(-1===n.indexOf("request.state"))return;const r=this.temporaryCacheStorage.getItem(n);if(!r)return;const o=fx(this.cryptoImpl,r);o&&o.interactionType===e&&(this.logger.infoPii(`BrowserCacheManager.cleanRequestByInteractionType: Removing temporary cache items for state: ${r}`),this.resetRequestCache(r))}),this.setInteractionInProgress(!1)}cacheCodeRequest(e){this.logger.trace("BrowserCacheManager.cacheCodeRequest called");const n=hE(JSON.stringify(e));this.setTemporaryCache("request.params",n,!0)}getCachedRequest(e){this.logger.trace("BrowserCacheManager.getCachedRequest called");const n=this.getTemporaryCache("request.params",!0);if(!n)throw O(mp);let r;try{r=JSON.parse(tr(n))}catch(o){throw this.logger.errorPii(`Attempted to parse: ${n}`),this.logger.error(`Parsing cached token request threw with error: ${o}`),O(yp)}if(this.removeTemporaryItem(this.generateCacheKey("request.params")),!r.authority){const o=this.generateAuthorityKey(e),i=this.getTemporaryCache(o);if(!i)throw O(wu);r.authority=i}return r}getCachedNativeRequest(){this.logger.trace("BrowserCacheManager.getCachedNativeRequest called");const e=this.getTemporaryCache("request.native",!0);return e?this.validateAndParseJson(e)||(this.logger.error("BrowserCacheManager.getCachedNativeRequest: Unable to parse native request"),null):(this.logger.trace("BrowserCacheManager.getCachedNativeRequest: No cached native request found"),null)}isInteractionInProgress(e){const n=this.getInteractionInProgress();return e?n===this.clientId:!!n}getInteractionInProgress(){return this.getTemporaryCache(`${T.CACHE_PREFIX}.interaction.status`,!1)}setInteractionInProgress(e){const n=`${T.CACHE_PREFIX}.interaction.status`;if(e){if(this.getInteractionInProgress())throw O(cp);this.setTemporaryCache(n,this.clientId,!1)}else!e&&this.getInteractionInProgress()===this.clientId&&this.removeTemporaryItem(n)}getLegacyLoginHint(){const e=this.getTemporaryCache(ct.ADAL_ID_TOKEN);e&&(this.browserStorage.removeItem(ct.ADAL_ID_TOKEN),this.logger.verbose("Cached ADAL id token retrieved."));const n=this.getTemporaryCache(ct.ID_TOKEN,!0);n&&(this.browserStorage.removeItem(this.generateCacheKey(ct.ID_TOKEN)),this.logger.verbose("Cached MSAL.js v1 id token retrieved"));const r=n||e;if(r){const o=li(r,tr);if(o.preferred_username)return this.logger.verbose("No SSO params used and ADAL/MSAL v1 token retrieved, setting ADAL/MSAL v1 preferred_username as loginHint"),o.preferred_username;if(o.upn)return this.logger.verbose("No SSO params used and ADAL/MSAL v1 token retrieved, setting ADAL/MSAL v1 upn as loginHint"),o.upn;this.logger.verbose("No SSO params used and ADAL/MSAL v1 token retrieved, however, no account hint claim found. Enable preferred_username or upn id token claim to get SSO.")}return null}updateCredentialCacheKey(e,n,r){const o=Bs(n);if(e!==o){const i=this.getItem(e);if(i)return this.browserStorage.removeItem(e),this.setItem(o,i,r),this.logger.verbose(`Updated an outdated ${n.credentialType} cache key`),o;this.logger.error(`Attempted to update an outdated ${n.credentialType} cache key but no item matching the outdated key was found in storage`)}return e}hydrateCache(e,n){var r=this;return y(function*(){const o=Ph(e.account?.homeAccountId,e.account?.environment,e.idToken,r.clientId,e.tenantId);let i;n.claims&&(i=yield r.cryptoImpl.hashString(n.claims));const s=xh(e.account?.homeAccountId,e.account.environment,e.accessToken,r.clientId,e.tenantId,e.scopes.join(" "),e.expiresOn?e.expiresOn.getTime()/1e3:0,e.extExpiresOn?e.extExpiresOn.getTime()/1e3:0,tr,void 0,e.tokenType,void 0,n.sshKid,n.claims,i);return r.saveCacheRecord({idToken:o,accessToken:s},e.correlationId)})()}saveCacheRecord(e,n,r){var o=()=>super.saveCacheRecord,i=this;return y(function*(){try{yield o().call(i,e,n,r)}catch(s){if(s instanceof $s&&i.performanceClient&&n)try{const a=i.getTokenKeys();i.performanceClient.addFields({cacheRtCount:a.refreshToken.length,cacheIdCount:a.idToken.length,cacheAtCount:a.accessToken.length},n)}catch{}throw s}})()}}class O7{constructor(e){this.eventCallbacks=new Map,this.logger=e||new lo({})}addEventCallback(e,n,r){if(typeof window<"u"){const o=r||function X9(){return er()}();return this.eventCallbacks.has(o)?(this.logger.error(`Event callback with id: ${o} is already registered. Please provide a unique id or remove the existing callback and try again.`),null):(this.eventCallbacks.set(o,[e,n||[]]),this.logger.verbose(`Event callback registered with id: ${o}`),o)}return null}removeEventCallback(e){this.eventCallbacks.delete(e),this.logger.verbose(`Event callback ${e} removed.`)}emitEvent(e,n,r,o){if(typeof window<"u"){const i={eventType:e,interactionType:n||null,payload:r||null,error:o||null,timestamp:Date.now()};this.eventCallbacks.forEach(([s,a],c)=>{(0===a.length||a.includes(e))&&(this.logger.verbose(`Emitting event to callback ${c}: ${e}`),s.apply(null,[i]))})}}}class po extends Ne{constructor(e,n,r,o,i){super(e,n,r),this.name="ServerError",this.errorNo=o,this.status=i,Object.setPrototypeOf(this,po.prototype)}}class nr{static generateThrottlingStorageKey(e){return`throttling.${JSON.stringify(e)}`}static preProcess(e,n,r){const o=nr.generateThrottlingStorageKey(n),i=e.getThrottlingCache(o);if(i){if(i.throttleTime<Date.now())return void e.removeItem(o,r);throw new po(i.errorCodes?.join(" ")||T.EMPTY_STRING,i.errorMessage,i.subError)}}static postProcess(e,n,r,o){if(nr.checkResponseStatus(r)||nr.checkResponseForRetryAfter(r)){const i={throttleTime:nr.calculateThrottleTime(parseInt(r.headers["Retry-After"])),error:r.body.error,errorCodes:r.body.error_codes,errorMessage:r.body.error_description,subError:r.body.suberror};e.setThrottlingCache(nr.generateThrottlingStorageKey(n),i,o)}}static checkResponseStatus(e){return 429===e.status||e.status>=500&&e.status<600}static checkResponseForRetryAfter(e){return!!e.headers&&e.headers.hasOwnProperty("Retry-After")&&(e.status<200||e.status>=300)}static calculateThrottleTime(e){const n=e<=0?0:e,r=Date.now()/1e3;return Math.floor(1e3*Math.min(r+(n||60),r+3600))}static removeThrottle(e,n,r,o){const s=this.generateThrottlingStorageKey({clientId:n,authority:r.authority,scopes:r.scopes,homeAccountIdentifier:o,claims:r.claims,authenticationScheme:r.authenticationScheme,resourceRequestMethod:r.resourceRequestMethod,resourceRequestUri:r.resourceRequestUri,shrClaims:r.shrClaims,sshKid:r.sshKid});e.removeItem(s,r.correlationId)}}const gi="client_id",hx="redirect_uri",px="response_type",gx="token_type",mx="req_cnf",yx="return_spa_code",gJ="x-client-xtra-sku",FE="brk_client_id",LE="brk_redirect_uri";class Xs{static validateRedirectUri(e){if(!e)throw we(Lh)}static validatePrompt(e){const n=[];for(const r in ut)n.push(ut[r]);if(n.indexOf(e)<0)throw we(Vh)}static validateClaims(e){try{JSON.parse(e)}catch{throw we(_u)}}static validateCodeChallengeParams(e,n){if(!e||!n)throw we(vu);this.validateCodeChallengeMethod(n)}static validateCodeChallengeMethod(e){if([_0.PLAIN,_0.S256].indexOf(e)<0)throw we(Gh)}}class Ru{constructor(e,n){this.parameters=new Map,this.performanceClient=n,this.correlationId=e}addResponseTypeCode(){this.parameters.set(px,encodeURIComponent(T.CODE_RESPONSE_TYPE))}addResponseTypeForTokenAndIdToken(){this.parameters.set(px,encodeURIComponent(`${T.TOKEN_RESPONSE_TYPE} ${T.ID_TOKEN_RESPONSE_TYPE}`))}addResponseMode(e){this.parameters.set("response_mode",encodeURIComponent(e||e9.QUERY))}addNativeBroker(){this.parameters.set("nativebroker",encodeURIComponent("1"))}addScopes(e,n=!0,r=Ls){n&&!r.includes("openid")&&!e.includes("openid")&&r.push("openid");const o=n?[...e||[],...r]:e||[],i=new We(o);this.parameters.set("scope",encodeURIComponent(i.printScopes()))}addClientId(e){this.parameters.set(gi,encodeURIComponent(e))}addRedirectUri(e){Xs.validateRedirectUri(e),this.parameters.set(hx,encodeURIComponent(e))}addPostLogoutRedirectUri(e){Xs.validateRedirectUri(e),this.parameters.set("post_logout_redirect_uri",encodeURIComponent(e))}addIdTokenHint(e){this.parameters.set("id_token_hint",encodeURIComponent(e))}addDomainHint(e){this.parameters.set("domain_hint",encodeURIComponent(e))}addLoginHint(e){this.parameters.set("login_hint",encodeURIComponent(e))}addCcsUpn(e){this.parameters.set("X-AnchorMailbox",encodeURIComponent(`UPN:${e}`))}addCcsOid(e){this.parameters.set("X-AnchorMailbox",encodeURIComponent(`Oid:${e.uid}@${e.utid}`))}addSid(e){this.parameters.set("sid",encodeURIComponent(e))}addClaims(e,n){const r=this.addClientCapabilitiesToClaims(e,n);Xs.validateClaims(r),this.parameters.set("claims",encodeURIComponent(r))}addCorrelationId(e){this.parameters.set("client-request-id",encodeURIComponent(e))}addLibraryInfo(e){this.parameters.set("x-client-SKU",e.sku),this.parameters.set("x-client-VER",e.version),e.os&&this.parameters.set("x-client-OS",e.os),e.cpu&&this.parameters.set("x-client-CPU",e.cpu)}addApplicationTelemetry(e){e?.appName&&this.parameters.set("x-app-name",e.appName),e?.appVersion&&this.parameters.set("x-app-ver",e.appVersion)}addPrompt(e){Xs.validatePrompt(e),this.parameters.set("prompt",encodeURIComponent(e))}addState(e){e&&this.parameters.set("state",encodeURIComponent(e))}addNonce(e){this.parameters.set("nonce",encodeURIComponent(e))}addCodeChallengeParams(e,n){if(Xs.validateCodeChallengeParams(e,n),!e||!n)throw we(vu);this.parameters.set("code_challenge",encodeURIComponent(e)),this.parameters.set("code_challenge_method",encodeURIComponent(n))}addAuthorizationCode(e){this.parameters.set("code",encodeURIComponent(e))}addDeviceCode(e){this.parameters.set("device_code",encodeURIComponent(e))}addRefreshToken(e){this.parameters.set("refresh_token",encodeURIComponent(e))}addCodeVerifier(e){this.parameters.set("code_verifier",encodeURIComponent(e))}addClientSecret(e){this.parameters.set("client_secret",encodeURIComponent(e))}addClientAssertion(e){e&&this.parameters.set("client_assertion",encodeURIComponent(e))}addClientAssertionType(e){e&&this.parameters.set("client_assertion_type",encodeURIComponent(e))}addOboAssertion(e){this.parameters.set("assertion",encodeURIComponent(e))}addRequestTokenUse(e){this.parameters.set("requested_token_use",encodeURIComponent(e))}addGrantType(e){this.parameters.set("grant_type",encodeURIComponent(e))}addClientInfo(){this.parameters.set("client_info","1")}addExtraQueryParameters(e){Object.entries(e).forEach(([n,r])=>{!this.parameters.has(n)&&r&&this.parameters.set(n,r)})}addClientCapabilitiesToClaims(e,n){let r;if(e)try{r=JSON.parse(e)}catch{throw we(_u)}else r={};return n&&n.length>0&&(r.hasOwnProperty("access_token")||(r.access_token={}),r.access_token.xms_cc={values:n}),JSON.stringify(r)}addUsername(e){this.parameters.set("username",encodeURIComponent(e))}addPassword(e){this.parameters.set("password",encodeURIComponent(e))}addPopToken(e){e&&(this.parameters.set(gx,ve.POP),this.parameters.set(mx,encodeURIComponent(e)))}addSshJwk(e){e&&(this.parameters.set(gx,ve.SSH),this.parameters.set(mx,encodeURIComponent(e)))}addServerTelemetry(e){this.parameters.set("x-client-current-telemetry",e.generateCurrentRequestHeaderValue()),this.parameters.set("x-client-last-telemetry",e.generateLastRequestHeaderValue())}addThrottling(){this.parameters.set("x-ms-lib-capability","retry-after, h429")}addLogoutHint(e){this.parameters.set("logout_hint",encodeURIComponent(e))}addBrokerParameters(e){const n={};n[FE]=e.brokerClientId,n[LE]=e.brokerRedirectUri,this.addExtraQueryParameters(n)}createQueryString(){const e=new Array;return this.parameters.forEach((n,r)=>{e.push(`${r}=${n}`)}),function mJ(t,e,n){if(!e)return;const r=t.get(gi);r&&t.has(FE)&&n?.addFields({embeddedClientId:r,embeddedRedirectUri:t.get(hx)},e)}(this.parameters,this.correlationId,this.performanceClient),e.join("&")}}function _x(t,e,n,r,o,i,s){return UE.apply(this,arguments)}function UE(){return(UE=y(function*(t,e,n,r,o,i,s){s?.addQueueMeasurement("authorityFactoryCreateDiscoveredInstance",i);const a=Tt.transformCIAMAuthority(ux(t)),c=new Tt(a,e,n,r,o,i,s);try{return yield k(c.resolveEndpointsAsync.bind(c),"authorityResolveEndpointsAsync",o,s,i)(),c}catch{throw b(On)}})).apply(this,arguments)}class HE{constructor(e,n){this.config=function S9({authOptions:t,systemOptions:e,loggerOptions:n,cacheOptions:r,storageInterface:o,networkInterface:i,cryptoInterface:s,clientCredentials:a,libraryInfo:c,telemetry:u,serverTelemetryManager:l,persistencePlugin:d,serializableCache:f}){const h={...v9,...n};return{authOptions:A9(t),systemOptions:{...U0,...e},loggerOptions:h,cacheOptions:{...C9,...r},storageInterface:o||new _9(t.clientId,Oh,new lo(h)),networkInterface:i||E9,cryptoInterface:s||Oh,clientCredentials:a||T9,libraryInfo:{...I9,...c},telemetry:{...D9,...u},serverTelemetryManager:l||null,persistencePlugin:d||null,serializableCache:f||null}}(e),this.logger=new lo(this.config.loggerOptions,T0,qC),this.cryptoUtils=this.config.cryptoInterface,this.cacheManager=this.config.storageInterface,this.networkClient=this.config.networkInterface,this.serverTelemetryManager=this.config.serverTelemetryManager,this.authority=this.config.authOptions.authority,this.performanceClient=n}createTokenRequestHeaders(e){const n={};if(n["Content-Type"]=T.URL_FORM_CONTENT_TYPE,!this.config.systemOptions.preventCorsPreflight&&e)switch(e.type){case"home_account_id":try{const r=js(e.credential);n["X-AnchorMailbox"]=`Oid:${r.uid}@${r.utid}`}catch(r){this.logger.verbose("Could not parse home account ID for CCS Header: "+r)}break;case"UPN":n["X-AnchorMailbox"]=`UPN: ${e.credential}`}return n}executePostToTokenEndpoint(e,n,r,o,i,s){var a=this;return y(function*(){s&&a.performanceClient?.addQueueMeasurement(s,i);const c=yield a.sendPostRequest(o,e,{body:n,headers:r},i);return a.config.serverTelemetryManager&&c.status<500&&429!==c.status&&a.config.serverTelemetryManager.clearTelemetryCache(),c})()}sendPostRequest(e,n,r,o){var i=this;return y(function*(){let s;nr.preProcess(i.cacheManager,e,o);try{s=yield k(i.networkClient.sendPostRequestAsync.bind(i.networkClient),"networkClientSendPostRequestAsync",i.logger,i.performanceClient,o)(n,r);const a=s.headers||{};i.performanceClient?.addFields({refreshTokenSize:s.body.refresh_token?.length||0,httpVerToken:a["x-ms-httpver"]||"",requestId:a["x-ms-request-id"]||""},o)}catch(a){if(a instanceof rp){const c=a.responseHeaders;throw c&&i.performanceClient?.addFields({httpVerToken:c["x-ms-httpver"]||"",requestId:c["x-ms-request-id"]||"",contentTypeHeader:c["Content-Type"]||void 0,contentLengthHeader:c["Content-Length"]||void 0,httpStatus:a.httpStatus},o),a.error}throw a instanceof Ne?a:b(_h)}return nr.postProcess(i.cacheManager,e,s,o),s})()}updateAuthority(e,n){var r=this;return y(function*(){r.performanceClient?.addQueueMeasurement("updateTokenEndpointAuthority",n);const o=`https://${e}/${r.authority.tenant}/`,i=yield _x(o,r.networkClient,r.cacheManager,r.authority.options,r.logger,n,r.performanceClient);r.authority=i})()}createTokenQueryParameters(e){const n=new Ru(e.correlationId,this.performanceClient);return e.embeddedClientId&&n.addBrokerParameters({brokerClientId:this.config.authOptions.clientId,brokerRedirectUri:this.config.authOptions.redirectUri}),e.tokenQueryParameters&&n.addExtraQueryParameters(e.tokenQueryParameters),n.addCorrelationId(e.correlationId),n.createQueryString()}}class ea{constructor(e,n){this.cryptoUtils=e,this.performanceClient=n}generateCnf(e,n){var r=this;return y(function*(){r.performanceClient?.addQueueMeasurement("popTokenGenerateCnf",e.correlationId);const o=yield k(r.generateKid.bind(r),"popTokenGenerateCnf",n,r.performanceClient,e.correlationId)(e),i=r.cryptoUtils.base64UrlEncode(JSON.stringify(o));return{kid:o.kid,reqCnfString:i}})()}generateKid(e){var n=this;return y(function*(){return n.performanceClient?.addQueueMeasurement("popTokenGenerateKid",e.correlationId),{kid:yield n.cryptoUtils.getPublicKeyThumbprint(e),xms_ksl:"sw"}})()}signPopToken(e,n,r){var o=this;return y(function*(){return o.signPayload(e,n,r)})()}signPayload(e,n,r,o){var i=this;return y(function*(){const{resourceRequestMethod:s,resourceRequestUri:a,shrClaims:c,shrNonce:u,shrOptions:l}=r,f=(a?new se(a):void 0)?.getUrlComponents();return i.cryptoUtils.signJwt({at:e,ts:Xn(),m:s?.toUpperCase(),u:f?.HostNameAndPort,nonce:u||i.cryptoUtils.createNewGuid(),p:f?.AbsolutePath,q:f?.QueryString?[[],f.QueryString]:void 0,client_claims:c||void 0,...o},n,l,r.correlationId)})()}}class _J{constructor(e,n){this.cache=e,this.hasChanged=n}get cacheHasChanged(){return this.hasChanged}get tokenCache(){return this.cache}}class mi{constructor(e,n,r,o,i,s,a){this.clientId=e,this.cacheStorage=n,this.cryptoObj=r,this.logger=o,this.serializableCache=i,this.persistencePlugin=s,this.performanceClient=a}validateServerAuthorizationCodeResponse(e,n){if(!e.state||!n)throw b(Hs,e.state?"Cached State":"Server State");let r,o;try{r=decodeURIComponent(e.state)}catch{throw b(fo,e.state)}try{o=decodeURIComponent(n)}catch{throw b(fo,e.state)}if(r!==o)throw b(Eh);if(e.error||e.error_description||e.suberror){const i=function vJ(t){const n=t.error_uri?.lastIndexOf("code=");return n&&n>=0?t.error_uri?.substring(n+5):void 0}(e);throw dx(e.error,e.error_description,e.suberror)?new Ln(e.error||"",e.error_description,e.suberror,e.timestamp||"",e.trace_id||"",e.correlation_id||"",e.claims||"",i):new po(e.error||"",e.error_description,e.suberror,i)}}validateTokenResponse(e,n){if(e.error||e.error_description||e.suberror){const r=`Error(s): ${e.error_codes||T.NOT_AVAILABLE} - Timestamp: ${e.timestamp||T.NOT_AVAILABLE} - Description: ${e.error_description||T.NOT_AVAILABLE} - Correlation ID: ${e.correlation_id||T.NOT_AVAILABLE} - Trace ID: ${e.trace_id||T.NOT_AVAILABLE}`,o=e.error_codes?.length?e.error_codes[0]:void 0,i=new po(e.error,r,e.suberror,o,e.status);if(n&&e.status&&e.status>=500&&e.status<=599)return void this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently unavailable and the access token is unable to be refreshed.\n${i}`);if(n&&e.status&&e.status>=400&&e.status<=499)return void this.logger.warning(`executeTokenRequest:validateTokenResponse - AAD is currently available but is unable to refresh the access token.\n${i}`);throw dx(e.error,e.error_description,e.suberror)?new Ln(e.error,e.error_description,e.suberror,e.timestamp||T.EMPTY_STRING,e.trace_id||T.EMPTY_STRING,e.correlation_id||T.EMPTY_STRING,e.claims||T.EMPTY_STRING,o):i}}handleServerTokenResponse(e,n,r,o,i,s,a,c,u){var l=this;return y(function*(){let d,f;if(l.performanceClient?.addQueueMeasurement("handleServerTokenResponse",e.correlation_id),e.id_token){if(d=li(e.id_token||T.EMPTY_STRING,l.cryptoObj.base64Decode),i&&i.nonce&&d.nonce!==i.nonce)throw b(Ih);if(o.maxAge||0===o.maxAge){const m=d.auth_time;if(!m)throw b(lu);w0(m,o.maxAge)}}l.homeAccountIdentifier=rt.generateHomeAccountId(e.client_info||T.EMPTY_STRING,n.authorityType,l.logger,l.cryptoObj,d),i&&i.state&&(f=Un.parseRequestState(l.cryptoObj,i.state)),e.key_id=e.key_id||o.sshKid||void 0;const h=l.generateCacheRecord(e,n,r,o,d,s,i);let p;try{if(l.persistencePlugin&&l.serializableCache&&(l.logger.verbose("Persistence enabled, calling beforeCacheAccess"),p=new _J(l.serializableCache,!0),yield l.persistencePlugin.beforeCacheAccess(p)),a&&!c&&h.account){const m=h.account.generateAccountKey();if(!l.cacheStorage.getAccount(m,o.correlationId,l.logger))return l.logger.warning("Account used to refresh tokens not in persistence, refreshed tokens will not be stored in the cache"),yield mi.generateAuthenticationResult(l.cryptoObj,n,h,!1,o,d,f,void 0,u)}yield l.cacheStorage.saveCacheRecord(h,o.correlationId,o.storeInCache)}finally{l.persistencePlugin&&l.serializableCache&&p&&(l.logger.verbose("Persistence enabled, calling afterCacheAccess"),yield l.persistencePlugin.afterCacheAccess(p))}return mi.generateAuthenticationResult(l.cryptoObj,n,h,!1,o,d,f,e,u)})()}generateCacheRecord(e,n,r,o,i,s,a){const c=n.getPreferredCache();if(!c)throw b(hu);const u=M0(i);let l,d;e.id_token&&i&&(l=Ph(this.homeAccountIdentifier,c,e.id_token,this.clientId,u||""),d=BE(this.cacheStorage,n,this.homeAccountIdentifier,this.cryptoObj.base64Decode,o.correlationId,i,e.client_info,c,u,a,void 0,this.logger));let f=null;if(e.access_token){const m=e.scope?We.fromString(e.scope):new We(o.scopes||[]),_=("string"==typeof e.expires_in?parseInt(e.expires_in,10):e.expires_in)||0,C=("string"==typeof e.ext_expires_in?parseInt(e.ext_expires_in,10):e.ext_expires_in)||0,v=("string"==typeof e.refresh_in?parseInt(e.refresh_in,10):e.refresh_in)||void 0,N=r+_,x=N+C,H=v&&v>0?r+v:void 0;f=xh(this.homeAccountIdentifier,c,e.access_token,this.clientId,u||n.tenant||"",m.printScopes(),N,x,this.cryptoObj.base64Decode,H,e.token_type,s,e.key_id,o.claims,o.requestedClaimsHash)}let h=null;if(e.refresh_token){let m;e.refresh_token_expires_in&&(m=r+("string"==typeof e.refresh_token_expires_in?parseInt(e.refresh_token_expires_in,10):e.refresh_token_expires_in)),h=D0(this.homeAccountIdentifier,c,e.refresh_token,this.clientId,e.foci,s,m)}let p=null;return e.foci&&(p={clientId:this.clientId,environment:c,familyId:e.foci}),{account:d,idToken:l,accessToken:f,refreshToken:h,appMetadata:p}}static generateAuthenticationResult(e,n,r,o,i,s,a,c,u){return y(function*(){let h,p,l=T.EMPTY_STRING,d=[],f=null,m=T.EMPTY_STRING;if(r.accessToken){if(r.accessToken.tokenType!==ve.POP||i.popKid)l=r.accessToken.secret;else{const N=new ea(e),{secret:x,keyId:H}=r.accessToken;if(!H)throw b(yu);l=yield N.signPopToken(x,H,i)}d=We.fromString(r.accessToken.target).asArray(),f=new Date(1e3*Number(r.accessToken.expiresOn)),h=new Date(1e3*Number(r.accessToken.extendedExpiresOn)),r.accessToken.refreshOn&&(p=new Date(1e3*Number(r.accessToken.refreshOn)))}r.appMetadata&&(m="1"===r.appMetadata.familyId?"1":"");const _=s?.oid||s?.sub||"",C=s?.tid||"";c?.spa_accountid&&r.account&&(r.account.nativeAccountId=c?.spa_accountid);const v=r.account?tE(r.account.getAccountInfo(),void 0,s,r.idToken?.secret):null;return{authority:n.canonicalAuthority,uniqueId:_,tenantId:C,scopes:d,account:v,idToken:r?.idToken?.secret||"",idTokenClaims:s||{},accessToken:l,fromCache:o,expiresOn:f,extExpiresOn:h,refreshOn:p,correlationId:i.correlationId,requestId:u||T.EMPTY_STRING,familyId:m,tokenType:r.accessToken?.tokenType||T.EMPTY_STRING,state:a?a.userRequestState:T.EMPTY_STRING,cloudGraphHostName:r.account?.cloudGraphHostName||T.EMPTY_STRING,msGraphHost:r.account?.msGraphHost||T.EMPTY_STRING,code:c?.spa_code,fromNativeBroker:!1}})()}}function BE(t,e,n,r,o,i,s,a,c,u,l,d){d?.verbose("setCachedAccount called");const h=t.getAccountKeys().find(v=>v.startsWith(n));let p=null;h&&(p=t.getAccount(h,o,d));const m=p||rt.createAccount({homeAccountId:n,idTokenClaims:i,clientInfo:s,environment:a,cloudGraphHostName:u?.cloud_graph_host_name,msGraphHost:u?.msgraph_host,nativeAccountId:l},e,r),_=m.tenantProfiles||[],C=c||m.realm;if(C&&!_.find(v=>v.tenantId===C)){const v=eE(n,m.localAccountId,C,i);_.push(v)}return m.tenantProfiles=_,m}function vx(t,e,n){return VE.apply(this,arguments)}function VE(){return(VE=y(function*(t,e,n){return"string"==typeof t?t:t({clientId:e,tokenEndpoint:n})})).apply(this,arguments)}class Cx extends HE{constructor(e,n){super(e,n),this.includeRedirectUri=!0,this.oidcDefaultScopes=this.config.authOptions.authority.options.OIDCOptions?.defaultScopes}getAuthCodeUrl(e){var n=this;return y(function*(){n.performanceClient?.addQueueMeasurement("getAuthCodeUrl",e.correlationId);const r=yield k(n.createAuthCodeUrlQueryString.bind(n),"authClientCreateQueryString",n.logger,n.performanceClient,e.correlationId)(e);return se.appendQueryString(n.authority.authorizationEndpoint,r)})()}acquireToken(e,n){var r=this;return y(function*(){if(r.performanceClient?.addQueueMeasurement("authClientAcquireToken",e.correlationId),!e.code)throw b(Dh);const o=Xn(),i=yield k(r.executeTokenRequest.bind(r),"authClientExecuteTokenRequest",r.logger,r.performanceClient,e.correlationId)(r.authority,e),s=i.headers?.["x-ms-request-id"],a=new mi(r.config.authOptions.clientId,r.cacheManager,r.cryptoUtils,r.logger,r.config.serializableCache,r.config.persistencePlugin,r.performanceClient);return a.validateTokenResponse(i.body),k(a.handleServerTokenResponse.bind(a),"handleServerTokenResponse",r.logger,r.performanceClient,e.correlationId)(i.body,r.authority,o,e,n,void 0,void 0,void 0,s)})()}handleFragmentResponse(e,n){if(new mi(this.config.authOptions.clientId,this.cacheManager,this.cryptoUtils,this.logger,null,null).validateServerAuthorizationCodeResponse(e,n),!e.code)throw b(Rh);return e}getLogoutUri(e){if(!e)throw we($h);const n=this.createLogoutUrlQueryString(e);return se.appendQueryString(this.authority.endSessionEndpoint,n)}executeTokenRequest(e,n){var r=this;return y(function*(){r.performanceClient?.addQueueMeasurement("authClientExecuteTokenRequest",n.correlationId);const o=r.createTokenQueryParameters(n),i=se.appendQueryString(e.tokenEndpoint,o),s=yield k(r.createTokenRequestBody.bind(r),"authClientCreateTokenRequestBody",r.logger,r.performanceClient,n.correlationId)(n);let a;if(n.clientInfo)try{const l=Jh(n.clientInfo,r.cryptoUtils.base64Decode);a={credential:`${l.uid}.${l.utid}`,type:"home_account_id"}}catch(l){r.logger.verbose("Could not parse client info for CCS Header: "+l)}const c=r.createTokenRequestHeaders(a||n.ccsCredential),u={clientId:n.tokenBodyParameters?.clientId||r.config.authOptions.clientId,authority:e.canonicalAuthority,scopes:n.scopes,claims:n.claims,authenticationScheme:n.authenticationScheme,resourceRequestMethod:n.resourceRequestMethod,resourceRequestUri:n.resourceRequestUri,shrClaims:n.shrClaims,sshKid:n.sshKid};return k(r.executePostToTokenEndpoint.bind(r),"authorizationCodeClientExecutePostToTokenEndpoint",r.logger,r.performanceClient,n.correlationId)(i,s,c,u,n.correlationId,"authorizationCodeClientExecutePostToTokenEndpoint")})()}createTokenRequestBody(e){var n=this;return y(function*(){n.performanceClient?.addQueueMeasurement("authClientCreateTokenRequestBody",e.correlationId);const r=new Ru(e.correlationId,n.performanceClient);if(r.addClientId(e.embeddedClientId||e.tokenBodyParameters?.[gi]||n.config.authOptions.clientId),n.includeRedirectUri?r.addRedirectUri(e.redirectUri):Xs.validateRedirectUri(e.redirectUri),r.addScopes(e.scopes,!0,n.oidcDefaultScopes),r.addAuthorizationCode(e.code),r.addLibraryInfo(n.config.libraryInfo),r.addApplicationTelemetry(n.config.telemetry.application),r.addThrottling(),n.serverTelemetryManager&&!sE(n.config)&&r.addServerTelemetry(n.serverTelemetryManager),e.codeVerifier&&r.addCodeVerifier(e.codeVerifier),n.config.clientCredentials.clientSecret&&r.addClientSecret(n.config.clientCredentials.clientSecret),n.config.clientCredentials.clientAssertion){const i=n.config.clientCredentials.clientAssertion;r.addClientAssertion(yield vx(i.assertion,n.config.authOptions.clientId,e.resourceRequestUri)),r.addClientAssertionType(i.assertionType)}if(r.addGrantType("authorization_code"),r.addClientInfo(),e.authenticationScheme===ve.POP){const i=new ea(n.cryptoUtils,n.performanceClient);let s;s=e.popKid?n.cryptoUtils.encodeKid(e.popKid):(yield k(i.generateCnf.bind(i),"popTokenGenerateCnf",n.logger,n.performanceClient,e.correlationId)(e,n.logger)).reqCnfString,r.addPopToken(s)}else if(e.authenticationScheme===ve.SSH){if(!e.sshJwk)throw we(Vs);r.addSshJwk(e.sshJwk)}let o;if((!xn.isEmptyObj(e.claims)||n.config.authOptions.clientCapabilities&&n.config.authOptions.clientCapabilities.length>0)&&r.addClaims(e.claims,n.config.authOptions.clientCapabilities),e.clientInfo)try{const i=Jh(e.clientInfo,n.cryptoUtils.base64Decode);o={credential:`${i.uid}.${i.utid}`,type:"home_account_id"}}catch(i){n.logger.verbose("Could not parse client info for CCS Header: "+i)}else o=e.ccsCredential;if(n.config.systemOptions.preventCorsPreflight&&o)switch(o.type){case"home_account_id":try{const i=js(o.credential);r.addCcsOid(i)}catch(i){n.logger.verbose("Could not parse home account ID for CCS Header: "+i)}break;case"UPN":r.addCcsUpn(o.credential)}return e.embeddedClientId&&r.addBrokerParameters({brokerClientId:n.config.authOptions.clientId,brokerRedirectUri:n.config.authOptions.redirectUri}),e.tokenBodyParameters&&r.addExtraQueryParameters(e.tokenBodyParameters),e.enableSpaAuthorizationCode&&(!e.tokenBodyParameters||!e.tokenBodyParameters[yx])&&r.addExtraQueryParameters({[yx]:"1"}),r.createQueryString()})()}createAuthCodeUrlQueryString(e){var n=this;return y(function*(){const r=e.correlationId||n.config.cryptoInterface.createNewGuid();n.performanceClient?.addQueueMeasurement("authClientCreateQueryString",r);const o=new Ru(r,n.performanceClient);o.addClientId(e.embeddedClientId||e.extraQueryParameters?.[gi]||n.config.authOptions.clientId);const i=[...e.scopes||[],...e.extraScopesToConsent||[]];if(o.addScopes(i,!0,n.oidcDefaultScopes),o.addRedirectUri(e.redirectUri),o.addCorrelationId(r),o.addResponseMode(e.responseMode),o.addResponseTypeCode(),o.addLibraryInfo(n.config.libraryInfo),sE(n.config)||o.addApplicationTelemetry(n.config.telemetry.application),o.addClientInfo(),e.codeChallenge&&e.codeChallengeMethod&&o.addCodeChallengeParams(e.codeChallenge,e.codeChallengeMethod),e.prompt&&o.addPrompt(e.prompt),e.domainHint&&o.addDomainHint(e.domainHint),e.prompt!==ut.SELECT_ACCOUNT)if(e.sid&&e.prompt===ut.NONE)n.logger.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from request"),o.addSid(e.sid);else if(e.account){const s=n.extractAccountSid(e.account);let a=n.extractLoginHint(e.account);if(a&&e.domainHint&&(n.logger.warning('AuthorizationCodeClient.createAuthCodeUrlQueryString: "domainHint" param is set, skipping opaque "login_hint" claim. Please consider not passing domainHint'),a=null),a){n.logger.verbose("createAuthCodeUrlQueryString: login_hint claim present on account"),o.addLoginHint(a);try{const c=js(e.account.homeAccountId);o.addCcsOid(c)}catch{n.logger.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(s&&e.prompt===ut.NONE){n.logger.verbose("createAuthCodeUrlQueryString: Prompt is none, adding sid from account"),o.addSid(s);try{const c=js(e.account.homeAccountId);o.addCcsOid(c)}catch{n.logger.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}else if(e.loginHint)n.logger.verbose("createAuthCodeUrlQueryString: Adding login_hint from request"),o.addLoginHint(e.loginHint),o.addCcsUpn(e.loginHint);else if(e.account.username){n.logger.verbose("createAuthCodeUrlQueryString: Adding login_hint from account"),o.addLoginHint(e.account.username);try{const c=js(e.account.homeAccountId);o.addCcsOid(c)}catch{n.logger.verbose("createAuthCodeUrlQueryString: Could not parse home account ID for CCS Header")}}}else e.loginHint&&(n.logger.verbose("createAuthCodeUrlQueryString: No account, adding login_hint from request"),o.addLoginHint(e.loginHint),o.addCcsUpn(e.loginHint));else n.logger.verbose("createAuthCodeUrlQueryString: Prompt is select_account, ignoring account hints");if(e.nonce&&o.addNonce(e.nonce),e.state&&o.addState(e.state),(e.claims||n.config.authOptions.clientCapabilities&&n.config.authOptions.clientCapabilities.length>0)&&o.addClaims(e.claims,n.config.authOptions.clientCapabilities),e.embeddedClientId&&o.addBrokerParameters({brokerClientId:n.config.authOptions.clientId,brokerRedirectUri:n.config.authOptions.redirectUri}),n.addExtraQueryParams(e,o),e.nativeBroker&&(o.addNativeBroker(),e.authenticationScheme===ve.POP)){const s=new ea(n.cryptoUtils);let a;a=e.popKid?n.cryptoUtils.encodeKid(e.popKid):(yield k(s.generateCnf.bind(s),"popTokenGenerateCnf",n.logger,n.performanceClient,e.correlationId)(e,n.logger)).reqCnfString,o.addPopToken(a)}return o.createQueryString()})()}createLogoutUrlQueryString(e){const n=new Ru(e.correlationId,this.performanceClient);return e.postLogoutRedirectUri&&n.addPostLogoutRedirectUri(e.postLogoutRedirectUri),e.correlationId&&n.addCorrelationId(e.correlationId),e.idTokenHint&&n.addIdTokenHint(e.idTokenHint),e.state&&n.addState(e.state),e.logoutHint&&n.addLogoutHint(e.logoutHint),this.addExtraQueryParams(e,n),n.createQueryString()}addExtraQueryParams(e,n){!(e.extraQueryParameters&&e.extraQueryParameters.hasOwnProperty("instance_aware"))&&this.config.authOptions.instanceAware&&(e.extraQueryParameters=e.extraQueryParameters||{},e.extraQueryParameters.instance_aware="true"),e.extraQueryParameters&&n.addExtraQueryParameters(e.extraQueryParameters)}extractAccountSid(e){return e.idTokenClaims?.sid||null}extractLoginHint(e){return e.idTokenClaims?.login_hint||null}}class Mu{constructor(e,n){this.cacheOutcome="0",this.cacheManager=n,this.apiId=e.apiId,this.correlationId=e.correlationId,this.wrapperSKU=e.wrapperSKU||T.EMPTY_STRING,this.wrapperVer=e.wrapperVer||T.EMPTY_STRING,this.telemetryCacheKey=pt.CACHE_KEY+"-"+e.clientId}generateCurrentRequestHeaderValue(){const e=`${this.apiId}${pt.VALUE_SEPARATOR}${this.cacheOutcome}`,n=[this.wrapperSKU,this.wrapperVer],r=this.getNativeBrokerErrorCode();r?.length&&n.push(`broker_error=${r}`);const o=n.join(pt.VALUE_SEPARATOR),s=[e,this.getRegionDiscoveryFields()].join(pt.VALUE_SEPARATOR);return[pt.SCHEMA_VERSION,s,o].join(pt.CATEGORY_SEPARATOR)}generateLastRequestHeaderValue(){const e=this.getLastRequests(),n=Mu.maxErrorsToSend(e),r=e.failedRequests.slice(0,2*n).join(pt.VALUE_SEPARATOR),o=e.errors.slice(0,n).join(pt.VALUE_SEPARATOR),i=e.errors.length,a=[i,n<i?pt.OVERFLOW_TRUE:pt.OVERFLOW_FALSE].join(pt.VALUE_SEPARATOR);return[pt.SCHEMA_VERSION,e.cacheHits,r,o,a].join(pt.CATEGORY_SEPARATOR)}cacheFailedRequest(e){const n=this.getLastRequests();n.errors.length>=pt.MAX_CACHED_ERRORS&&(n.failedRequests.shift(),n.failedRequests.shift(),n.errors.shift()),n.failedRequests.push(this.apiId,this.correlationId),e instanceof Error&&e&&e.toString()?n.errors.push(e instanceof Ne?e.subError?e.subError:e.errorCode?e.errorCode:e.toString():e.toString()):n.errors.push(pt.UNKNOWN_ERROR),this.cacheManager.setServerTelemetry(this.telemetryCacheKey,n,this.correlationId)}incrementCacheHits(){const e=this.getLastRequests();return e.cacheHits+=1,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e,this.correlationId),e.cacheHits}getLastRequests(){return this.cacheManager.getServerTelemetry(this.telemetryCacheKey)||{failedRequests:[],errors:[],cacheHits:0}}clearTelemetryCache(){const e=this.getLastRequests(),n=Mu.maxErrorsToSend(e);if(n===e.errors.length)this.cacheManager.removeItem(this.telemetryCacheKey,this.correlationId);else{const o={failedRequests:e.failedRequests.slice(2*n),errors:e.errors.slice(n),cacheHits:0};this.cacheManager.setServerTelemetry(this.telemetryCacheKey,o,this.correlationId)}}static maxErrorsToSend(e){let n,r=0,o=0;const i=e.errors.length;for(n=0;n<i;n++){const a=e.failedRequests[2*n+1]||T.EMPTY_STRING,c=e.errors[n]||T.EMPTY_STRING;if(o+=(e.failedRequests[2*n]||T.EMPTY_STRING).toString().length+a.toString().length+c.length+3,!(o<pt.MAX_LAST_HEADER_BYTES))break;r+=1}return r}getRegionDiscoveryFields(){const e=[];return e.push(this.regionUsed||T.EMPTY_STRING),e.push(this.regionSource||T.EMPTY_STRING),e.push(this.regionOutcome||T.EMPTY_STRING),e.join(",")}updateRegionDiscoveryMetadata(e){this.regionUsed=e.region_used,this.regionSource=e.region_source,this.regionOutcome=e.region_outcome}setCacheOutcome(e){this.cacheOutcome=e}setNativeBrokerErrorCode(e){const n=this.getLastRequests();n.nativeBrokerErrorCode=e,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,n,this.correlationId)}getNativeBrokerErrorCode(){return this.getLastRequests().nativeBrokerErrorCode}clearNativeBrokerErrorCode(){const e=this.getLastRequests();delete e.nativeBrokerErrorCode,this.cacheManager.setServerTelemetry(this.telemetryCacheKey,e,this.correlationId)}static makeExtraSkuString(e){return function CJ(t){const{skus:e,libraryName:n,libraryVersion:r,extensionName:o,extensionVersion:i}=t,s=new Map([[0,[n,r]],[2,[o,i]]]);let a=[];if(e?.length){if(a=e.split(","),a.length<4)return e}else a=Array.from({length:4},()=>"|");return s.forEach((c,u)=>{2===c.length&&c[0]?.length&&c[1]?.length&&function EJ(t){const{skuArr:e,index:n,skuName:r,skuVersion:o}=t;n>=e.length||(e[n]=[r,o].join("|"))}({skuArr:a,index:u,skuName:c[0],skuVersion:c[1]})}),a.join(",")}(e)}}class Tx{constructor(e,n,r,o,i,s,a,c,u){this.config=e,this.browserStorage=n,this.browserCrypto=r,this.networkClient=this.config.system.networkClient,this.eventHandler=i,this.navigationClient=s,this.nativeMessageHandler=c,this.correlationId=u||er(),this.logger=o.clone("msal.js.browser",Qs,this.correlationId),this.performanceClient=a}clearCacheOnLogout(e){var n=this;return y(function*(){if(e){rt.accountInfoIsEqual(e,n.browserStorage.getActiveAccount(n.correlationId),!1)&&(n.logger.verbose("Setting active account to null"),n.browserStorage.setActiveAccount(null,n.correlationId));try{yield n.browserStorage.removeAccount(rt.generateAccountCacheKey(e),n.correlationId),n.logger.verbose("Cleared cache items belonging to the account provided in the logout request.")}catch{n.logger.error("Account provided in logout request was not found. Local cache unchanged.")}}else try{n.logger.verbose("No account provided in logout request, clearing all cache items.",n.correlationId),yield n.browserStorage.clear(n.correlationId),yield n.browserCrypto.clearKeystore()}catch{n.logger.error("Attempted to clear all MSAL cache items and failed. Local cache unchanged.")}})()}getRedirectUri(e){return this.logger.verbose("getRedirectUri called"),se.getAbsoluteUrl(e||this.config.auth.redirectUri,Rr())}initializeServerTelemetryManager(e,n){this.logger.verbose("initializeServerTelemetryManager called");const r={clientId:this.config.auth.clientId,correlationId:this.correlationId,apiId:e,forceRefresh:n||!1,wrapperSKU:this.browserStorage.getWrapperMetadata()[0],wrapperVer:this.browserStorage.getWrapperMetadata()[1]};return new Mu(r,this.browserStorage)}getDiscoveredAuthority(e){var n=this;return y(function*(){const{account:r}=e,o=e.requestExtraQueryParameters&&e.requestExtraQueryParameters.hasOwnProperty("instance_aware")?e.requestExtraQueryParameters.instance_aware:void 0;n.performanceClient.addQueueMeasurement("standardInteractionClientGetDiscoveredAuthority",n.correlationId);const i={protocolMode:n.config.auth.protocolMode,OIDCOptions:n.config.auth.OIDCOptions,knownAuthorities:n.config.auth.knownAuthorities,cloudDiscoveryMetadata:n.config.auth.cloudDiscoveryMetadata,authorityMetadata:n.config.auth.authorityMetadata,skipAuthorityMetadataCache:n.config.auth.skipAuthorityMetadataCache},s=e.requestAuthority||n.config.auth.authority,c=r&&(o?.length?"true"===o:n.config.auth.instanceAware)?n.config.auth.authority.replace(se.getDomainFromUrl(s),r.environment):s,u=Tt.generateAuthority(c,e.requestAzureCloudOptions||n.config.auth.azureCloudOptions),l=yield k(_x,"authorityFactoryCreateDiscoveredInstance",n.logger,n.performanceClient,n.correlationId)(u,n.config.system.networkClient,n.browserStorage,i,n.logger,n.correlationId,n.performanceClient);if(r&&!l.isAlias(r.environment))throw we(Qh);return l})()}}function TJ(t,e,n){return jE.apply(this,arguments)}function jE(){return(jE=y(function*(t,e,n){t.addQueueMeasurement("generatePkceCodes",n);const r=pi(wJ,"generateCodeVerifier",e,t,n)(t,e,n);return{verifier:r,challenge:yield k(DJ,"generateCodeChallengeFromVerifier",e,t,n)(r,t,e,n)}})).apply(this,arguments)}function wJ(t,e,n){try{const r=new Uint8Array(32);return pi(j9,"getRandomValues",e,t,n)(r),Np(r)}catch{throw O(Eu)}}function DJ(t,e,n,r){return $E.apply(this,arguments)}function $E(){return($E=y(function*(t,e,n,r){e.addQueueMeasurement("generateCodeChallengeFromVerifier",r);try{const o=yield k(Z0,"sha256Digest",n,e,r)(t,e,r);return Np(new Uint8Array(o))}catch{throw O(Eu)}})).apply(this,arguments)}function GE(t,e,n,r){return zE.apply(this,arguments)}function zE(){return(zE=y(function*(t,e,n,r){n.addQueueMeasurement("initializeBaseRequest",t.correlationId);const o=t.authority||e.auth.authority,i=[...t&&t.scopes||[]],s={...t,correlationId:t.correlationId,authority:o,scopes:i};if(s.authenticationScheme){if(s.authenticationScheme===ve.SSH){if(!t.sshJwk)throw we(Vs);if(!t.sshKid)throw we(Kh)}r.verbose(`Authentication Scheme set to "${s.authenticationScheme}" as configured in Auth request`)}else s.authenticationScheme=ve.BEARER,r.verbose('Authentication Scheme wasn\'t explicitly set in request, defaulting to "Bearer" request');return e.cache.claimsBasedCachingEnabled&&t.claims&&!xn.isEmptyObj(t.claims)&&(s.requestedClaimsHash=yield X0(t.claims)),s})).apply(this,arguments)}function SJ(t,e,n,r,o){return qE.apply(this,arguments)}function qE(){return(qE=y(function*(t,e,n,r,o){r.addQueueMeasurement("initializeSilentRequest",t.correlationId);const i=yield k(GE,"initializeBaseRequest",o,r,t.correlationId)(t,n,r,o);return{...t,...i,account:e,forceRefresh:t.forceRefresh||!1}})).apply(this,arguments)}class ta extends Tx{initializeAuthorizationCodeRequest(e){var n=this;return y(function*(){n.performanceClient.addQueueMeasurement("standardInteractionClientInitializeAuthorizationCodeRequest",n.correlationId);const r=yield k(TJ,"generatePkceCodes",n.logger,n.performanceClient,n.correlationId)(n.performanceClient,n.logger,n.correlationId),o={...e,redirectUri:e.redirectUri,code:T.EMPTY_STRING,codeVerifier:r.verifier};return e.codeChallenge=r.challenge,e.codeChallengeMethod=T.S256_CODE_CHALLENGE_METHOD,o})()}initializeLogoutRequest(e){this.logger.verbose("initializeLogoutRequest called",e?.correlationId);const n={correlationId:this.correlationId||er(),...e};if(e)if(e.logoutHint)this.logger.verbose("logoutHint has already been set in logoutRequest");else if(e.account){const r=this.getLogoutHintFromIdTokenClaims(e.account);r&&(this.logger.verbose("Setting logoutHint to login_hint ID Token Claim value for the account provided"),n.logoutHint=r)}else this.logger.verbose("logoutHint was not set and account was not passed into logout request, logoutHint will not be set");else this.logger.verbose("logoutHint will not be set since no logout request was configured");return e&&null===e.postLogoutRedirectUri?this.logger.verbose("postLogoutRedirectUri passed as null, not setting post logout redirect uri",n.correlationId):e&&e.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to uri set on logout request",n.correlationId),n.postLogoutRedirectUri=se.getAbsoluteUrl(e.postLogoutRedirectUri,Rr())):null===this.config.auth.postLogoutRedirectUri?this.logger.verbose("postLogoutRedirectUri configured as null and no uri set on request, not passing post logout redirect",n.correlationId):this.config.auth.postLogoutRedirectUri?(this.logger.verbose("Setting postLogoutRedirectUri to configured uri",n.correlationId),n.postLogoutRedirectUri=se.getAbsoluteUrl(this.config.auth.postLogoutRedirectUri,Rr())):(this.logger.verbose("Setting postLogoutRedirectUri to current page",n.correlationId),n.postLogoutRedirectUri=se.getAbsoluteUrl(Rr(),Rr())),n}getLogoutHintFromIdTokenClaims(e){const n=e.idTokenClaims;if(n){if(n.login_hint)return n.login_hint;this.logger.verbose("The ID Token Claims tied to the provided account do not contain a login_hint claim, logoutHint will not be added to logout request")}else this.logger.verbose("The provided account does not contain ID Token Claims, logoutHint will not be added to logout request");return null}createAuthCodeClient(e){var n=this;return y(function*(){n.performanceClient.addQueueMeasurement("standardInteractionClientCreateAuthCodeClient",n.correlationId);const r=yield k(n.getClientConfiguration.bind(n),"standardInteractionClientGetClientConfiguration",n.logger,n.performanceClient,n.correlationId)(e);return new Cx(r,n.performanceClient)})()}getClientConfiguration(e){var n=this;return y(function*(){const{serverTelemetryManager:r,requestAuthority:o,requestAzureCloudOptions:i,requestExtraQueryParameters:s,account:a}=e;n.performanceClient.addQueueMeasurement("standardInteractionClientGetClientConfiguration",n.correlationId);const c=yield k(n.getDiscoveredAuthority.bind(n),"standardInteractionClientGetDiscoveredAuthority",n.logger,n.performanceClient,n.correlationId)({requestAuthority:o,requestAzureCloudOptions:i,requestExtraQueryParameters:s,account:a}),u=n.config.system.loggerOptions;return{authOptions:{clientId:n.config.auth.clientId,authority:c,clientCapabilities:n.config.auth.clientCapabilities,redirectUri:n.config.auth.redirectUri},systemOptions:{tokenRenewalOffsetSeconds:n.config.system.tokenRenewalOffsetSeconds,preventCorsPreflight:!0},loggerOptions:{loggerCallback:u.loggerCallback,piiLoggingEnabled:u.piiLoggingEnabled,logLevel:u.logLevel,correlationId:n.correlationId},cacheOptions:{claimsBasedCachingEnabled:n.config.cache.claimsBasedCachingEnabled},cryptoInterface:n.browserCrypto,networkInterface:n.networkClient,storageInterface:n.browserStorage,serverTelemetryManager:r,libraryInfo:{sku:"msal.js.browser",version:Qs,cpu:T.EMPTY_STRING,os:T.EMPTY_STRING},telemetry:n.config.telemetry}})()}initializeAuthorizationRequest(e,n){var r=this;return y(function*(){r.performanceClient.addQueueMeasurement("standardInteractionClientInitializeAuthorizationRequest",r.correlationId);const o=r.getRedirectUri(e.redirectUri),s=Un.setRequestState(r.browserCrypto,e&&e.state||T.EMPTY_STRING,{interactionType:n}),c={...yield k(GE,"initializeBaseRequest",r.logger,r.performanceClient,r.correlationId)({...e,correlationId:r.correlationId},r.config,r.performanceClient,r.logger),redirectUri:o,state:s,nonce:e.nonce||er(),responseMode:r.config.auth.OIDCOptions.serverResponseType};if(e.loginHint||e.sid)return c;const u=e.account||r.browserStorage.getActiveAccount(r.correlationId);if(u&&(r.logger.verbose("Setting validated request account",r.correlationId),r.logger.verbosePii(`Setting validated request account: ${u.homeAccountId}`,r.correlationId),c.account=u),!c.loginHint&&!u){const l=r.browserStorage.getLegacyLoginHint();l&&(c.loginHint=l)}return c})()}}const wx="user_switch",xJ={[wx]:"User attempted to switch accounts in the native broker, which is not allowed. All new accounts must sign-in through the standard web flow first, please try again."};class rr extends Ne{constructor(e,n,r){super(e,n),Object.setPrototypeOf(this,rr.prototype),this.name="NativeAuthError",this.ext=r}}function na(t){return!!(t.ext&&t.ext.status&&("PERSISTENT_ERROR"===t.ext.status||"DISABLED"===t.ext.status)||t.ext&&t.ext.error&&-2147186943===t.ext.error||"ContentError"===t.errorCode)}function KE(t,e,n){if(n&&n.status)switch(n.status){case"ACCOUNT_UNAVAILABLE":return PE(xp);case"USER_INTERACTION_REQUIRED":return new Ln(t,e);case"USER_CANCEL":return O(br);case"NO_NETWORK":return O(Ys)}return new rr(t,xJ[t]||e,n)}class WE extends HE{constructor(e,n){super(e,n)}acquireToken(e){var n=this;return y(function*(){n.performanceClient?.addQueueMeasurement("refreshTokenClientAcquireToken",e.correlationId);const r=Xn(),o=yield k(n.executeTokenRequest.bind(n),"refreshTokenClientExecuteTokenRequest",n.logger,n.performanceClient,e.correlationId)(e,n.authority),i=o.headers?.["x-ms-request-id"],s=new mi(n.config.authOptions.clientId,n.cacheManager,n.cryptoUtils,n.logger,n.config.serializableCache,n.config.persistencePlugin);return s.validateTokenResponse(o.body),k(s.handleServerTokenResponse.bind(s),"handleServerTokenResponse",n.logger,n.performanceClient,e.correlationId)(o.body,n.authority,r,e,void 0,void 0,!0,e.forceCache,i)})()}acquireTokenByRefreshToken(e){var n=this;return y(function*(){if(!e)throw we(jh);if(n.performanceClient?.addQueueMeasurement("refreshTokenClientAcquireTokenByRefreshToken",e.correlationId),!e.account)throw b(fu);if(n.cacheManager.isAppMetadataFOCI(e.account.environment))try{return yield k(n.acquireTokenWithCachedRefreshToken.bind(n),"refreshTokenClientAcquireTokenWithCachedRefreshToken",n.logger,n.performanceClient,e.correlationId)(e,!0)}catch(o){if(o instanceof Ln&&o.errorCode===Js||o instanceof po&&"invalid_grant"===o.errorCode&&"client_mismatch"===o.subError)return k(n.acquireTokenWithCachedRefreshToken.bind(n),"refreshTokenClientAcquireTokenWithCachedRefreshToken",n.logger,n.performanceClient,e.correlationId)(e,!1);throw o}return k(n.acquireTokenWithCachedRefreshToken.bind(n),"refreshTokenClientAcquireTokenWithCachedRefreshToken",n.logger,n.performanceClient,e.correlationId)(e,!1)})()}acquireTokenWithCachedRefreshToken(e,n){var r=this;return y(function*(){r.performanceClient?.addQueueMeasurement("refreshTokenClientAcquireTokenWithCachedRefreshToken",e.correlationId);const o=pi(r.cacheManager.getRefreshToken.bind(r.cacheManager),"cacheManagerGetRefreshToken",r.logger,r.performanceClient,e.correlationId)(e.account,n,e.correlationId,void 0,r.performanceClient);if(!o)throw PE(Js);if(o.expiresOn&&KC(o.expiresOn,e.refreshTokenExpirationOffsetSeconds||300))throw PE(OE);const i={...e,refreshToken:o.secret,authenticationScheme:e.authenticationScheme||ve.BEARER,ccsCredential:{credential:e.account.homeAccountId,type:"home_account_id"}};try{return yield k(r.acquireToken.bind(r),"refreshTokenClientAcquireToken",r.logger,r.performanceClient,e.correlationId)(i)}catch(s){if(s instanceof Ln&&s.subError===Zs){r.logger.verbose("acquireTokenWithRefreshToken: bad refresh token, removing from cache");const a=Bs(o);r.cacheManager.removeRefreshToken(a,e.correlationId)}throw s}})()}executeTokenRequest(e,n){var r=this;return y(function*(){r.performanceClient?.addQueueMeasurement("refreshTokenClientExecuteTokenRequest",e.correlationId);const o=r.createTokenQueryParameters(e),i=se.appendQueryString(n.tokenEndpoint,o),s=yield k(r.createTokenRequestBody.bind(r),"refreshTokenClientCreateTokenRequestBody",r.logger,r.performanceClient,e.correlationId)(e),a=r.createTokenRequestHeaders(e.ccsCredential),c={clientId:e.tokenBodyParameters?.clientId||r.config.authOptions.clientId,authority:n.canonicalAuthority,scopes:e.scopes,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid};return k(r.executePostToTokenEndpoint.bind(r),"refreshTokenClientExecutePostToTokenEndpoint",r.logger,r.performanceClient,e.correlationId)(i,s,a,c,e.correlationId,"refreshTokenClientExecutePostToTokenEndpoint")})()}createTokenRequestBody(e){var n=this;return y(function*(){n.performanceClient?.addQueueMeasurement("refreshTokenClientCreateTokenRequestBody",e.correlationId);const o=new Ru(e.correlationId,n.performanceClient);if(o.addClientId(e.embeddedClientId||e.tokenBodyParameters?.[gi]||n.config.authOptions.clientId),e.redirectUri&&o.addRedirectUri(e.redirectUri),o.addScopes(e.scopes,!0,n.config.authOptions.authority.options.OIDCOptions?.defaultScopes),o.addGrantType("refresh_token"),o.addClientInfo(),o.addLibraryInfo(n.config.libraryInfo),o.addApplicationTelemetry(n.config.telemetry.application),o.addThrottling(),n.serverTelemetryManager&&!sE(n.config)&&o.addServerTelemetry(n.serverTelemetryManager),o.addRefreshToken(e.refreshToken),n.config.clientCredentials.clientSecret&&o.addClientSecret(n.config.clientCredentials.clientSecret),n.config.clientCredentials.clientAssertion){const i=n.config.clientCredentials.clientAssertion;o.addClientAssertion(yield vx(i.assertion,n.config.authOptions.clientId,e.resourceRequestUri)),o.addClientAssertionType(i.assertionType)}if(e.authenticationScheme===ve.POP){const i=new ea(n.cryptoUtils,n.performanceClient);let s;s=e.popKid?n.cryptoUtils.encodeKid(e.popKid):(yield k(i.generateCnf.bind(i),"popTokenGenerateCnf",n.logger,n.performanceClient,e.correlationId)(e,n.logger)).reqCnfString,o.addPopToken(s)}else if(e.authenticationScheme===ve.SSH){if(!e.sshJwk)throw we(Vs);o.addSshJwk(e.sshJwk)}if((!xn.isEmptyObj(e.claims)||n.config.authOptions.clientCapabilities&&n.config.authOptions.clientCapabilities.length>0)&&o.addClaims(e.claims,n.config.authOptions.clientCapabilities),n.config.systemOptions.preventCorsPreflight&&e.ccsCredential)switch(e.ccsCredential.type){case"home_account_id":try{const i=js(e.ccsCredential.credential);o.addCcsOid(i)}catch(i){n.logger.verbose("Could not parse home account ID for CCS Header: "+i)}break;case"UPN":o.addCcsUpn(e.ccsCredential.credential)}return e.embeddedClientId&&o.addBrokerParameters({brokerClientId:n.config.authOptions.clientId,brokerRedirectUri:n.config.authOptions.redirectUri}),e.tokenBodyParameters&&o.addExtraQueryParameters(e.tokenBodyParameters),o.createQueryString()})()}}class LJ extends HE{constructor(e,n){super(e,n)}acquireToken(e){var n=this;return y(function*(){try{const[r,o]=yield n.acquireCachedToken({...e,scopes:e.scopes?.length?e.scopes:[...Ls]});return"4"===o&&(n.logger.info("SilentFlowClient:acquireCachedToken - Cached access token's refreshOn property has been exceeded'. It's not expired, but must be refreshed."),new WE(n.config,n.performanceClient).acquireTokenByRefreshToken(e).catch(()=>{})),r}catch(r){if(r instanceof Nh&&r.errorCode===Pn)return new WE(n.config,n.performanceClient).acquireTokenByRefreshToken(e);throw r}})()}acquireCachedToken(e){var n=this;return y(function*(){n.performanceClient?.addQueueMeasurement("silentFlowClientAcquireCachedToken",e.correlationId);let r="0";if(e.forceRefresh||!n.config.cacheOptions.claimsBasedCachingEnabled&&!xn.isEmptyObj(e.claims))throw n.setCacheOutcome("1",e.correlationId),b(Pn);if(!e.account)throw b(fu);const o=e.account.tenantId||function p7(t){const r=new se(t).getUrlComponents().PathSegments.slice(-1)[0]?.toLowerCase();switch(r){case"common":case"organizations":case"consumers":return;default:return r}}(e.authority),i=n.cacheManager.getTokenKeys(),s=n.cacheManager.getAccessToken(e.account,e,i,o,n.performanceClient);if(!s)throw n.setCacheOutcome("2",e.correlationId),b(Pn);if(function i9(t){return Number(t)>Xn()}(s.cachedAt)||KC(s.expiresOn,n.config.systemOptions.tokenRenewalOffsetSeconds))throw n.setCacheOutcome("3",e.correlationId),b(Pn);s.refreshOn&&KC(s.refreshOn,0)&&(r="4");const a=e.authority||n.authority.getPreferredCache(),c={account:n.cacheManager.readAccountFromCache(e.account,e.correlationId),accessToken:s,idToken:n.cacheManager.getIdToken(e.account,e.correlationId,i,o,n.performanceClient),refreshToken:null,appMetadata:n.cacheManager.readAppMetadataFromCache(a)};return n.setCacheOutcome(r,e.correlationId),n.config.serverTelemetryManager&&n.config.serverTelemetryManager.incrementCacheHits(),[yield k(n.generateResultFromCacheRecord.bind(n),"silentFlowClientGenerateResultFromCacheRecord",n.logger,n.performanceClient,e.correlationId)(c,e),r]})()}setCacheOutcome(e,n){this.serverTelemetryManager?.setCacheOutcome(e),this.performanceClient?.addFields({cacheOutcome:e},n),"0"!==e&&this.logger.info(`Token refresh is required due to cache outcome: ${e}`)}generateResultFromCacheRecord(e,n){var r=this;return y(function*(){let o;if(r.performanceClient?.addQueueMeasurement("silentFlowClientGenerateResultFromCacheRecord",n.correlationId),e.idToken&&(o=li(e.idToken.secret,r.config.cryptoInterface.base64Decode)),n.maxAge||0===n.maxAge){const i=o?.auth_time;if(!i)throw b(lu);w0(i,n.maxAge)}return mi.generateAuthenticationResult(r.cryptoUtils,r.authority,e,!0,n,o)})()}}class Dx extends ta{acquireToken(e){var n=this;return y(function*(){n.performanceClient.addQueueMeasurement("silentCacheClientAcquireToken",e.correlationId);const r=n.initializeServerTelemetryManager(61),o=yield k(n.getClientConfiguration.bind(n),"standardInteractionClientGetClientConfiguration",n.logger,n.performanceClient,n.correlationId)({serverTelemetryManager:r,requestAuthority:e.authority,requestAzureCloudOptions:e.azureCloudOptions,account:e.account}),i=new LJ(o,n.performanceClient);n.logger.verbose("Silent auth client created");try{const a=(yield k(i.acquireCachedToken.bind(i),"silentFlowClientAcquireCachedToken",n.logger,n.performanceClient,e.correlationId)(e))[0];return n.performanceClient.addFields({fromCache:!0},e.correlationId),a}catch(s){throw s instanceof bu&&s.errorCode===Su&&n.logger.verbose("Signing keypair for bound access token not found. Refreshing bound access token and generating a new crypto keypair."),s}})()}logout(e){this.logger.verbose("logoutRedirect called");const n=this.initializeLogoutRequest(e);return this.clearCacheOnLogout(n?.account)}}class ra extends Tx{constructor(e,n,r,o,i,s,a,c,u,l,d,f){super(e,n,r,o,i,s,c,u,f),this.apiId=a,this.accountId=l,this.nativeMessageHandler=u,this.nativeStorageManager=d,this.silentCacheClient=new Dx(e,this.nativeStorageManager,r,o,i,s,c,u,f),this.serverTelemetryManager=this.initializeServerTelemetryManager(this.apiId);const h="ppnbnpeolgkicgegkbkbjmhlideopiji"===this.nativeMessageHandler.getExtensionId()?"chrome":this.nativeMessageHandler.getExtensionId()?.length?"unknown":void 0;this.skus=Mu.makeExtraSkuString({libraryName:"msal.js.browser",libraryVersion:Qs,extensionName:h,extensionVersion:this.nativeMessageHandler.getExtensionVersion()})}addRequestSKUs(e){e.extraParameters={...e.extraParameters,[gJ]:this.skus}}acquireToken(e){var n=this;return y(function*(){n.performanceClient.addQueueMeasurement("nativeInteractionClientAcquireToken",e.correlationId),n.logger.trace("NativeInteractionClient - acquireToken called.");const r=n.performanceClient.startMeasurement("nativeInteractionClientAcquireToken",e.correlationId),o=Xn();try{const i=yield n.initializeNativeRequest(e);try{const l=yield n.acquireTokensFromCache(n.accountId,i);return r.end({success:!0,isNativeBroker:!1,fromCache:!0}),l}catch{n.logger.info("MSAL internal Cache does not contain tokens, proceed to make a native call")}const{...s}=i,a={method:"GetToken",request:s},c=yield n.nativeMessageHandler.sendMessage(a),u=n.validateNativeResponse(c);return yield n.handleNativeResponse(u,i,o).then(l=>(r.end({success:!0,isNativeBroker:!0,requestId:l.requestId}),n.serverTelemetryManager.clearNativeBrokerErrorCode(),l)).catch(l=>{throw r.end({success:!1,errorCode:l.errorCode,subErrorCode:l.subError,isNativeBroker:!0}),l})}catch(i){throw i instanceof rr&&n.serverTelemetryManager.setNativeBrokerErrorCode(i.errorCode),i}})()}createSilentCacheRequest(e,n){return{authority:e.authority,correlationId:this.correlationId,scopes:We.fromString(e.scope).asArray(),account:n,forceRefresh:!1}}acquireTokensFromCache(e,n){var r=this;return y(function*(){if(!e)throw r.logger.warning("NativeInteractionClient:acquireTokensFromCache - No nativeAccountId provided"),b(pu);const o=r.browserStorage.getBaseAccountInfo({nativeAccountId:e},n.correlationId);if(!o)throw b(pu);try{const i=r.createSilentCacheRequest(n,o),s=yield r.silentCacheClient.acquireToken(i),a={...o,idTokenClaims:s?.idTokenClaims,idToken:s?.idToken};return{...s,account:a}}catch(i){throw i}})()}acquireTokenRedirect(e,n){var r=this;return y(function*(){r.logger.trace("NativeInteractionClient - acquireTokenRedirect called.");const{...o}=e;delete o.onRedirectNavigate;const i=yield r.initializeNativeRequest(o),s={method:"GetToken",request:i};try{const u=yield r.nativeMessageHandler.sendMessage(s);r.validateNativeResponse(u)}catch(u){if(u instanceof rr&&(r.serverTelemetryManager.setNativeBrokerErrorCode(u.errorCode),na(u)))throw u}r.browserStorage.setTemporaryCache("request.native",JSON.stringify(i),!0);const a={apiId:861,timeout:r.config.system.redirectNavigationTimeout,noHistory:!1},c=r.config.auth.navigateToLoginRequestUrl?window.location.href:r.getRedirectUri(e.redirectUri);n.end({success:!0}),yield r.navigationClient.navigateExternal(c,a)})()}handleRedirectPromise(e,n){var r=this;return y(function*(){if(r.logger.trace("NativeInteractionClient - handleRedirectPromise called."),!r.browserStorage.isInteractionInProgress(!0))return r.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;const o=r.browserStorage.getCachedNativeRequest();if(!o)return r.logger.verbose("NativeInteractionClient - handleRedirectPromise called but there is no cached request, returning null."),e&&n&&e?.addFields({errorCode:"no_cached_request"},n),null;const{prompt:i,...s}=o;i&&r.logger.verbose("NativeInteractionClient - handleRedirectPromise called and prompt was included in the original request, removing prompt from cached request to prevent second interaction with native broker window."),r.browserStorage.removeItem(r.browserStorage.generateCacheKey("request.native"));const a={method:"GetToken",request:s},c=Xn();try{r.logger.verbose("NativeInteractionClient - handleRedirectPromise sending message to native broker.");const u=yield r.nativeMessageHandler.sendMessage(a);r.validateNativeResponse(u);const l=r.handleNativeResponse(u,s,c);r.browserStorage.setInteractionInProgress(!1);const d=yield l;return r.serverTelemetryManager.clearNativeBrokerErrorCode(),d}catch(u){throw r.browserStorage.setInteractionInProgress(!1),u}})()}logout(){return this.logger.trace("NativeInteractionClient - logout called."),Promise.reject("Logout not implemented yet")}handleNativeResponse(e,n,r){var o=this;return y(function*(){o.logger.trace("NativeInteractionClient - handleNativeResponse called.");const i=li(e.id_token,tr),s=o.createHomeAccountIdentifier(e,i),a=o.browserStorage.getAccountInfoFilteredBy({nativeAccountId:n.accountId},o.correlationId)?.homeAccountId;if(s!==a&&e.account.id!==n.accountId)throw KE(wx);const c=yield o.getDiscoveredAuthority({requestAuthority:n.authority}),u=BE(o.browserStorage,c,s,tr,o.correlationId,i,e.client_info,void 0,i.tid,void 0,e.account.id,o.logger),l=yield o.generateAuthenticationResult(e,n,i,u,c.canonicalAuthority,r);return o.cacheAccount(u),o.cacheNativeTokens(e,n,s,i,e.access_token,l.tenantId,r),l})()}createHomeAccountIdentifier(e,n){return rt.generateHomeAccountId(e.client_info||T.EMPTY_STRING,0,this.logger,this.browserCrypto,n)}generateScopes(e,n){return We.fromString(e.scope?e.scope:n.scope)}generatePopAccessToken(e,n){var r=this;return y(function*(){if(n.tokenType===ve.POP&&n.signPopToken){if(e.shr)return r.logger.trace("handleNativeServerResponse: SHR is enabled in native layer"),e.shr;const o=new ea(r.browserCrypto),i={resourceRequestMethod:n.resourceRequestMethod,resourceRequestUri:n.resourceRequestUri,shrClaims:n.shrClaims,shrNonce:n.shrNonce};if(!n.keyId)throw b(yu);return o.signPopToken(e.access_token,n.keyId,i)}return e.access_token})()}generateAuthenticationResult(e,n,r,o,i,s){var a=this;return y(function*(){const c=a.addTelemetryFromNativeResponse(e),u=We.fromString(e.scope?e.scope:n.scope),l=e.account.properties||{},d=l.UID||r.oid||r.sub||T.EMPTY_STRING,f=l.TenantId||r.tid||T.EMPTY_STRING,h=tE(o.getAccountInfo(),void 0,r,e.id_token);h.nativeAccountId!==e.account.id&&(h.nativeAccountId=e.account.id);const p=yield a.generatePopAccessToken(e,n),m=n.tokenType===ve.POP?ve.POP:ve.BEARER;return{authority:i,uniqueId:d,tenantId:f,scopes:u.asArray(),account:h,idToken:e.id_token,idTokenClaims:r,accessToken:p,fromCache:!!c&&a.isResponseFromCache(c),expiresOn:new Date(1e3*Number(s+e.expires_in)),tokenType:m,correlationId:a.correlationId,state:e.state,fromNativeBroker:!0}})()}cacheAccount(e){this.browserStorage.setAccount(e,this.correlationId),this.browserStorage.removeAccountContext(e,this.correlationId).catch(n=>{this.logger.error(`Error occurred while removing account context from browser storage. ${n}`)})}cacheNativeTokens(e,n,r,o,i,s,a){const c=Ph(r,n.authority,e.id_token||"",n.clientId,o.tid||""),l=a+(n.tokenType===ve.POP?T.SHR_NONCE_VALIDITY:("string"==typeof e.expires_in?parseInt(e.expires_in,10):e.expires_in)||0),d=this.generateScopes(e,n),f=xh(r,n.authority,i,n.clientId,o.tid||s,d.printScopes(),l,0,tr,void 0,n.tokenType,void 0,n.keyId);this.nativeStorageManager.saveCacheRecord({idToken:c,accessToken:f},n.correlationId,n.storeInCache)}addTelemetryFromNativeResponse(e){const n=this.getMATSFromResponse(e);return n?(this.performanceClient.addFields({extensionId:this.nativeMessageHandler.getExtensionId(),extensionVersion:this.nativeMessageHandler.getExtensionVersion(),matsBrokerVersion:n.broker_version,matsAccountJoinOnStart:n.account_join_on_start,matsAccountJoinOnEnd:n.account_join_on_end,matsDeviceJoin:n.device_join,matsPromptBehavior:n.prompt_behavior,matsApiErrorCode:n.api_error_code,matsUiVisible:n.ui_visible,matsSilentCode:n.silent_code,matsSilentBiSubCode:n.silent_bi_sub_code,matsSilentMessage:n.silent_message,matsSilentStatus:n.silent_status,matsHttpStatus:n.http_status,matsHttpEventCount:n.http_event_count},this.correlationId),n):null}validateNativeResponse(e){if(e.hasOwnProperty("access_token")&&e.hasOwnProperty("id_token")&&e.hasOwnProperty("client_info")&&e.hasOwnProperty("account")&&e.hasOwnProperty("scope")&&e.hasOwnProperty("expires_in"))return e;throw I0(au,"Response missing expected properties.")}getMATSFromResponse(e){if(e.properties.MATS)try{return JSON.parse(e.properties.MATS)}catch{this.logger.error("NativeInteractionClient - Error parsing MATS telemetry, returning null instead")}return null}isResponseFromCache(e){return typeof e.is_cached>"u"?(this.logger.verbose("NativeInteractionClient - MATS telemetry does not contain field indicating if response was served from cache. Returning false."),!1):!!e.is_cached}initializeNativeRequest(e){var n=this;return y(function*(){n.logger.trace("NativeInteractionClient - initializeNativeRequest called");const r=e.authority||n.config.auth.authority;e.account&&(yield n.getDiscoveredAuthority({requestAuthority:r,requestAzureCloudOptions:e.azureCloudOptions,account:e.account}));const o=new se(r);o.validateAsUri();const{scopes:i,...s}=e,a=new We(i||[]);a.appendScopes(Ls);const u={...s,accountId:n.accountId,clientId:n.config.auth.clientId,authority:o.urlString,scope:a.printScopes(),redirectUri:n.getRedirectUri(e.redirectUri),prompt:(()=>{switch(n.apiId){case 863:case 61:return n.logger.trace("initializeNativeRequest: silent request sets prompt to none"),ut.NONE}if(e.prompt)switch(e.prompt){case ut.NONE:case ut.CONSENT:case ut.LOGIN:return n.logger.trace("initializeNativeRequest: prompt is compatible with native flow"),e.prompt;default:throw n.logger.trace(`initializeNativeRequest: prompt = ${e.prompt} is not compatible with native flow`),O(bp)}else n.logger.trace("initializeNativeRequest: prompt was not provided")})(),correlationId:n.correlationId,tokenType:e.authenticationScheme,windowTitleSubstring:document.title,extraParameters:{...e.extraQueryParameters,...e.tokenQueryParameters},extendedExpiryToken:!1,keyId:e.popKid};if(u.signPopToken&&e.popKid)throw O(Rp);if(n.handleExtraBrokerParams(u),u.extraParameters=u.extraParameters||{},u.extraParameters.telemetry="MATS",e.authenticationScheme===ve.POP){const l={resourceRequestUri:e.resourceRequestUri,resourceRequestMethod:e.resourceRequestMethod,shrClaims:e.shrClaims,shrNonce:e.shrNonce},d=new ea(n.browserCrypto);let f;if(u.keyId)f=n.browserCrypto.base64UrlEncode(JSON.stringify({kid:u.keyId})),u.signPopToken=!1;else{const h=yield k(d.generateCnf.bind(d),"popTokenGenerateCnf",n.logger,n.performanceClient,e.correlationId)(l,n.logger);f=h.reqCnfString,u.keyId=h.kid,u.signPopToken=!0}u.reqCnf=f}return n.addRequestSKUs(u),u})()}handleExtraBrokerParams(e){const n=e.extraParameters&&e.extraParameters.hasOwnProperty(FE)&&e.extraParameters.hasOwnProperty(LE)&&e.extraParameters.hasOwnProperty(gi);if(!e.embeddedClientId&&!n)return;let r="";const o=e.redirectUri;e.embeddedClientId?(e.redirectUri=this.config.auth.redirectUri,r=e.embeddedClientId):e.extraParameters&&(e.redirectUri=e.extraParameters[LE],r=e.extraParameters[gi]),e.extraParameters={child_client_id:r,child_redirect_uri:o},this.performanceClient?.addFields({embeddedClientId:r,embeddedRedirectUri:o},e.correlationId)}}class or{constructor(e,n,r,o){this.logger=e,this.handshakeTimeoutMs=n,this.extensionId=o,this.resolvers=new Map,this.handshakeResolvers=new Map,this.messageChannel=new MessageChannel,this.windowListener=this.onWindowMessage.bind(this),this.performanceClient=r,this.handshakeEvent=r.startMeasurement("nativeMessageHandlerHandshake")}sendMessage(e){var n=this;return y(function*(){n.logger.trace("NativeMessageHandler - sendMessage called.");const r={channel:zs_CHANNEL_ID,extensionId:n.extensionId,responseId:er(),body:e};return n.logger.trace("NativeMessageHandler - Sending request to browser extension"),n.logger.tracePii(`NativeMessageHandler - Sending request to browser extension: ${JSON.stringify(r)}`),n.messageChannel.port1.postMessage(r),new Promise((o,i)=>{n.resolvers.set(r.responseId,{resolve:o,reject:i})})})()}static createProvider(e,n,r){return y(function*(){e.trace("NativeMessageHandler - createProvider called.");try{const o=new or(e,n,r,"ppnbnpeolgkicgegkbkbjmhlideopiji");return yield o.sendHandshakeRequest(),o}catch{const i=new or(e,n,r);return yield i.sendHandshakeRequest(),i}})()}sendHandshakeRequest(){var e=this;return y(function*(){e.logger.trace("NativeMessageHandler - sendHandshakeRequest called."),window.addEventListener("message",e.windowListener,!1);const n={channel:zs_CHANNEL_ID,extensionId:e.extensionId,responseId:er(),body:{method:"Handshake"}};return e.handshakeEvent.add({extensionId:e.extensionId,extensionHandshakeTimeoutMs:e.handshakeTimeoutMs}),e.messageChannel.port1.onmessage=r=>{e.onChannelMessage(r)},window.postMessage(n,window.origin,[e.messageChannel.port2]),new Promise((r,o)=>{e.handshakeResolvers.set(n.responseId,{resolve:r,reject:o}),e.timeoutId=window.setTimeout(()=>{window.removeEventListener("message",e.windowListener,!1),e.messageChannel.port1.close(),e.messageChannel.port2.close(),e.handshakeEvent.end({extensionHandshakeTimedOut:!0,success:!1}),o(O(Dp)),e.handshakeResolvers.delete(n.responseId)},e.handshakeTimeoutMs)})})()}onWindowMessage(e){if(this.logger.trace("NativeMessageHandler - onWindowMessage called"),e.source!==window)return;const n=e.data;if(n.channel&&n.channel===zs_CHANNEL_ID&&(!n.extensionId||n.extensionId===this.extensionId)&&"Handshake"===n.body.method){const r=this.handshakeResolvers.get(n.responseId);if(!r)return void this.logger.trace(`NativeMessageHandler.onWindowMessage - resolver can't be found for request ${n.responseId}`);this.logger.verbose(n.extensionId?`Extension with id: ${n.extensionId} not installed`:"No extension installed"),clearTimeout(this.timeoutId),this.messageChannel.port1.close(),this.messageChannel.port2.close(),window.removeEventListener("message",this.windowListener,!1),this.handshakeEvent.end({success:!1,extensionInstalled:!1}),r.reject(O(Sp))}}onChannelMessage(e){this.logger.trace("NativeMessageHandler - onChannelMessage called.");const n=e.data,r=this.resolvers.get(n.responseId),o=this.handshakeResolvers.get(n.responseId);try{const i=n.body.method;if("Response"===i){if(!r)return;const s=n.body.response;if(this.logger.trace("NativeMessageHandler - Received response from browser extension"),this.logger.tracePii(`NativeMessageHandler - Received response from browser extension: ${JSON.stringify(s)}`),"Success"!==s.status)r.reject(KE(s.code,s.description,s.ext));else{if(!s.result)throw I0(au,"Event does not contain result.");s.result.code&&s.result.description?r.reject(KE(s.result.code,s.result.description,s.result.ext)):r.resolve(s.result)}this.resolvers.delete(n.responseId)}else if("HandshakeResponse"===i){if(!o)return void this.logger.trace(`NativeMessageHandler.onChannelMessage - resolver can't be found for request ${n.responseId}`);clearTimeout(this.timeoutId),window.removeEventListener("message",this.windowListener,!1),this.extensionId=n.extensionId,this.extensionVersion=n.body.version,this.logger.verbose(`NativeMessageHandler - Received HandshakeResponse from extension: ${this.extensionId}`),this.handshakeEvent.end({extensionInstalled:!0,success:!0}),o.resolve(),this.handshakeResolvers.delete(n.responseId)}}catch(i){this.logger.error("Error parsing response from WAM Extension"),this.logger.errorPii(`Error parsing response from WAM Extension: ${i}`),this.logger.errorPii(`Unable to parse ${e}`),r?r.reject(i):o&&o.reject(i)}}getExtensionId(){return this.extensionId}getExtensionVersion(){return this.extensionVersion}static isNativeAvailable(e,n,r,o){if(n.trace("isNativeAvailable called"),!e.system.allowNativeBroker)return n.trace("isNativeAvailable: allowNativeBroker is not enabled, returning false"),!1;if(!r)return n.trace("isNativeAvailable: WAM extension provider is not initialized, returning false"),!1;if(o)switch(o){case ve.BEARER:case ve.POP:return n.trace("isNativeAvailable: authenticationScheme is supported, returning true"),!0;default:return n.trace("isNativeAvailable: authenticationScheme is not supported, returning false"),!1}return!0}}class YE{constructor(e,n,r,o,i){this.authModule=e,this.browserStorage=n,this.authCodeRequest=r,this.logger=o,this.performanceClient=i}handleCodeResponse(e,n){var r=this;return y(function*(){let o;r.performanceClient.addQueueMeasurement("handleCodeResponse",n.correlationId);try{o=r.authModule.handleFragmentResponse(e,n.state)}catch(i){throw i instanceof po&&i.subError===br?O(br):i}return k(r.handleCodeResponseFromServer.bind(r),"handleCodeResponseFromServer",r.logger,r.performanceClient,n.correlationId)(o,n)})()}handleCodeResponseFromServer(e,n){var r=this;return y(function*(o,i,s=!0){if(r.performanceClient.addQueueMeasurement("handleCodeResponseFromServer",i.correlationId),r.logger.trace("InteractionHandler.handleCodeResponseFromServer called"),r.authCodeRequest.code=o.code,o.cloud_instance_host_name&&(yield k(r.authModule.updateAuthority.bind(r.authModule),"updateTokenEndpointAuthority",r.logger,r.performanceClient,i.correlationId)(o.cloud_instance_host_name,i.correlationId)),s&&(o.nonce=i.nonce||void 0),o.state=i.state,o.client_info)r.authCodeRequest.clientInfo=o.client_info;else{const c=r.createCcsCredentials(i);c&&(r.authCodeRequest.ccsCredential=c)}return yield k(r.authModule.acquireToken.bind(r.authModule),"authClientAcquireToken",r.logger,r.performanceClient,i.correlationId)(r.authCodeRequest,o)}).apply(this,arguments)}createCcsCredentials(e){return e.account?{credential:e.account.homeAccountId,type:"home_account_id"}:e.loginHint?{credential:e.loginHint,type:"UPN"}:null}}function Sx(t,e,n){const r=Xh(t);if(!r)throw N0(t)?(n.error(`A ${e} is present in the iframe but it does not contain known properties. It's likely that the ${e} has been replaced by code running on the redirectUri page.`),n.errorPii(`The ${e} detected is: ${t}`),O(ip)):(n.error(`The request has returned to the redirectUri but a ${e} is not present. It's likely that the ${e} has been removed or the page has been redirected by code running on the redirectUri page.`),O(op));return r}class HJ extends ta{constructor(e,n,r,o,i,s,a,c,u,l){super(e,n,r,o,i,s,a,u,l),this.unloadWindow=this.unloadWindow.bind(this),this.nativeStorage=c}acquireToken(e){try{const r={popupName:this.generatePopupName(e.scopes||Ls,e.authority||this.config.auth.authority),popupWindowAttributes:e.popupWindowAttributes||{},popupWindowParent:e.popupWindowParent??window};return this.config.system.asyncPopups?(this.logger.verbose("asyncPopups set to true, acquiring token"),this.acquireTokenPopupAsync(e,r)):(this.logger.verbose("asyncPopup set to false, opening popup before acquiring token"),r.popup=this.openSizedPopup("about:blank",r),this.acquireTokenPopupAsync(e,r))}catch(n){return Promise.reject(n)}}logout(e){try{this.logger.verbose("logoutPopup called");const n=this.initializeLogoutRequest(e),r={popupName:this.generateLogoutPopupName(n),popupWindowAttributes:e?.popupWindowAttributes||{},popupWindowParent:e?.popupWindowParent??window},o=e&&e.authority,i=e&&e.mainWindowRedirectUri;return this.config.system.asyncPopups?(this.logger.verbose("asyncPopups set to true"),this.logoutPopupAsync(n,r,o,i)):(this.logger.verbose("asyncPopup set to false, opening popup"),r.popup=this.openSizedPopup("about:blank",r),this.logoutPopupAsync(n,r,o,i))}catch(n){return Promise.reject(n)}}acquireTokenPopupAsync(e,n){var r=this;return y(function*(){r.logger.verbose("acquireTokenPopupAsync called");const o=r.initializeServerTelemetryManager(862),i=yield k(r.initializeAuthorizationRequest.bind(r),"standardInteractionClientInitializeAuthorizationRequest",r.logger,r.performanceClient,r.correlationId)(e,L.Popup);rx(i.authority);try{const s=yield k(r.initializeAuthorizationCodeRequest.bind(r),"standardInteractionClientInitializeAuthorizationCodeRequest",r.logger,r.performanceClient,r.correlationId)(i),a=yield k(r.createAuthCodeClient.bind(r),"standardInteractionClientCreateAuthCodeClient",r.logger,r.performanceClient,r.correlationId)({serverTelemetryManager:o,requestAuthority:i.authority,requestAzureCloudOptions:i.azureCloudOptions,requestExtraQueryParameters:i.extraQueryParameters,account:i.account}),c=or.isNativeAvailable(r.config,r.logger,r.nativeMessageHandler,e.authenticationScheme);let u;c&&(u=r.performanceClient.startMeasurement("fetchAccountIdWithNativeBroker",e.correlationId));const l=yield a.getAuthCodeUrl({...i,nativeBroker:c}),d=new YE(a,r.browserStorage,s,r.logger,r.performanceClient),f=r.initiateAuthRequest(l,n);r.eventHandler.emitEvent("msal:popupOpened",L.Popup,{popupWindow:f},null);const h=yield r.monitorPopupForHash(f,n.popupWindowParent),p=pi(Sx,"deserializeResponse",r.logger,r.performanceClient,r.correlationId)(h,r.config.auth.OIDCOptions.serverResponseType,r.logger);if(nr.removeThrottle(r.browserStorage,r.config.auth.clientId,s),p.accountId){if(r.logger.verbose("Account id found in hash, calling WAM for token"),u&&u.end({success:!0,isNativeBroker:!0}),!r.nativeMessageHandler)throw O(hi);const _=new ra(r.config,r.browserStorage,r.browserCrypto,r.logger,r.eventHandler,r.navigationClient,862,r.performanceClient,r.nativeMessageHandler,p.accountId,r.nativeStorage,i.correlationId),{userRequestState:C}=Un.parseRequestState(r.browserCrypto,i.state);return yield _.acquireToken({...i,state:C,prompt:void 0})}return yield d.handleCodeResponse(p,i)}catch(s){throw n.popup?.close(),s instanceof Ne&&(s.setCorrelationId(r.correlationId),o.cacheFailedRequest(s)),s}})()}logoutPopupAsync(e,n,r,o){var i=this;return y(function*(){i.logger.verbose("logoutPopupAsync called"),i.eventHandler.emitEvent("msal:logoutStart",L.Popup,e);const s=i.initializeServerTelemetryManager(962);try{yield i.clearCacheOnLogout(e.account);const c=(yield k(i.createAuthCodeClient.bind(i),"standardInteractionClientCreateAuthCodeClient",i.logger,i.performanceClient,i.correlationId)({serverTelemetryManager:s,requestAuthority:r,account:e.account||void 0})).getLogoutUri(e);i.eventHandler.emitEvent("msal:logoutSuccess",L.Popup,e);const u=i.openPopup(c,n);if(i.eventHandler.emitEvent("msal:popupOpened",L.Popup,{popupWindow:u},null),yield i.monitorPopupForHash(u,n.popupWindowParent).catch(()=>{}),o){const l={apiId:962,timeout:i.config.system.redirectNavigationTimeout,noHistory:!1},d=se.getAbsoluteUrl(o,Rr());i.logger.verbose("Redirecting main window to url specified in the request"),i.logger.verbosePii(`Redirecting main window to: ${d}`),yield i.navigationClient.navigateInternal(d,l)}else i.logger.verbose("No main window navigation requested")}catch(a){throw n.popup?.close(),a instanceof Ne&&(a.setCorrelationId(i.correlationId),s.cacheFailedRequest(a)),i.browserStorage.setInteractionInProgress(!1),i.eventHandler.emitEvent("msal:logoutFailure",L.Popup,null,a),i.eventHandler.emitEvent("msal:logoutEnd",L.Popup),a}i.eventHandler.emitEvent("msal:logoutEnd",L.Popup)})()}initiateAuthRequest(e,n){if(e)return this.logger.infoPii(`Navigate to: ${e}`),this.openPopup(e,n);throw this.logger.error("Navigate url is empty"),O(qs)}monitorPopupForHash(e,n){return new Promise((r,o)=>{this.logger.verbose("PopupHandler.monitorPopupForHash - polling started");const i=setInterval(()=>{if(e.closed)return this.logger.error("PopupHandler.monitorPopupForHash - window closed"),clearInterval(i),void o(O(br));let s="";try{s=e.location.href}catch{}if(!s||"about:blank"===s)return;clearInterval(i);let a="";e&&(a=this.config.auth.OIDCOptions.serverResponseType===ou.QUERY?e.location.search:e.location.hash),this.logger.verbose("PopupHandler.monitorPopupForHash - popup window is on same origin as caller"),r(a)},this.config.system.pollIntervalMilliseconds)}).finally(()=>{this.cleanPopup(e,n)})}openPopup(e,n){try{let r;if(n.popup?(r=n.popup,this.logger.verbosePii(`Navigating popup window to: ${e}`),r.location.assign(e)):typeof n.popup>"u"&&(this.logger.verbosePii(`Opening popup window to: ${e}`),r=this.openSizedPopup(e,n)),!r)throw O(lp);return r.focus&&r.focus(),this.currentWindow=r,n.popupWindowParent.addEventListener("beforeunload",this.unloadWindow),r}catch(r){throw this.logger.error("error opening popup "+r.message),this.browserStorage.setInteractionInProgress(!1),O(up)}}openSizedPopup(e,{popupName:n,popupWindowAttributes:r,popupWindowParent:o}){const i=o.screenLeft?o.screenLeft:o.screenX,s=o.screenTop?o.screenTop:o.screenY,a=o.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,c=o.innerHeight||document.documentElement.clientHeight||document.body.clientHeight;let u=r.popupSize?.width,l=r.popupSize?.height,d=r.popupPosition?.top,f=r.popupPosition?.left;return(!u||u<0||u>a)&&(this.logger.verbose("Default popup window width used. Window width not configured or invalid."),u=483),(!l||l<0||l>c)&&(this.logger.verbose("Default popup window height used. Window height not configured or invalid."),l=600),(!d||d<0||d>c)&&(this.logger.verbose("Default popup window top position used. Window top not configured or invalid."),d=Math.max(0,c/2-300+s)),(!f||f<0||f>a)&&(this.logger.verbose("Default popup window left position used. Window left not configured or invalid."),f=Math.max(0,a/2-241.5+i)),o.open(e,n,`width=${u}, height=${l}, top=${d}, left=${f}, scrollbars=yes`)}unloadWindow(e){this.browserStorage.cleanRequestByInteractionType(L.Popup),this.currentWindow&&this.currentWindow.close(),e.preventDefault()}cleanPopup(e,n){e.close(),n.removeEventListener("beforeunload",this.unloadWindow),this.browserStorage.setInteractionInProgress(!1)}generatePopupName(e,n){return`msal.${this.config.auth.clientId}.${e.join("-")}.${n}.${this.correlationId}`}generateLogoutPopupName(e){return`msal.${this.config.auth.clientId}.${e.account&&e.account.homeAccountId}.${this.correlationId}`}}class Ax{constructor(e,n,r,o,i){this.authModule=e,this.browserStorage=n,this.authCodeRequest=r,this.logger=o,this.performanceClient=i}initiateAuthRequest(e,n){var r=this;return y(function*(){if(r.logger.verbose("RedirectHandler.initiateAuthRequest called"),e){n.redirectStartPage&&(r.logger.verbose("RedirectHandler.initiateAuthRequest: redirectStartPage set, caching start page"),r.browserStorage.setTemporaryCache("request.origin",n.redirectStartPage,!0)),r.browserStorage.setTemporaryCache("request.correlationId",r.authCodeRequest.correlationId,!0),r.browserStorage.cacheCodeRequest(r.authCodeRequest),r.logger.infoPii(`RedirectHandler.initiateAuthRequest: Navigate to: ${e}`);const o={apiId:861,timeout:n.redirectTimeout,noHistory:!1};return"function"==typeof n.onRedirectNavigate?(r.logger.verbose("RedirectHandler.initiateAuthRequest: Invoking onRedirectNavigate callback"),!1!==n.onRedirectNavigate(e)?(r.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate did not return false, navigating"),void(yield n.navigationClient.navigateExternal(e,o))):void r.logger.verbose("RedirectHandler.initiateAuthRequest: onRedirectNavigate returned false, stopping navigation")):(r.logger.verbose("RedirectHandler.initiateAuthRequest: Navigating window to navigate url"),void(yield n.navigationClient.navigateExternal(e,o)))}throw r.logger.info("RedirectHandler.initiateAuthRequest: Navigate url is empty"),O(qs)})()}handleCodeResponse(e,n){var r=this;return y(function*(){r.logger.verbose("RedirectHandler.handleCodeResponse called"),r.browserStorage.setInteractionInProgress(!1);const o=r.browserStorage.generateStateKey(n),i=r.browserStorage.getTemporaryCache(o);if(!i)throw b(Hs,"Cached State");let s;try{s=r.authModule.handleFragmentResponse(e,i)}catch(l){throw l instanceof po&&l.subError===br?O(br):l}const a=r.browserStorage.generateNonceKey(i),c=r.browserStorage.getTemporaryCache(a);if(r.authCodeRequest.code=s.code,s.cloud_instance_host_name&&(yield k(r.authModule.updateAuthority.bind(r.authModule),"updateTokenEndpointAuthority",r.logger,r.performanceClient,r.authCodeRequest.correlationId)(s.cloud_instance_host_name,r.authCodeRequest.correlationId)),s.nonce=c||void 0,s.state=i,s.client_info)r.authCodeRequest.clientInfo=s.client_info;else{const l=r.checkCcsCredentials();l&&(r.authCodeRequest.ccsCredential=l)}const u=yield r.authModule.acquireToken(r.authCodeRequest,s);return r.browserStorage.cleanRequestByState(n),u})()}checkCcsCredentials(){const e=this.browserStorage.getTemporaryCache("ccs.credential",!0);if(e)try{return JSON.parse(e)}catch{this.authModule.logger.error("Cache credential could not be parsed"),this.authModule.logger.errorPii(`Cache credential could not be parsed: ${e}`)}return null}}class VJ extends ta{constructor(e,n,r,o,i,s,a,c,u,l){super(e,n,r,o,i,s,a,u,l),this.nativeStorage=c}acquireToken(e){var n=this;return y(function*(){const r=yield k(n.initializeAuthorizationRequest.bind(n),"standardInteractionClientInitializeAuthorizationRequest",n.logger,n.performanceClient,n.correlationId)(e,L.Redirect);n.browserStorage.updateCacheEntries(r.state,r.nonce,r.authority,r.loginHint||"",r.account||null);const o=n.initializeServerTelemetryManager(861),i=s=>{s.persisted&&(n.logger.verbose("Page was restored from back/forward cache. Clearing temporary cache."),n.browserStorage.cleanRequestByState(r.state),n.eventHandler.emitEvent("msal:restoreFromBFCache",L.Redirect))};try{const s=yield k(n.initializeAuthorizationCodeRequest.bind(n),"standardInteractionClientInitializeAuthorizationCodeRequest",n.logger,n.performanceClient,n.correlationId)(r),a=yield k(n.createAuthCodeClient.bind(n),"standardInteractionClientCreateAuthCodeClient",n.logger,n.performanceClient,n.correlationId)({serverTelemetryManager:o,requestAuthority:r.authority,requestAzureCloudOptions:r.azureCloudOptions,requestExtraQueryParameters:r.extraQueryParameters,account:r.account}),c=new Ax(a,n.browserStorage,s,n.logger,n.performanceClient),u=yield a.getAuthCodeUrl({...r,nativeBroker:or.isNativeAvailable(n.config,n.logger,n.nativeMessageHandler,e.authenticationScheme)}),l=n.getRedirectStartPage(e.redirectStartPage);return n.logger.verbosePii(`Redirect start page: ${l}`),window.addEventListener("pageshow",i),yield c.initiateAuthRequest(u,{navigationClient:n.navigationClient,redirectTimeout:n.config.system.redirectNavigationTimeout,redirectStartPage:l,onRedirectNavigate:e.onRedirectNavigate||n.config.auth.onRedirectNavigate})}catch(s){throw s instanceof Ne&&(s.setCorrelationId(n.correlationId),o.cacheFailedRequest(s)),window.removeEventListener("pageshow",i),n.browserStorage.cleanRequestByState(r.state),s}})()}handleRedirectPromise(){var e=this;return y(function*(n="",r){const o=e.initializeServerTelemetryManager(865);try{if(!e.browserStorage.isInteractionInProgress(!0))return e.logger.info("handleRedirectPromise called but there is no interaction in progress, returning null."),null;const[i,s]=e.getRedirectResponse(n||"");if(!i)return e.logger.info("handleRedirectPromise did not detect a response as a result of a redirect. Cleaning temporary cache."),e.browserStorage.cleanRequestByInteractionType(L.Redirect),"back_forward"!==function BJ(){if(typeof window>"u"||typeof window.performance>"u"||"function"!=typeof window.performance.getEntriesByType)return;const t=window.performance.getEntriesByType("navigation");return(t.length?t[0]:void 0)?.type}()?r.event.errorCode="no_server_response":e.logger.verbose("Back navigation event detected. Muting no_server_response error"),null;const a=e.browserStorage.getTemporaryCache("request.origin",!0)||T.EMPTY_STRING;if(se.removeHashFromUrl(a)===se.removeHashFromUrl(window.location.href)&&e.config.auth.navigateToLoginRequestUrl)return e.logger.verbose("Current page is loginRequestUrl, handling response"),a.indexOf("#")>-1&&function K9(t){const e=t.split("#");e.shift(),window.location.hash=e.length>0?e.join("#"):""}(a),yield e.handleResponse(i,o);if(!e.config.auth.navigateToLoginRequestUrl)return e.logger.verbose("NavigateToLoginRequestUrl set to false, handling response"),yield e.handleResponse(i,o);if(!SE()||e.config.system.allowRedirectInIframe){e.browserStorage.setTemporaryCache("urlHash",s,!0);const l={apiId:865,timeout:e.config.system.redirectNavigationTimeout,noHistory:!0};let d=!0;if(a&&"null"!==a)e.logger.verbose(`Navigating to loginRequestUrl: ${a}`),d=yield e.navigationClient.navigateInternal(a,l);else{const f=function Y9(){const e=new se(window.location.href).getUrlComponents();return`${e.Protocol}//${e.HostNameAndPort}/`}();e.browserStorage.setTemporaryCache("request.origin",f,!0),e.logger.warning("Unable to get valid login request url from cache, redirecting to home page"),d=yield e.navigationClient.navigateInternal(f,l)}if(!d)return yield e.handleResponse(i,o)}return null}catch(i){throw i instanceof Ne&&(i.setCorrelationId(e.correlationId),o.cacheFailedRequest(i)),e.browserStorage.cleanRequestByInteractionType(L.Redirect),i}}).apply(this,arguments)}getRedirectResponse(e){this.logger.verbose("getRedirectResponseHash called");let n=e;n||(n=this.config.auth.OIDCOptions.serverResponseType===ou.QUERY?window.location.search:window.location.hash);let r=Xh(n);if(r){try{!function UJ(t,e,n){if(!t.state)throw O(Tu);const r=fx(e,t.state);if(!r)throw O(sp);if(r.interactionType!==n)throw O(ap)}(r,this.browserCrypto,L.Redirect)}catch(i){return i instanceof Ne&&this.logger.error(`Interaction type validation failed due to ${i.errorCode}: ${i.errorMessage}`),[null,""]}return function q9(t){t.location.hash="","function"==typeof t.history.replaceState&&t.history.replaceState(null,"",`${t.location.origin}${t.location.pathname}${t.location.search}`)}(window),this.logger.verbose("Hash contains known properties, returning response hash"),[r,n]}const o=this.browserStorage.getTemporaryCache("urlHash",!0);return this.browserStorage.removeItem(this.browserStorage.generateCacheKey("urlHash")),o&&(r=Xh(o),r)?(this.logger.verbose("Hash does not contain known properties, returning cached hash"),[r,o]):[null,""]}handleResponse(e,n){var r=this;return y(function*(){const o=e.state;if(!o)throw O(Tu);const i=r.browserStorage.getCachedRequest(o);if(r.logger.verbose("handleResponse called, retrieved cached request"),e.accountId){if(r.logger.verbose("Account id found in hash, calling WAM for token"),!r.nativeMessageHandler)throw O(hi);const u=new ra(r.config,r.browserStorage,r.browserCrypto,r.logger,r.eventHandler,r.navigationClient,862,r.performanceClient,r.nativeMessageHandler,e.accountId,r.nativeStorage,i.correlationId),{userRequestState:l}=Un.parseRequestState(r.browserCrypto,o);return u.acquireToken({...i,state:l,prompt:void 0}).finally(()=>{r.browserStorage.cleanRequestByState(o)})}const s=r.browserStorage.getCachedAuthority(o);if(!s)throw O(wu);const a=yield k(r.createAuthCodeClient.bind(r),"standardInteractionClientCreateAuthCodeClient",r.logger,r.performanceClient,r.correlationId)({serverTelemetryManager:n,requestAuthority:s});return nr.removeThrottle(r.browserStorage,r.config.auth.clientId,i),new Ax(a,r.browserStorage,i,r.logger,r.performanceClient).handleCodeResponse(e,o)})()}logout(e){var n=this;return y(function*(){n.logger.verbose("logoutRedirect called");const r=n.initializeLogoutRequest(e),o=n.initializeServerTelemetryManager(961);try{n.eventHandler.emitEvent("msal:logoutStart",L.Redirect,e),yield n.clearCacheOnLogout(r.account);const i={apiId:961,timeout:n.config.system.redirectNavigationTimeout,noHistory:!1},a=(yield k(n.createAuthCodeClient.bind(n),"standardInteractionClientCreateAuthCodeClient",n.logger,n.performanceClient,n.correlationId)({serverTelemetryManager:o,requestAuthority:e&&e.authority,requestExtraQueryParameters:e?.extraQueryParameters,account:e&&e.account||void 0})).getLogoutUri(r);if(n.eventHandler.emitEvent("msal:logoutSuccess",L.Redirect,r),!e||"function"!=typeof e.onRedirectNavigate)return n.browserStorage.getInteractionInProgress()||n.browserStorage.setInteractionInProgress(!0),void(yield n.navigationClient.navigateExternal(a,i));if(!1!==e.onRedirectNavigate(a))return n.logger.verbose("Logout onRedirectNavigate did not return false, navigating"),n.browserStorage.getInteractionInProgress()||n.browserStorage.setInteractionInProgress(!0),void(yield n.navigationClient.navigateExternal(a,i));n.browserStorage.setInteractionInProgress(!1),n.logger.verbose("Logout onRedirectNavigate returned false, stopping navigation")}catch(i){throw i instanceof Ne&&(i.setCorrelationId(n.correlationId),o.cacheFailedRequest(i)),n.eventHandler.emitEvent("msal:logoutFailure",L.Redirect,null,i),n.eventHandler.emitEvent("msal:logoutEnd",L.Redirect),i}n.eventHandler.emitEvent("msal:logoutEnd",L.Redirect)})()}getRedirectStartPage(e){const n=e||window.location.href;return se.getAbsoluteUrl(n,Rr())}}function jJ(t,e,n,r,o){return QE.apply(this,arguments)}function QE(){return(QE=y(function*(t,e,n,r,o){if(e.addQueueMeasurement("silentHandlerInitiateAuthRequest",r),!t)throw n.info("Navigate url is empty"),O(qs);return o?k(GJ,"silentHandlerLoadFrame",n,e,r)(t,o,e,r):pi(zJ,"silentHandlerLoadFrameSync",n,e,r)(t)})).apply(this,arguments)}function $J(t,e,n,r,o,i,s){return JE.apply(this,arguments)}function JE(){return(JE=y(function*(t,e,n,r,o,i,s){return r.addQueueMeasurement("silentHandlerMonitorIframeForHash",i),new Promise((a,c)=>{e<1e4&&o.warning(`system.loadFrameTimeout or system.iframeHashTimeout set to lower (${e}ms) than the default (10000ms). This may result in timeouts.`);const u=window.setTimeout(()=>{window.clearInterval(l),c(O(dp))},e),l=window.setInterval(()=>{let d="";const f=t.contentWindow;try{d=f?f.location.href:""}catch{}if(!d||"about:blank"===d)return;let h="";f&&(h=s===ou.QUERY?f.location.search:f.location.hash),window.clearTimeout(u),window.clearInterval(l),a(h)},n)}).finally(()=>{pi(qJ,"removeHiddenIframe",o,r,i)(t)})})).apply(this,arguments)}function GJ(t,e,n,r){return n.addQueueMeasurement("silentHandlerLoadFrame",r),new Promise((o,i)=>{const s=bx();window.setTimeout(()=>{s?(s.src=t,o(s)):i("Unable to load iframe")},e)})}function zJ(t){const e=bx();return e.src=t,e}function bx(){const t=document.createElement("iframe");return t.className="msalSilentIframe",t.style.visibility="hidden",t.style.position="absolute",t.style.width=t.style.height="0",t.style.border="0",t.setAttribute("sandbox","allow-scripts allow-same-origin allow-forms"),document.body.appendChild(t),t}function qJ(t){document.body===t.parentNode&&document.body.removeChild(t)}class KJ extends ta{constructor(e,n,r,o,i,s,a,c,u,l,d){super(e,n,r,o,i,s,c,l,d),this.apiId=a,this.nativeStorage=u}acquireToken(e){var n=this;return y(function*(){n.performanceClient.addQueueMeasurement("silentIframeClientAcquireToken",e.correlationId),!e.loginHint&&!e.sid&&(!e.account||!e.account.username)&&n.logger.warning("No user hint provided. The authorization server may need more information to complete this request.");const r={...e};r.prompt?r.prompt!==ut.NONE&&r.prompt!==ut.NO_SESSION&&(n.logger.warning(`SilentIframeClient. Replacing invalid prompt ${r.prompt} with ${ut.NONE}`),r.prompt=ut.NONE):r.prompt=ut.NONE;const o=yield k(n.initializeAuthorizationRequest.bind(n),"standardInteractionClientInitializeAuthorizationRequest",n.logger,n.performanceClient,e.correlationId)(r,L.Silent);rx(o.authority);const i=n.initializeServerTelemetryManager(n.apiId);let s;try{return s=yield k(n.createAuthCodeClient.bind(n),"standardInteractionClientCreateAuthCodeClient",n.logger,n.performanceClient,e.correlationId)({serverTelemetryManager:i,requestAuthority:o.authority,requestAzureCloudOptions:o.azureCloudOptions,requestExtraQueryParameters:o.extraQueryParameters,account:o.account}),yield k(n.silentTokenHelper.bind(n),"silentIframeClientTokenHelper",n.logger,n.performanceClient,e.correlationId)(s,o)}catch(a){if(a instanceof Ne&&(a.setCorrelationId(n.correlationId),i.cacheFailedRequest(a)),!(s&&a instanceof Ne&&"invalid_grant"===a.errorCode))throw a;n.performanceClient.addFields({retryError:a.errorCode},n.correlationId);const c=yield k(n.initializeAuthorizationRequest.bind(n),"standardInteractionClientInitializeAuthorizationRequest",n.logger,n.performanceClient,e.correlationId)(r,L.Silent);return yield k(n.silentTokenHelper.bind(n),"silentIframeClientTokenHelper",n.logger,n.performanceClient,n.correlationId)(s,c)}})()}logout(){return Promise.reject(O(Ks))}silentTokenHelper(e,n){var r=this;return y(function*(){const o=n.correlationId;r.performanceClient.addQueueMeasurement("silentIframeClientTokenHelper",o);const i=yield k(r.initializeAuthorizationCodeRequest.bind(r),"standardInteractionClientInitializeAuthorizationCodeRequest",r.logger,r.performanceClient,o)(n),s=yield k(e.getAuthCodeUrl.bind(e),"getAuthCodeUrl",r.logger,r.performanceClient,o)({...n,nativeBroker:or.isNativeAvailable(r.config,r.logger,r.nativeMessageHandler,n.authenticationScheme)}),a=new YE(e,r.browserStorage,i,r.logger,r.performanceClient),c=yield k(jJ,"silentHandlerInitiateAuthRequest",r.logger,r.performanceClient,o)(s,r.performanceClient,r.logger,o,r.config.system.navigateFrameWait),u=r.config.auth.OIDCOptions.serverResponseType,l=yield k($J,"silentHandlerMonitorIframeForHash",r.logger,r.performanceClient,o)(c,r.config.system.iframeHashTimeout,r.config.system.pollIntervalMilliseconds,r.performanceClient,r.logger,o,u),d=pi(Sx,"deserializeResponse",r.logger,r.performanceClient,r.correlationId)(l,u,r.logger);if(d.accountId){if(r.logger.verbose("Account id found in hash, calling WAM for token"),!r.nativeMessageHandler)throw O(hi);const f=new ra(r.config,r.browserStorage,r.browserCrypto,r.logger,r.eventHandler,r.navigationClient,r.apiId,r.performanceClient,r.nativeMessageHandler,d.accountId,r.browserStorage,o),{userRequestState:h}=Un.parseRequestState(r.browserCrypto,n.state);return k(f.acquireToken.bind(f),"nativeInteractionClientAcquireToken",r.logger,r.performanceClient,o)({...n,state:h,prompt:n.prompt||ut.NONE})}return k(a.handleCodeResponse.bind(a),"handleCodeResponse",r.logger,r.performanceClient,o)(d,n)})()}}class WJ extends ta{acquireToken(e){var n=this;return y(function*(){n.performanceClient.addQueueMeasurement("silentRefreshClientAcquireToken",e.correlationId);const r=yield k(GE,"initializeBaseRequest",n.logger,n.performanceClient,e.correlationId)(e,n.config,n.performanceClient,n.logger),o={...e,...r};e.redirectUri&&(o.redirectUri=n.getRedirectUri(e.redirectUri));const i=n.initializeServerTelemetryManager(61),s=yield n.createRefreshTokenClient({serverTelemetryManager:i,authorityUrl:o.authority,azureCloudOptions:o.azureCloudOptions,account:o.account});return k(s.acquireTokenByRefreshToken.bind(s),"refreshTokenClientAcquireTokenByRefreshToken",n.logger,n.performanceClient,e.correlationId)(o).catch(a=>{throw a.setCorrelationId(n.correlationId),i.cacheFailedRequest(a),a})})()}logout(){return Promise.reject(O(Ks))}createRefreshTokenClient(e){var n=this;return y(function*(){const r=yield k(n.getClientConfiguration.bind(n),"standardInteractionClientGetClientConfiguration",n.logger,n.performanceClient,n.correlationId)({serverTelemetryManager:e.serverTelemetryManager,requestAuthority:e.authorityUrl,requestAzureCloudOptions:e.azureCloudOptions,requestExtraQueryParameters:e.extraQueryParameters,account:e.account});return new WE(r,n.performanceClient)})()}}class YJ{constructor(e,n,r,o){this.isBrowserEnvironment=typeof window<"u",this.config=e,this.storage=n,this.logger=r,this.cryptoObj=o}loadExternalTokens(e,n,r){if(!this.isBrowserEnvironment)throw O(Ws);const o=e.correlationId||er(),i=n.id_token?li(n.id_token,tr):void 0,s={protocolMode:this.config.auth.protocolMode,knownAuthorities:this.config.auth.knownAuthorities,cloudDiscoveryMetadata:this.config.auth.cloudDiscoveryMetadata,authorityMetadata:this.config.auth.authorityMetadata,skipAuthorityMetadataCache:this.config.auth.skipAuthorityMetadataCache},a=e.authority?new Tt(Tt.generateAuthority(e.authority,e.azureCloudOptions),this.config.system.networkClient,this.storage,s,this.logger,e.correlationId||er()):void 0,c=this.loadAccount(e,r.clientInfo||n.client_info||"",o,i,a),u=this.loadIdToken(n,c.homeAccountId,c.environment,c.realm,o),l=this.loadAccessToken(e,n,c.homeAccountId,c.environment,c.realm,r,o),d=this.loadRefreshToken(n,c.homeAccountId,c.environment,o);return this.generateAuthenticationResult(e,{account:c,idToken:u,accessToken:l,refreshToken:d},i,a)}loadAccount(e,n,r,o,i){if(this.logger.verbose("TokenCache - loading account"),e.account){const u=rt.createFromAccountInfo(e.account);return this.storage.setAccount(u,r),u}if(!i||!n&&!o)throw this.logger.error("TokenCache - if an account is not provided on the request, authority and either clientInfo or idToken must be provided instead."),O(Cp);const s=rt.generateHomeAccountId(n,i.authorityType,this.logger,this.cryptoObj,o),a=o?.tid,c=BE(this.storage,i,s,tr,r,o,n,i.hostnameAndPort,a,void 0,void 0,this.logger);return this.storage.setAccount(c,r),c}loadIdToken(e,n,r,o,i){if(!e.id_token)return this.logger.verbose("TokenCache - no id token found in response"),null;this.logger.verbose("TokenCache - loading id token");const s=Ph(n,r,e.id_token,this.config.auth.clientId,o);return this.storage.setIdTokenCredential(s,i),s}loadAccessToken(e,n,r,o,i,s,a){if(!n.access_token)return this.logger.verbose("TokenCache - no access token found in response"),null;if(!n.expires_in)return this.logger.error("TokenCache - no expiration set on the access token. Cannot add it to the cache."),null;if(!(n.scope||e.scopes&&e.scopes.length))return this.logger.error("TokenCache - scopes not specified in the request or response. Cannot add token to the cache."),null;this.logger.verbose("TokenCache - loading access token");const c=n.scope?We.fromString(n.scope):new We(e.scopes),u=s.expiresOn||n.expires_in+(new Date).getTime()/1e3,l=s.extendedExpiresOn||(n.ext_expires_in||n.expires_in)+(new Date).getTime()/1e3,d=xh(r,o,n.access_token,this.config.auth.clientId,i,c.printScopes(),u,l,tr);return this.storage.setAccessTokenCredential(d,a),d}loadRefreshToken(e,n,r,o){if(!e.refresh_token)return this.logger.verbose("TokenCache - no refresh token found in response"),null;this.logger.verbose("TokenCache - loading refresh token");const i=D0(n,r,e.refresh_token,this.config.auth.clientId,e.foci,void 0,e.refresh_token_expires_in);return this.storage.setRefreshTokenCredential(i,o),i}generateAuthenticationResult(e,n,r,o){let c,i="",s=[],a=null;n?.accessToken&&(i=n.accessToken.secret,s=We.fromString(n.accessToken.target).asArray(),a=new Date(1e3*Number(n.accessToken.expiresOn)),c=new Date(1e3*Number(n.accessToken.extendedExpiresOn)));const u=n.account;return{authority:o?o.canonicalAuthority:"",uniqueId:n.account.localAccountId,tenantId:n.account.realm,scopes:s,account:u.getAccountInfo(),idToken:n.idToken?.secret||"",idTokenClaims:r||{},accessToken:i,fromCache:!0,expiresOn:a,correlationId:e.correlationId||"",requestId:"",extExpiresOn:c,familyId:n.refreshToken?.familyId||"",tokenType:n?.accessToken?.tokenType||"",state:e.state||"",cloudGraphHostName:u.cloudGraphHostName||"",msGraphHost:u.msGraphHost||"",fromNativeBroker:!1}}}class QJ extends Cx{constructor(e){super(e),this.includeRedirectUri=!1}}class JJ extends ta{constructor(e,n,r,o,i,s,a,c,u,l){super(e,n,r,o,i,s,c,u,l),this.apiId=a}acquireToken(e){var n=this;return y(function*(){if(!e.code)throw O(Ep);const r=yield k(n.initializeAuthorizationRequest.bind(n),"standardInteractionClientInitializeAuthorizationRequest",n.logger,n.performanceClient,e.correlationId)(e,L.Silent),o=n.initializeServerTelemetryManager(n.apiId);try{const i={...r,code:e.code},s=yield k(n.getClientConfiguration.bind(n),"standardInteractionClientGetClientConfiguration",n.logger,n.performanceClient,e.correlationId)({serverTelemetryManager:o,requestAuthority:r.authority,requestAzureCloudOptions:r.azureCloudOptions,requestExtraQueryParameters:r.extraQueryParameters,account:r.account}),a=new QJ(s);n.logger.verbose("Auth code client created");const c=new YE(a,n.browserStorage,i,n.logger,n.performanceClient);return yield k(c.handleCodeResponseFromServer.bind(c),"handleCodeResponseFromServer",n.logger,n.performanceClient,e.correlationId)({code:e.code,msgraph_host:e.msGraphHost,cloud_graph_host_name:e.cloudGraphHostName,cloud_instance_host_name:e.cloudInstanceHostName},r,!1)}catch(i){throw i instanceof Ne&&(i.setCorrelationId(n.correlationId),o.cacheFailedRequest(i)),i}})()}logout(){return Promise.reject(O(Ks))}}function ir(t){const e=t?.idTokenClaims;return e?.tfp||e?.acr?"B2C":e?.tid?"9188040d-6c67-4c5b-b112-36a304b66dad"===e?.tid?"MSA":"AAD":void 0}function Lp(t,e){try{AE(t)}catch(n){throw e.end({success:!1},n),n}}class Up{constructor(e){this.operatingContext=e,this.isBrowserEnvironment=this.operatingContext.isBrowserEnvironment(),this.config=e.getConfig(),this.initialized=!1,this.logger=this.operatingContext.getLogger(),this.networkClient=this.config.system.networkClient,this.navigationClient=this.config.system.navigationClient,this.redirectResponse=new Map,this.hybridAuthCodeResponses=new Map,this.performanceClient=this.config.telemetry.client,this.browserCrypto=this.isBrowserEnvironment?new u7(this.logger,this.performanceClient):Oh,this.eventHandler=new O7(this.logger),this.browserStorage=this.isBrowserEnvironment?new xE(this.config.auth.clientId,this.config.cache,this.browserCrypto,this.logger,function g7(t){const e=t.cloudDiscoveryMetadata;let n;if(e)try{n=JSON.parse(e)}catch{throw we(Cu)}return{canonicalAuthority:t.authority?ux(t.authority):void 0,knownAuthorities:t.knownAuthorities,cloudDiscoveryMetadata:n}}(this.config.auth),this.performanceClient):(()=>new xE(this.config.auth.clientId,{cacheLocation:"memoryStorage",temporaryCacheLocation:"memoryStorage",storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1},Oh,this.logger))(),this.nativeInternalStorage=new xE(this.config.auth.clientId,{cacheLocation:"memoryStorage",temporaryCacheLocation:"memoryStorage",storeAuthStateInCookie:!1,secureCookies:!1,cacheMigrationEnabled:!1,claimsBasedCachingEnabled:!1},this.browserCrypto,this.logger,void 0,this.performanceClient),this.tokenCache=new YJ(this.config,this.browserStorage,this.logger,this.browserCrypto),this.activeSilentTokenRequests=new Map,this.trackPageVisibility=this.trackPageVisibility.bind(this),this.trackPageVisibilityWithMeasurement=this.trackPageVisibilityWithMeasurement.bind(this),this.listeningToStorageEvents=!1,this.handleAccountCacheChange=this.handleAccountCacheChange.bind(this)}static createController(e,n){return y(function*(){const r=new Up(e);return yield r.initialize(n),r})()}trackPageVisibility(e){e&&(this.logger.info("Perf: Visibility change detected"),this.performanceClient.incrementFields({visibilityChangeCount:1},e))}initialize(e){var n=this;return y(function*(){if(n.logger.trace("initialize called"),n.initialized)return void n.logger.info("initialize has already been called, exiting early.");if(!n.isBrowserEnvironment)return n.logger.info("in non-browser environment, exiting early."),n.initialized=!0,void n.eventHandler.emitEvent("msal:initializeEnd");const r=e?.correlationId||n.getRequestCorrelationId(),o=n.config.system.allowNativeBroker,i=n.performanceClient.startMeasurement("initializeClientApplication",r);if(n.eventHandler.emitEvent("msal:initializeStart"),o)try{n.nativeExtensionProvider=yield or.createProvider(n.logger,n.config.system.nativeBrokerHandshakeTimeout,n.performanceClient)}catch(s){n.logger.verbose(s)}n.config.cache.claimsBasedCachingEnabled||(n.logger.verbose("Claims-based caching is disabled. Clearing the previous cache with claims"),yield k(n.browserStorage.clearTokensAndKeysWithClaims.bind(n.browserStorage),"clearTokensAndKeysWithClaims",n.logger,n.performanceClient,r)(n.performanceClient,r)),n.initialized=!0,n.eventHandler.emitEvent("msal:initializeEnd"),i.end({allowNativeBroker:o,success:!0})})()}handleRedirectPromise(e){var n=this;return y(function*(){if(n.logger.verbose("handleRedirectPromise called"),tx(n.initialized),n.isBrowserEnvironment){const r=e||"";let o=n.redirectResponse.get(r);return typeof o>"u"?(o=n.handleRedirectPromiseInternal(e),n.redirectResponse.set(r,o),n.logger.verbose("handleRedirectPromise has been called for the first time, storing the promise")):n.logger.verbose("handleRedirectPromise has been called previously, returning the result from the first call"),o}return n.logger.verbose("handleRedirectPromise returns null, not browser environment"),null})()}handleRedirectPromiseInternal(e){var n=this;return y(function*(){const r=n.getAllAccounts(),o=n.browserStorage.getCachedNativeRequest(),i=o&&or.isNativeAvailable(n.config,n.logger,n.nativeExtensionProvider)&&n.nativeExtensionProvider&&!e,s=i?o?.correlationId:n.browserStorage.getTemporaryCache("request.correlationId",!0)||"",a=n.performanceClient.startMeasurement("acquireTokenRedirect",s);let c;if(n.eventHandler.emitEvent("msal:handleRedirectStart",L.Redirect),i&&n.nativeExtensionProvider){n.logger.trace("handleRedirectPromise - acquiring token from native platform");const u=new ra(n.config,n.browserStorage,n.browserCrypto,n.logger,n.eventHandler,n.navigationClient,865,n.performanceClient,n.nativeExtensionProvider,o.accountId,n.nativeInternalStorage,o.correlationId);c=k(u.handleRedirectPromise.bind(u),"handleNativeRedirectPromise",n.logger,n.performanceClient,a.event.correlationId)(n.performanceClient,a.event.correlationId)}else{n.logger.trace("handleRedirectPromise - acquiring token from web flow");const u=n.createRedirectClient(s);c=k(u.handleRedirectPromise.bind(u),"handleRedirectPromise",n.logger,n.performanceClient,a.event.correlationId)(e,a)}return c.then(u=>(u?(r.length<n.getAllAccounts().length?(n.eventHandler.emitEvent("msal:loginSuccess",L.Redirect,u),n.logger.verbose("handleRedirectResponse returned result, login success")):(n.eventHandler.emitEvent("msal:acquireTokenSuccess",L.Redirect,u),n.logger.verbose("handleRedirectResponse returned result, acquire token success")),a.end({success:!0,accountType:ir(u.account)})):a.event.errorCode?a.end({success:!1}):a.discard(),n.eventHandler.emitEvent("msal:handleRedirectEnd",L.Redirect),u)).catch(u=>{const l=u;throw n.eventHandler.emitEvent(r.length>0?"msal:acquireTokenFailure":"msal:loginFailure",L.Redirect,null,l),n.eventHandler.emitEvent("msal:handleRedirectEnd",L.Redirect),a.end({success:!1},l),u})})()}acquireTokenRedirect(e){var n=this;return y(function*(){const r=n.getRequestCorrelationId(e);n.logger.verbose("acquireTokenRedirect called",r);const o=n.performanceClient.startMeasurement("acquireTokenPreRedirect",r);o.add({accountType:ir(e.account),scenarioId:e.scenarioId});const i=e.onRedirectNavigate;if(i)e.onRedirectNavigate=a=>{const c="function"==typeof i?i(a):void 0;return!1!==c?o.end({success:!0}):o.discard(),c};else{const a=n.config.auth.onRedirectNavigate;n.config.auth.onRedirectNavigate=c=>{const u="function"==typeof a?a(c):void 0;return!1!==u?o.end({success:!0}):o.discard(),u}}const s=n.getAllAccounts().length>0;try{let a;return nx(n.initialized,n.config),n.browserStorage.setInteractionInProgress(!0),n.eventHandler.emitEvent(s?"msal:acquireTokenStart":"msal:loginStart",L.Redirect,e),a=n.nativeExtensionProvider&&n.canUseNative(e)?new ra(n.config,n.browserStorage,n.browserCrypto,n.logger,n.eventHandler,n.navigationClient,861,n.performanceClient,n.nativeExtensionProvider,n.getNativeAccountId(e),n.nativeInternalStorage,r).acquireTokenRedirect(e,o).catch(u=>{if(u instanceof rr&&na(u))return n.nativeExtensionProvider=void 0,n.createRedirectClient(r).acquireToken(e);if(u instanceof Ln)return n.logger.verbose("acquireTokenRedirect - Resolving interaction required error thrown by native broker by falling back to web flow"),n.createRedirectClient(r).acquireToken(e);throw n.browserStorage.setInteractionInProgress(!1),u}):n.createRedirectClient(r).acquireToken(e),yield a}catch(a){throw o.end({success:!1},a),n.eventHandler.emitEvent(s?"msal:acquireTokenFailure":"msal:loginFailure",L.Redirect,null,a),a}})()}acquireTokenPopup(e){const n=this.getRequestCorrelationId(e),r=this.performanceClient.startMeasurement("acquireTokenPopup",n);r.add({scenarioId:e.scenarioId,accountType:ir(e.account)});try{this.logger.verbose("acquireTokenPopup called",n),Lp(this.initialized,r),this.browserStorage.setInteractionInProgress(!0)}catch(s){return Promise.reject(s)}const o=this.getAllAccounts();let i;return this.eventHandler.emitEvent(o.length>0?"msal:acquireTokenStart":"msal:loginStart",L.Popup,e),i=this.canUseNative(e)?this.acquireTokenNative({...e,correlationId:n},862).then(s=>(this.browserStorage.setInteractionInProgress(!1),r.end({success:!0,isNativeBroker:!0,accountType:ir(s.account)}),s)).catch(s=>{if(s instanceof rr&&na(s))return this.nativeExtensionProvider=void 0,this.createPopupClient(n).acquireToken(e);if(s instanceof Ln)return this.logger.verbose("acquireTokenPopup - Resolving interaction required error thrown by native broker by falling back to web flow"),this.createPopupClient(n).acquireToken(e);throw this.browserStorage.setInteractionInProgress(!1),s}):this.createPopupClient(n).acquireToken(e),i.then(s=>(o.length<this.getAllAccounts().length?this.eventHandler.emitEvent("msal:loginSuccess",L.Popup,s):this.eventHandler.emitEvent("msal:acquireTokenSuccess",L.Popup,s),r.end({success:!0,accessTokenSize:s.accessToken.length,idTokenSize:s.idToken.length,accountType:ir(s.account)}),s)).catch(s=>(this.eventHandler.emitEvent(o.length>0?"msal:acquireTokenFailure":"msal:loginFailure",L.Popup,null,s),r.end({success:!1},s),Promise.reject(s)))}trackPageVisibilityWithMeasurement(){const e=this.ssoSilentMeasurement||this.acquireTokenByCodeAsyncMeasurement;e&&(this.logger.info("Perf: Visibility change detected in ",e.event.name),e.increment({visibilityChangeCount:1}))}ssoSilent(e){var n=this;return y(function*(){const r=n.getRequestCorrelationId(e),o={...e,prompt:e.prompt,correlationId:r};let i;return n.ssoSilentMeasurement=n.performanceClient.startMeasurement("ssoSilent",r),n.ssoSilentMeasurement?.add({scenarioId:e.scenarioId,accountType:ir(e.account)}),Lp(n.initialized,n.ssoSilentMeasurement),n.ssoSilentMeasurement?.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",n.trackPageVisibilityWithMeasurement),n.logger.verbose("ssoSilent called",r),n.eventHandler.emitEvent("msal:ssoSilentStart",L.Silent,o),i=n.canUseNative(o)?n.acquireTokenNative(o,863).catch(s=>{if(s instanceof rr&&na(s))return n.nativeExtensionProvider=void 0,n.createSilentIframeClient(o.correlationId).acquireToken(o);throw s}):n.createSilentIframeClient(o.correlationId).acquireToken(o),i.then(s=>(n.eventHandler.emitEvent("msal:ssoSilentSuccess",L.Silent,s),n.ssoSilentMeasurement?.end({success:!0,isNativeBroker:s.fromNativeBroker,accessTokenSize:s.accessToken.length,idTokenSize:s.idToken.length,accountType:ir(s.account)}),s)).catch(s=>{throw n.eventHandler.emitEvent("msal:ssoSilentFailure",L.Silent,null,s),n.ssoSilentMeasurement?.end({success:!1},s),s}).finally(()=>{document.removeEventListener("visibilitychange",n.trackPageVisibilityWithMeasurement)})})()}acquireTokenByCode(e){var n=this;return y(function*(){const r=n.getRequestCorrelationId(e);n.logger.trace("acquireTokenByCode called",r);const o=n.performanceClient.startMeasurement("acquireTokenByCode",r);Lp(n.initialized,o),n.eventHandler.emitEvent("msal:acquireTokenByCodeStart",L.Silent,e),o.add({scenarioId:e.scenarioId});try{if(e.code&&e.nativeAccountId)throw O(Tp);if(e.code){const i=e.code;let s=n.hybridAuthCodeResponses.get(i);return s?(n.logger.verbose("Existing acquireTokenByCode request found",r),o.discard()):(n.logger.verbose("Initiating new acquireTokenByCode request",r),s=n.acquireTokenByCodeAsync({...e,correlationId:r}).then(a=>(n.eventHandler.emitEvent("msal:acquireTokenByCodeSuccess",L.Silent,a),n.hybridAuthCodeResponses.delete(i),o.end({success:!0,isNativeBroker:a.fromNativeBroker,accessTokenSize:a.accessToken.length,idTokenSize:a.idToken.length,accountType:ir(a.account)}),a)).catch(a=>{throw n.hybridAuthCodeResponses.delete(i),n.eventHandler.emitEvent("msal:acquireTokenByCodeFailure",L.Silent,null,a),o.end({success:!1},a),a}),n.hybridAuthCodeResponses.set(i,s)),yield s}if(e.nativeAccountId){if(n.canUseNative(e,e.nativeAccountId)){const i=yield n.acquireTokenNative({...e,correlationId:r},866,e.nativeAccountId).catch(s=>{throw s instanceof rr&&na(s)&&(n.nativeExtensionProvider=void 0),s});return o.end({accountType:ir(i.account),success:!0}),i}throw O(wp)}throw O(Ip)}catch(i){throw n.eventHandler.emitEvent("msal:acquireTokenByCodeFailure",L.Silent,null,i),o.end({success:!1},i),i}})()}acquireTokenByCodeAsync(e){var n=this;return y(function*(){return n.logger.trace("acquireTokenByCodeAsync called",e.correlationId),n.acquireTokenByCodeAsyncMeasurement=n.performanceClient.startMeasurement("acquireTokenByCodeAsync",e.correlationId),n.acquireTokenByCodeAsyncMeasurement?.increment({visibilityChangeCount:0}),document.addEventListener("visibilitychange",n.trackPageVisibilityWithMeasurement),yield n.createSilentAuthCodeClient(e.correlationId).acquireToken(e).then(i=>(n.acquireTokenByCodeAsyncMeasurement?.end({success:!0,fromCache:i.fromCache,isNativeBroker:i.fromNativeBroker}),i)).catch(i=>{throw n.acquireTokenByCodeAsyncMeasurement?.end({success:!1},i),i}).finally(()=>{document.removeEventListener("visibilitychange",n.trackPageVisibilityWithMeasurement)})})()}acquireTokenFromCache(e,n){var r=this;return y(function*(){switch(r.performanceClient.addQueueMeasurement("acquireTokenFromCache",e.correlationId),n){case 0:case 1:case 2:const o=r.createSilentCacheClient(e.correlationId);return k(o.acquireToken.bind(o),"silentCacheClientAcquireToken",r.logger,r.performanceClient,e.correlationId)(e);default:throw b(Pn)}})()}acquireTokenByRefreshToken(e,n){var r=this;return y(function*(){switch(r.performanceClient.addQueueMeasurement("acquireTokenByRefreshToken",e.correlationId),n){case 0:case 2:case 3:case 4:const o=r.createSilentRefreshClient(e.correlationId);return k(o.acquireToken.bind(o),"silentRefreshClientAcquireToken",r.logger,r.performanceClient,e.correlationId)(e);default:throw b(Pn)}})()}acquireTokenBySilentIframe(e){var n=this;return y(function*(){n.performanceClient.addQueueMeasurement("acquireTokenBySilentIframe",e.correlationId);const r=n.createSilentIframeClient(e.correlationId);return k(r.acquireToken.bind(r),"silentIframeClientAcquireToken",n.logger,n.performanceClient,e.correlationId)(e)})()}logout(e){var n=this;return y(function*(){const r=n.getRequestCorrelationId(e);return n.logger.warning("logout API is deprecated and will be removed in msal-browser v3.0.0. Use logoutRedirect instead.",r),n.logoutRedirect({correlationId:r,...e})})()}logoutRedirect(e){var n=this;return y(function*(){const r=n.getRequestCorrelationId(e);return nx(n.initialized,n.config),n.browserStorage.setInteractionInProgress(!0),n.createRedirectClient(r).logout(e)})()}logoutPopup(e){try{const n=this.getRequestCorrelationId(e);return AE(this.initialized),this.browserStorage.setInteractionInProgress(!0),this.createPopupClient(n).logout(e)}catch(n){return Promise.reject(n)}}clearCache(e){var n=this;return y(function*(){if(!n.isBrowserEnvironment)return void n.logger.info("in non-browser environment, returning early.");const r=n.getRequestCorrelationId(e);return n.createSilentCacheClient(r).logout(e)})()}getAllAccounts(e){const n=this.getRequestCorrelationId();return function S7(t,e,n,r,o){return t.verbose("getAllAccounts called"),n?e.getAllAccounts(r,o):[]}(this.logger,this.browserStorage,this.isBrowserEnvironment,n,e)}getAccount(e){const n=this.getRequestCorrelationId();return function A7(t,e,n,r){if(e.trace("getAccount called"),0===Object.keys(t).length)return e.warning("getAccount: No accountFilter provided"),null;const o=n.getAccountInfoFilteredBy(t,r);return o?(e.verbose("getAccount: Account matching provided filter found, returning"),o):(e.verbose("getAccount: No matching account found, returning null"),null)}(e,this.logger,this.browserStorage,n)}getAccountByUsername(e){const n=this.getRequestCorrelationId();return function b7(t,e,n,r){if(e.trace("getAccountByUsername called"),!t)return e.warning("getAccountByUsername: No username provided"),null;const o=n.getAccountInfoFilteredBy({username:t},r);return o?(e.verbose("getAccountByUsername: Account matching username found, returning"),e.verbosePii(`getAccountByUsername: Returning signed-in accounts matching username: ${t}`),o):(e.verbose("getAccountByUsername: No matching account found, returning null"),null)}(e,this.logger,this.browserStorage,n)}getAccountByHomeId(e){const n=this.getRequestCorrelationId();return function k7(t,e,n,r){if(e.trace("getAccountByHomeId called"),!t)return e.warning("getAccountByHomeId: No homeAccountId provided"),null;const o=n.getAccountInfoFilteredBy({homeAccountId:t},r);return o?(e.verbose("getAccountByHomeId: Account matching homeAccountId found, returning"),e.verbosePii(`getAccountByHomeId: Returning signed-in accounts matching homeAccountId: ${t}`),o):(e.verbose("getAccountByHomeId: No matching account found, returning null"),null)}(e,this.logger,this.browserStorage,n)}getAccountByLocalId(e){const n=this.getRequestCorrelationId();return function R7(t,e,n,r){if(e.trace("getAccountByLocalId called"),!t)return e.warning("getAccountByLocalId: No localAccountId provided"),null;const o=n.getAccountInfoFilteredBy({localAccountId:t},r);return o?(e.verbose("getAccountByLocalId: Account matching localAccountId found, returning"),e.verbosePii(`getAccountByLocalId: Returning signed-in accounts matching localAccountId: ${t}`),o):(e.verbose("getAccountByLocalId: No matching account found, returning null"),null)}(e,this.logger,this.browserStorage,n)}setActiveAccount(e){const n=this.getRequestCorrelationId();!function M7(t,e,n){e.setActiveAccount(t,n)}(e,this.browserStorage,n)}getActiveAccount(){const e=this.getRequestCorrelationId();return function N7(t,e){return t.getActiveAccount(e)}(this.browserStorage,e)}hydrateCache(e,n){var r=this;return y(function*(){r.logger.verbose("hydrateCache called");const o=rt.createFromAccountInfo(e.account,e.cloudGraphHostName,e.msGraphHost);return r.browserStorage.setAccount(o,e.correlationId),e.fromNativeBroker?(r.logger.verbose("Response was from native broker, storing in-memory"),r.nativeInternalStorage.hydrateCache(e,n)):r.browserStorage.hydrateCache(e,n)})()}acquireTokenNative(e,n,r){var o=this;return y(function*(){if(o.logger.trace("acquireTokenNative called"),!o.nativeExtensionProvider)throw O(hi);return new ra(o.config,o.browserStorage,o.browserCrypto,o.logger,o.eventHandler,o.navigationClient,n,o.performanceClient,o.nativeExtensionProvider,r||o.getNativeAccountId(e),o.nativeInternalStorage,e.correlationId).acquireToken(e)})()}canUseNative(e,n){if(this.logger.trace("canUseNative called"),!or.isNativeAvailable(this.config,this.logger,this.nativeExtensionProvider,e.authenticationScheme))return this.logger.trace("canUseNative: isNativeAvailable returned false, returning false"),!1;if(e.prompt)switch(e.prompt){case ut.NONE:case ut.CONSENT:case ut.LOGIN:this.logger.trace("canUseNative: prompt is compatible with native flow");break;default:return this.logger.trace(`canUseNative: prompt = ${e.prompt} is not compatible with native flow, returning false`),!1}return!(!n&&!this.getNativeAccountId(e)&&(this.logger.trace("canUseNative: nativeAccountId is not available, returning false"),1))}getNativeAccountId(e){const n=e.account||this.getAccount({loginHint:e.loginHint,sid:e.sid})||this.getActiveAccount();return n&&n.nativeAccountId||""}createPopupClient(e){return new HJ(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.nativeExtensionProvider,e)}createRedirectClient(e){return new VJ(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeInternalStorage,this.nativeExtensionProvider,e)}createSilentIframeClient(e){return new KJ(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,863,this.performanceClient,this.nativeInternalStorage,this.nativeExtensionProvider,e)}createSilentCacheClient(e){return new Dx(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeExtensionProvider,e)}createSilentRefreshClient(e){return new WJ(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,this.performanceClient,this.nativeExtensionProvider,e)}createSilentAuthCodeClient(e){return new JJ(this.config,this.browserStorage,this.browserCrypto,this.logger,this.eventHandler,this.navigationClient,866,this.performanceClient,this.nativeExtensionProvider,e)}addEventCallback(e,n){return this.eventHandler.addEventCallback(e,n)}removeEventCallback(e){this.eventHandler.removeEventCallback(e)}addPerformanceCallback(e){return ex(),this.performanceClient.addPerformanceCallback(e)}removePerformanceCallback(e){return this.performanceClient.removePerformanceCallback(e)}enableAccountStorageEvents(){typeof window>"u"||(this.listeningToStorageEvents?this.logger.verbose("Account storage listener already registered."):(this.logger.verbose("Adding account storage listener."),this.listeningToStorageEvents=!0,window.addEventListener("storage",this.handleAccountCacheChange)))}disableAccountStorageEvents(){typeof window>"u"||(this.listeningToStorageEvents?(this.logger.verbose("Removing account storage listener."),window.removeEventListener("storage",this.handleAccountCacheChange),this.listeningToStorageEvents=!1):this.logger.verbose("No account storage listener registered."))}handleAccountCacheChange(e){try{e.key?.includes(ct.ACTIVE_ACCOUNT_FILTERS)&&this.eventHandler.emitEvent("msal:activeAccountChanged");const n=e.newValue||e.oldValue;if(!n)return;const r=JSON.parse(n);if("object"!=typeof r||!rt.isAccountEntity(r))return;const i=Gs.toObject(new rt,r).getAccountInfo();!e.oldValue&&e.newValue?(this.logger.info("Account was added to cache in a different window"),this.eventHandler.emitEvent("msal:accountAdded",void 0,i)):!e.newValue&&e.oldValue&&(this.logger.info("Account was removed from cache in a different window"),this.eventHandler.emitEvent("msal:accountRemoved",void 0,i))}catch{return}}getTokenCache(){return this.tokenCache}getLogger(){return this.logger}setLogger(e){this.logger=e}initializeWrapperLibrary(e,n){this.browserStorage.setWrapperMetadata(e,n)}setNavigationClient(e){this.navigationClient=e}getConfiguration(){return this.config}getPerformanceClient(){return this.performanceClient}isBrowserEnv(){return this.isBrowserEnvironment}getRequestCorrelationId(e){return e?.correlationId?e.correlationId:this.isBrowserEnvironment?er():T.EMPTY_STRING}loginRedirect(e){var n=this;return y(function*(){const r=n.getRequestCorrelationId(e);return n.logger.verbose("loginRedirect called",r),n.acquireTokenRedirect({correlationId:r,...e||V0})})()}loginPopup(e){const n=this.getRequestCorrelationId(e);return this.logger.verbose("loginPopup called",n),this.acquireTokenPopup({correlationId:n,...e||V0})}acquireTokenSilent(e){var n=this;return y(function*(){const r=n.getRequestCorrelationId(e),o=n.performanceClient.startMeasurement("acquireTokenSilent",r);o.add({cacheLookupPolicy:e.cacheLookupPolicy,scenarioId:e.scenarioId}),Lp(n.initialized,o),n.logger.verbose("acquireTokenSilent called",r);const i=e.account||n.getActiveAccount();if(!i)throw O(gp);o.add({accountType:ir(i)});const a=JSON.stringify({clientId:n.config.auth.clientId,authority:e.authority||T.EMPTY_STRING,scopes:e.scopes,homeAccountIdentifier:i.homeAccountId,claims:e.claims,authenticationScheme:e.authenticationScheme,resourceRequestMethod:e.resourceRequestMethod,resourceRequestUri:e.resourceRequestUri,shrClaims:e.shrClaims,sshKid:e.sshKid,shrOptions:e.shrOptions}),c=n.activeSilentTokenRequests.get(a);if(typeof c>"u"){n.logger.verbose("acquireTokenSilent called for the first time, storing active request",r);const u=k(n.acquireTokenSilentAsync.bind(n),"acquireTokenSilentAsync",n.logger,n.performanceClient,r)({...e,correlationId:r},i).then(l=>(n.activeSilentTokenRequests.delete(a),o.end({success:!0,fromCache:l.fromCache,isNativeBroker:l.fromNativeBroker,cacheLookupPolicy:e.cacheLookupPolicy,accessTokenSize:l.accessToken.length,idTokenSize:l.idToken.length}),l)).catch(l=>{throw n.activeSilentTokenRequests.delete(a),o.end({success:!1},l),l});return n.activeSilentTokenRequests.set(a,u),{...yield u,state:e.state}}return n.logger.verbose("acquireTokenSilent has been called previously, returning the result from the first call",r),o.discard(),{...yield c,state:e.state}})()}acquireTokenSilentAsync(e,n){var r=this;return y(function*(){const o=()=>r.trackPageVisibility(e.correlationId);r.performanceClient.addQueueMeasurement("acquireTokenSilentAsync",e.correlationId),r.eventHandler.emitEvent("msal:acquireTokenStart",L.Silent,e),e.correlationId&&r.performanceClient.incrementFields({visibilityChangeCount:0},e.correlationId),document.addEventListener("visibilitychange",o);const i=yield k(SJ,"initializeSilentRequest",r.logger,r.performanceClient,e.correlationId)(e,n,r.config,r.performanceClient,r.logger),s=e.cacheLookupPolicy||0;return r.acquireTokenSilentNoIframe(i,s).catch(function(){var c=y(function*(u){if(function ZJ(t,e){const o=!(t instanceof Ln&&t.subError!==Zs)&&("invalid_grant"===t.errorCode||t.errorCode===Pn)||t.errorCode===Js||t.errorCode===OE,i=O9.includes(e);return o&&i}(u,s)){if(r.activeIframeRequest){if(5!==s){const[d,f]=r.activeIframeRequest;r.logger.verbose(`Iframe request is already in progress, awaiting resolution for request with correlationId: ${f}`,i.correlationId);const h=r.performanceClient.startMeasurement("awaitConcurrentIframe",i.correlationId);h.add({awaitIframeCorrelationId:f});const p=yield d;if(h.end({success:p}),p)return r.logger.verbose(`Parallel iframe request with correlationId: ${f} succeeded. Retrying cache and/or RT redemption`,i.correlationId),r.acquireTokenSilentNoIframe(i,s);throw r.logger.info(`Iframe request with correlationId: ${f} failed. Interaction is required.`),u}return r.logger.warning("Another iframe request is currently in progress and CacheLookupPolicy is set to Skip. This may result in degraded performance and/or reliability for both calls. Please consider changing the CacheLookupPolicy to take advantage of request queuing and token cache.",i.correlationId),k(r.acquireTokenBySilentIframe.bind(r),"acquireTokenBySilentIframe",r.logger,r.performanceClient,i.correlationId)(i)}{let d;return r.activeIframeRequest=[new Promise(f=>{d=f}),i.correlationId],r.logger.verbose("Refresh token expired/invalid or CacheLookupPolicy is set to Skip, attempting acquire token by iframe.",i.correlationId),k(r.acquireTokenBySilentIframe.bind(r),"acquireTokenBySilentIframe",r.logger,r.performanceClient,i.correlationId)(i).then(f=>(d(!0),f)).catch(f=>{throw d(!1),f}).finally(()=>{r.activeIframeRequest=void 0})}}throw u});return function(u){return c.apply(this,arguments)}}()).then(c=>(r.eventHandler.emitEvent("msal:acquireTokenSuccess",L.Silent,c),e.correlationId&&r.performanceClient.addFields({fromCache:c.fromCache,isNativeBroker:c.fromNativeBroker},e.correlationId),c)).catch(c=>{throw r.eventHandler.emitEvent("msal:acquireTokenFailure",L.Silent,null,c),c}).finally(()=>{document.removeEventListener("visibilitychange",o)})})()}acquireTokenSilentNoIframe(e,n){var r=this;return y(function*(){return or.isNativeAvailable(r.config,r.logger,r.nativeExtensionProvider,e.authenticationScheme)&&e.account.nativeAccountId?(r.logger.verbose("acquireTokenSilent - attempting to acquire token from native platform"),r.acquireTokenNative(e,61).catch(function(){var o=y(function*(i){throw i instanceof rr&&na(i)?(r.logger.verbose("acquireTokenSilent - native platform unavailable, falling back to web flow"),r.nativeExtensionProvider=void 0,b(Pn)):i});return function(i){return o.apply(this,arguments)}}())):(r.logger.verbose("acquireTokenSilent - attempting to acquire token from web flow"),k(r.acquireTokenFromCache.bind(r),"acquireTokenFromCache",r.logger,r.performanceClient,e.correlationId)(e,n).catch(o=>{if(1===n)throw o;return r.eventHandler.emitEvent("msal:acquireTokenFromNetworkStart",L.Silent,e),k(r.acquireTokenByRefreshToken.bind(r),"acquireTokenByRefreshToken",r.logger,r.performanceClient,e.correlationId)(e,n)}))})()}}function ZE(){return(ZE=y(function*(t,e){const n=new ox(t);return yield n.initialize(),Up.createController(n,e)})).apply(this,arguments)}class Nu{static createPublicClientApplication(e){return y(function*(){const n=yield function XJ(t,e){return ZE.apply(this,arguments)}(e);return new Nu(e,n)})()}constructor(e,n){this.controller=n||new Up(new ox(e))}initialize(e){var n=this;return y(function*(){return n.controller.initialize(e)})()}acquireTokenPopup(e){var n=this;return y(function*(){return n.controller.acquireTokenPopup(e)})()}acquireTokenRedirect(e){return this.controller.acquireTokenRedirect(e)}acquireTokenSilent(e){return this.controller.acquireTokenSilent(e)}acquireTokenByCode(e){return this.controller.acquireTokenByCode(e)}addEventCallback(e,n){return this.controller.addEventCallback(e,n)}removeEventCallback(e){return this.controller.removeEventCallback(e)}addPerformanceCallback(e){return this.controller.addPerformanceCallback(e)}removePerformanceCallback(e){return this.controller.removePerformanceCallback(e)}enableAccountStorageEvents(){this.controller.enableAccountStorageEvents()}disableAccountStorageEvents(){this.controller.disableAccountStorageEvents()}getAccount(e){return this.controller.getAccount(e)}getAccountByHomeId(e){return this.controller.getAccountByHomeId(e)}getAccountByLocalId(e){return this.controller.getAccountByLocalId(e)}getAccountByUsername(e){return this.controller.getAccountByUsername(e)}getAllAccounts(e){return this.controller.getAllAccounts(e)}handleRedirectPromise(e){return this.controller.handleRedirectPromise(e)}loginPopup(e){return this.controller.loginPopup(e)}loginRedirect(e){return this.controller.loginRedirect(e)}logout(e){return this.controller.logout(e)}logoutRedirect(e){return this.controller.logoutRedirect(e)}logoutPopup(e){return this.controller.logoutPopup(e)}ssoSilent(e){return this.controller.ssoSilent(e)}getTokenCache(){return this.controller.getTokenCache()}getLogger(){return this.controller.getLogger()}setLogger(e){this.controller.setLogger(e)}setActiveAccount(e){this.controller.setActiveAccount(e)}getActiveAccount(){return this.controller.getActiveAccount()}initializeWrapperLibrary(e,n){return this.controller.initializeWrapperLibrary(e,n)}setNavigationClient(e){this.controller.setNavigationClient(e)}getConfiguration(){return this.controller.getConfiguration()}hydrateCache(e,n){var r=this;return y(function*(){return r.controller.hydrateCache(e,n)})()}clearCache(e){return this.controller.clearCache(e)}}const tZ={auth:{clientId:"697b17b5-9bcc-4504-b514-ec55f55e2f26",authority:"https://login.microsoftonline.com/4ff270ac-352c-404c-ac7e-d6280a937f61",redirectUri:window.location.origin},cache:{cacheLocation:"localStorage",storeAuthStateInCookie:!1}},nI={scopes:["openid","profile","api://07d90b1e-4149-4147-ad04-382cd0c9c6f8/api.read","api://07d90b1e-4149-4147-ad04-382cd0c9c6f8/api.write"]};let rI=(()=>{class t{constructor(){this.pca=new Nu(tZ),this.initialized=null}ensureInitialized(){return this.initialized||(this.initialized=this.pca.initialize()),this.initialized}login(){var n=this;return y(function*(){yield n.ensureInitialized();try{const r=yield n.pca.loginPopup(nI);return r&&r.account&&n.pca.setActiveAccount(r.account),r}catch(r){throw r}})()}logout(){const n=this.pca.getActiveAccount();return this.ensureInitialized().then(()=>n?this.pca.logoutPopup({account:n}).then(()=>{}):Promise.resolve())}getToken(){var n=this;return y(function*(){yield n.ensureInitialized();const r=n.pca.getActiveAccount(),o={scopes:nI.scopes,account:r||void 0};try{return(yield n.pca.acquireTokenSilent(o)).accessToken}catch{const s=yield n.pca.acquireTokenPopup(nI);return s&&s.account&&n.pca.setActiveAccount(s.account),s.accessToken}})()}getAccountUsername(){return this.pca.getActiveAccount()?.username??null}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=M({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function nZ(t,e){if(1&t&&(de(0,"span",11),Je(1),ye()),2&t){const n=e.ngIf;Mt(),vs("Signed in: ",n)}}function rZ(t,e){if(1&t){const n=Gd();de(0,"button",12),at("click",function(){return ol(n),il(gc().login())}),Je(1,"Login"),ye()}}function oZ(t,e){if(1&t){const n=Gd();de(0,"button",13),at("click",function(){return ol(n),il(gc().logout())}),Je(1,"Logout"),ye()}}let iZ=(()=>{class t{constructor(){this.auth=E(rI),this.username=wn(this.auth.getAccountUsername())}login(){var n=this;return y(function*(){yield n.auth.login(),n.username.set(n.auth.getAccountUsername())})()}logout(){var n=this;return y(function*(){yield n.auth.logout(),n.username.set(null)})()}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275cmp=is({type:t,selectors:[["app-root"]],decls:17,vars:3,consts:[[1,"container"],[1,"d-flex","align-items-center","justify-content-between","py-4"],[1,"h3","mb-1"],[1,"mt-2"],["routerLink","/",1,"me-3","text-muted"],["routerLink","/add",1,"text-muted"],["class","me-2 small text-secondary",4,"ngIf"],["class","btn btn-primary btn-sm me-1",3,"click",4,"ngIf"],["class","btn btn-outline-secondary btn-sm",3,"click",4,"ngIf"],[1,"card","shadow-sm"],[1,"card-body"],[1,"me-2","small","text-secondary"],[1,"btn","btn-primary","btn-sm","me-1",3,"click"],[1,"btn","btn-outline-secondary","btn-sm",3,"click"]],template:function(r,o){1&r&&(de(0,"div",0)(1,"header",1)(2,"div")(3,"h1",2),Je(4,"Chores"),ye(),de(5,"nav",3)(6,"a",4),Je(7,"List"),ye(),de(8,"a",5),Je(9,"Add"),ye()()(),de(10,"div"),nc(11,nZ,2,1,"span",6)(12,rZ,2,0,"button",7)(13,oZ,2,0,"button",8),ye()(),de(14,"main",9)(15,"div",10),jd(16,"router-outlet"),ye()()()),2&r&&(Mt(11),Xo("ngIf",o.username()),Mt(),Xo("ngIf",!o.username()),Mt(),Xo("ngIf",o.username()))},dependencies:[Ac,Y_,Zv,Hv,Kc],encapsulation:2})}}return t})(),oI=(()=>{class t{constructor(){this.http=E(aP),this.auth=E(rI),this.base="/api/chores"}withAuth(n,r){return et(n).pipe(mn(o=>{const i=o?new Zt({Authorization:`Bearer ${o}`}):new Zt;return r(i)}))}getAllChores(){return this.withAuth(this.auth.getToken(),n=>this.http.get(`${this.base}/getAllChores`,{headers:n}))}addChore(n){return this.withAuth(this.auth.getToken(),r=>this.http.post(`${this.base}/addChore`,n,{headers:r}))}static{this.\u0275fac=function(r){return new(r||t)}}static{this.\u0275prov=M({token:t,factory:t.\u0275fac,providedIn:"root"})}}return t})();function sZ(t,e){if(1&t){const n=Gd();de(0,"li",7),at("click",function(){const o=ol(n).$implicit;return il(gc().select(o))}),de(1,"div",8)(2,"div",9),Je(3),ye(),de(4,"div",10),Je(5),ye()(),de(6,"span",11),Je(7),ye()()}if(2&t){const n=e.$implicit;Mt(3),_s(n.name),Mt(2),_s(n.description),Mt(2),vs("#",n.id)}}function cZ(t,e){if(1&t&&(de(0,"div")(1,"div",1)(2,"div")(3,"h2",2),Je(4),ye(),de(5,"div",3),Je(6),ye()(),de(7,"a",4),Je(8,"Back"),ye()(),de(9,"div",5)(10,"div",6),Je(11),ye()()()),2&t){const n=gc();Mt(4),_s(n.chore.name),Mt(2),vs("ID: ",n.chore.id),Mt(5),_s(n.chore.description)}}const uZ=[{path:"",component:(()=>{class t{constructor(n){this.choresService=n,this.chores=[],this.query=""}ngOnInit(){this.choresService.getAllChores().subscribe(n=>this.chores=n||[])}filteredChores(){const n=this.query?.toLowerCase()||"";return this.chores.filter(r=>r.name.toLowerCase().includes(n)||(r.description||"").toLowerCase().includes(n))}select(n){window.location.hash=`#/chore/${n.id}`}static{this.\u0275fac=function(r){return new(r||t)(A(oI))}}static{this.\u0275cmp=is({type:t,selectors:[["app-chores-list"]],decls:8,vars:2,consts:[[1,"row","g-2","mb-3",3,"submit"],[1,"col"],["placeholder","Search chores",1,"form-control",3,"ngModelChange","ngModel"],[1,"col-auto"],[1,"btn","btn-primary"],[1,"list-group"],["class","list-group-item list-group-item-action d-flex justify-content-between align-items-start",3,"click",4,"ngFor","ngForOf"],[1,"list-group-item","list-group-item-action","d-flex","justify-content-between","align-items-start",3,"click"],[1,"ms-2","me-auto"],[1,"fw-semibold"],[1,"text-muted","small"],[1,"badge","bg-secondary","rounded-pill"]],template:function(r,o){1&r&&(de(0,"form",0),at("submit",function(s){return s.preventDefault()}),de(1,"div",1)(2,"input",2),_c("ngModelChange",function(s){return Zd(o.query,s)||(o.query=s),s}),ye()(),de(3,"div",3)(4,"button",4),Je(5,"Search"),ye()()(),de(6,"ul",5),nc(7,sZ,8,3,"li",6),ye()),2&r&&(Mt(2),yc("ngModel",o.query),Mt(5),Xo("ngForOf",o.filteredChores()))},dependencies:[Ac,jM,bC,DC,Zc,lC,dC,sh,Fs],encapsulation:2})}}return t})()},{path:"chore/:id",component:(()=>{class t{constructor(n){this.choresService=n}ngOnInit(){const n=Number(location.hash.split("/").pop());this.choresService.getAllChores().subscribe(r=>{this.chore=r.find(o=>o.id===n)})}static{this.\u0275fac=function(r){return new(r||t)(A(oI))}}static{this.\u0275cmp=is({type:t,selectors:[["app-chore-detail"]],decls:1,vars:1,consts:[[4,"ngIf"],[1,"d-flex","justify-content-between","align-items-start","mb-3"],[1,"h5","mb-1"],[1,"small","text-muted"],["routerLink","/",1,"btn","btn-link"],[1,"card"],[1,"card-body"]],template:function(r,o){1&r&&nc(0,cZ,12,3,"div",0),2&r&&Xo("ngIf",o.chore)},dependencies:[Ac,Y_,Zv,Kc],encapsulation:2})}}return t})()},{path:"add",component:(()=>{class t{constructor(n){this.choresService=n,this.model={name:"",description:""}}submit(){this.choresService.addChore(this.model).subscribe(n=>{window.location.href="/"})}static{this.\u0275fac=function(r){return new(r||t)(A(oI))}}static{this.\u0275cmp=is({type:t,selectors:[["app-chore-add"]],decls:17,vars:2,consts:[[1,"container"],[1,"h5","mb-3"],[3,"ngSubmit"],[1,"mb-3"],[1,"form-label"],["name","name","required","",1,"form-control",3,"ngModelChange","ngModel"],["name","description",1,"form-control",3,"ngModelChange","ngModel"],[1,"d-flex","gap-2"],["type","submit",1,"btn","btn-success"],["routerLink","/",1,"btn","btn-secondary"]],template:function(r,o){1&r&&(de(0,"div",0)(1,"h2",1),Je(2,"Add Chore"),ye(),de(3,"form",2),at("ngSubmit",function(){return o.submit()}),de(4,"div",3)(5,"label",4),Je(6,"Name"),ye(),de(7,"input",5),_c("ngModelChange",function(s){return Zd(o.model.name,s)||(o.model.name=s),s}),ye()(),de(8,"div",3)(9,"label",4),Je(10,"Description"),ye(),de(11,"input",6),_c("ngModelChange",function(s){return Zd(o.model.description,s)||(o.model.description=s),s}),ye()(),de(12,"div",7)(13,"button",8),Je(14,"Add"),ye(),de(15,"a",9),Je(16,"Cancel"),ye()()()()),2&r&&(Mt(7),yc("ngModel",o.model.name),Mt(4),yc("ngModel",o.model.description))},dependencies:[Ac,bC,DC,Zc,lC,dC,uh,sh,Fs],encapsulation:2})}}return t})()}];let lZ=(()=>{class t{constructor(n){this.auth=n}intercept(n,r){if(!n.url.includes("/api"))return r.handle(n);const o="1"===n.headers.get("x-auth-retried");return et(this.auth.getToken()).pipe(mn(i=>{const s=i?n.clone({setHeaders:{Authorization:`Bearer ${i}`}}):n;return r.handle(s).pipe(Rc(a=>a instanceof oo&&401===a.status&&!o?et(this.auth.getToken()).pipe(mn(c=>{const u=n.clone(c?{setHeaders:{Authorization:`Bearer ${c}`,"x-auth-retried":"1"}}:{setHeaders:{"x-auth-retried":"1"}});return r.handle(u)}),Rc(c=>Iv(()=>c))):Iv(()=>a)))}))}static{this.\u0275fac=function(r){return new(r||t)(F(rI))}}static{this.\u0275prov=M({token:t,factory:t.\u0275fac})}}return t})();(function PW(t,e,n){return uv.apply(this,arguments)})(iZ,{providers:[PI(HW,JY,bC,Zv),function dY(t,...e){return ga([{provide:qc,multi:!0,useValue:t},[],{provide:ks,useFactory:$O},{provide:$y,multi:!0,useFactory:GO},e.map(n=>n.\u0275providers)])}(uZ),{provide:iP,useClass:lZ,multi:!0}]}).catch(t=>console.error(t))}},ia=>{ia(ia.s=499)}]);